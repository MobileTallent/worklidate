!function t(e,a,o){function r(i,s){if(!a[i]){if(!e[i]){var l="function"==typeof require&&require;if(!s&&l)return l(i,!0);if(n)return n(i,!0);var c=new Error("Cannot find module '"+i+"'");throw c.code="MODULE_NOT_FOUND",c}var d=a[i]={exports:{}};e[i][0].call(d.exports,function(t){var a=e[i][1][t];return r(a?a:t)},d,d.exports,t,e,a,o)}return a[i].exports}for(var n="function"==typeof require&&require,i=0;i<o.length;i++)r(o[i]);return r}({1:[function(t,a,o){"use strict";angular.module("Worklidate",["ionic","ngCordova","ngResource","angular-google-analytics","credit-cards","ion-floating-menu","firebase","simditor","angular-timezone-selector","ngFileUpload","ui.select","ngSanitize","ngAutocomplete","ngTagsInput","as.sortable","720kb.socialshare","pascalprecht.translate","ngDialog","ngDraggable","720kb.datepicker","once","angular-input-stars","ion.rangeslider","textAngular","ionic-material","angular-clipboard"]).run(["$ionicPlatform","$rootScope","Firebase","$location","$window","$ionicSideMenuDelegate","$state",function(e,t,a,o,r,n,i){e.ready(function(){t.toggleLeft=function(){n.toggleLeft()},window.localStorage.getItem("lang")?t.currentLang=window.localStorage.getItem("lang"):t.currentLang="en",e.ready(function(){window.cordova&&window.cordova.plugins.Keyboard&&cordova.plugins.Keyboard.disableScroll(!0),window.StatusBar&&StatusBar.styleDefault()}),t.getDateFromTimestamp=function(e){var t=new Date(1e3*e),a=t.toJSON();return a},t.getTimestampFromDate=function(e){var t=new Date(e);return t},t.getURI_Encode=function(e){return encodeURI(e)},t.gotoprojectDetails=function(e){o.path("/app/project_details/"+e)},t.gotogroupDetails=function(e){o.path("/app/groupdetails/"+e)},t.gotouserDetails=function(e){e==t.loggedUserId?o.path("/app/profile"):o.path("/app/profileview/"+e)},t.calculateRating=function(e){var a=0,o=0;if(!e)return 0;var r=t.getObjectLength(e);for(var n in e)if(o+=1,e[n].avgrating&&(a+=e[n].avgrating),o==r)return a},setTimeout(function(){var e=firebase.database().ref("/search");e.on("value",function(e){if(t.data_for_search=e.val(),t.data_for_search_user_array=[],t.data_for_search_groups_array=[],t.data_for_search_projects_array=[],t.data_for_search&&t.data_for_search.users)for(var a in t.data_for_search.users)t.data_for_search_user_array.push(t.data_for_search.users[a]);if(t.data_for_search&&t.data_for_search.groups)for(var a in t.data_for_search.groups)t.data_for_search_groups_array.push(t.data_for_search.groups[a]);if(t.data_for_search&&t.data_for_search.projects)for(var a in t.data_for_search.projects)t.data_for_search_projects_array.push(t.data_for_search.projects[a])})},1e3),t.deleteProject=function(e){if(e){var t=new Date,a=JSON.parse(angular.toJson(t)),o=r.confirm("Really want to delete it?");if(o){var n=firebase.database().ref("/projects/"+e);n.once("value",function(t){var o=t.val();if(t.val()){var r=t.val().categories;for(var i in r)var s=firebase.database().ref("/categoryprojects/"+r[i].id).orderByChild("project_id").equalTo(e).once("value",function(e){for(var t in e.val()){var a="/categoryprojects/"+e.key+"/"+t;if(a&&e.key&&t){var o=firebase.database().ref(a);o.remove()}}});n.remove(function(t){if(t)console.log("Synchronization failed");else if(window.localStorage.getItem("info")){var r=firebase.database().ref("/users/"+JSON.parse(window.localStorage.getItem("info")).uid+"/timeline"),n=(r.push({publishAt:a,title:"Project deleted",subTitle:o.projectTitle,description:o.description,type:"delete_project",reference:e,statusline:""}),firebase.database().ref("/search/projects/").orderByChild("project_id").equalTo(e));n.once("value",function(e){if(e.val())for(var t in e.val()){var a=firebase.database().ref("/search/projects/"+t);a.remove()}})}})}})}}},t.getStars=function(e){var t=parseFloat(e),a=t/5*100;return a+"%"},t.getObjectLength=function(e){return null==e?0:Object.keys(e).length},t.convertToDate=function(e){return new Date(e)},t.getUTCdate=function(e){return new Date(e+" UTC")},t.getTypeOfTransation=function(e){if(e.employer_id==t.loggedUserId){if(e.moneyof==e.employer_id)return"Credited";if(e.moneyof==e.talent_id)return"Debited"}if(e.talent_id==t.loggedUserId){if(e.moneyof==e.employer_id)return"Debited";if(e.moneyof==e.talent_id)return"Credited"}}})}]).config(["$httpProvider","$stateProvider","$urlRouterProvider","$translateProvider","AnalyticsProvider",function(t,a,o,r,n){n.setAccount(app_config.analyticsKey),r.translations("en",lang_en),r.translations("zh",lang_ch),window.localStorage.getItem("lang")?r.preferredLanguage(window.localStorage.getItem("lang")):r.preferredLanguage("en"),a.state("app",{url:"/app","abstract":!0,templateUrl:"templates/menu.html",controller:"AppCtrl"}).state("app.login",{cache:!1,url:"/login",views:{menuContent:{templateUrl:"templates/views/login.html",controller:"LoginCtrl"}}}).state("app.forgotpassword",{url:"/forgotpassword",cache:!1,views:{menuContent:{templateUrl:"templates/views/forgotpassword.html",controller:"ForgotpasswordCtrl"}}}).state("app.signup",{url:"/signup",cache:!1,views:{menuContent:{templateUrl:"templates/views/signup.html",controller:"SignupCtrl"}}}).state("app.chat",{url:"/chat/:id",cache:!1,views:{menuContent:{templateUrl:"templates/views/chat.html",controller:"ChatCtrl"}}}).state("app.mainpage",{url:"/mainpage",cache:!0,views:{menuContent:{templateUrl:"templates/views/mainpage.html",controller:"MainpageCtrl"}}}).state("app.carddetails",{url:"/carddetails",cache:!0,views:{menuContent:{templateUrl:"templates/views/carddetails.html",controller:"CardDetailsCtrl"}}}).state("app.groupdiscussion",{url:"/groupdiscussion/:id",cache:!1,views:{menuContent:{templateUrl:"templates/views/group_discussion.html",controller:"GroupDiscussionCtrl"}}}).state("app.groupinvite",{url:"/groupinvite/:id",cache:!1,views:{menuContent:{templateUrl:"templates/views/group_invite.html",controller:"InviteGroupCtrl"}}}).state("app.profile",{cache:!1,url:"/profile",views:{menuContent:{templateUrl:"templates/views/profile.html",controller:"ProfileCtrl"}}}).state("app.profileview",{url:"/profileview/:id",cache:!1,views:{menuContent:{templateUrl:"templates/views/profile_view.html",controller:"ProfileViewCtrl"}}}).state("app.profile_about",{url:"/profile_about",cache:!1,views:{menuContent:{templateUrl:"templates/views/about.tpl.html",controller:"ProfileCtrl"}}}).state("app.profile_comments",{url:"/profile_comments",cache:!1,views:{menuContent:{templateUrl:"templates/views/comments.tpl.html",controller:"ProfileCtrl"}}}).state("app.profile_jobs",{url:"/profile_jobs",cache:!1,views:{menuContent:{templateUrl:"templates/views/jobs.tpl.html",controller:"ProfileCtrl"}}}).state("app.jobinvitation",{url:"/jobinvitation/:id",cache:!1,views:{menuContent:{templateUrl:"templates/views/inviteforjob.html",controller:"InviteForJob"}}}).state("app.profile_project",{url:"/profile_project",cache:!1,views:{menuContent:{templateUrl:"templates/views/project.tpl.html",controller:"ProfileCtrl"}}}).state("app.profile_timeline",{url:"/profile_timeline",cache:!1,views:{menuContent:{templateUrl:"templates/views/timeLine.tpl.html",controller:"ProfileCtrl"}}}).state("app.project_details",{url:"/project_details/:id",cache:!1,views:{menuContent:{templateUrl:"templates/views/project_details.html",controller:"ProjectDtailsCtrl"}}}).state("app.addproject",{url:"/addproject",cache:!1,views:{menuContent:{templateUrl:"templates/views/add_project.html",controller:"AddProjectCtrl"}}}).state("app.addmoreprojectinfo",{cache:!1,url:"/addmoreprojectinfo",views:{menuContent:{templateUrl:"templates/views/add_more_info.html",controller:"AddProjectCtrl"}}}).state("app.jobpost",{url:"/jobpost",cache:!1,views:{menuContent:{templateUrl:"templates/views/jobpost.html",controller:"JobpostCtrl"}}}).state("app.endcontract",{url:"/endcontract/:id",cache:!1,views:{menuContent:{templateUrl:"templates/views/endcontract.html",controller:"endcontraCtrl"}}}).state("app.contractfeedback",{url:"/contractfeedback/:id",cache:!1,views:{menuContent:{templateUrl:"templates/views/endcontract.html",controller:"contractFeedbackCtrl"}}}).state("app.proposallist",{url:"/proposallist/:id",cache:!1,views:{menuContent:{templateUrl:"templates/views/proposallist.html",controller:"ProposallistCtrl"}}}).state("app.applytojob",{url:"/applytojob/:id",cache:!1,views:{menuContent:{templateUrl:"templates/views/applytojob.html",controller:"ApplytojobCtrl"}}}).state("app.jobdetails",{url:"/jobdetails/:id",cache:!1,views:{menuContent:{templateUrl:"templates/views/jobdetails.html",controller:"JobDetailsCtrl"}}}).state("app.jobdetailsemployer",{url:"/job/details/:id",cache:!1,views:{menuContent:{templateUrl:"templates/views/jobdetails_employer.html",controller:"JobDetailsEmployerCtrl"}}}).state("app.contract_details_talent_view",{cache:!1,url:"/contract/details/:id",views:{menuContent:{templateUrl:"templates/views/contract_details_talent_view.html",controller:"ContractdetailsTalentViewCtrl"}}}).state("app.contract_details_employee_view",{url:"/contract/details/emp/:id",cache:!1,views:{menuContent:{templateUrl:"templates/views/contract_details_employee_view.html",controller:"ContractdetailsEmployeeViewCtrl"}}}).state("app.job_contract_list",{url:"/job/contract/:id",cache:!1,views:{menuContent:{templateUrl:"templates/views/job_contract_list.html",controller:"JobContractListCtrl"}}}).state("app.proposaldetails",{url:"/proposaldetails/:id",cache:!1,views:{menuContent:{templateUrl:"templates/views/proposaldetails.html",controller:"ProposaldetailsCtrl"}}}).state("app.milestonespayment",{url:"/milestonespayment/:proposalid/:type",cache:!1,views:{menuContent:{templateUrl:"templates/views/milestonepayment.html",controller:"MilestonesPaymentCtrl"}}}).state("app.proposaldetailstalent",{url:"/proposal/details/:id",cache:!1,views:{menuContent:{templateUrl:"templates/views/proposaldetails_talent_view.html",controller:"ProposaldetailsTalentViewCtrl"}}}).state("app.submitmilestone",{url:"/submitmilestone/:contractId/:id",cache:!1,views:{menuContent:{templateUrl:"templates/views/submitmilestone.html",controller:"SubmitmilestoneCtrl"}}}).state("app.submitmilestoneapprove",{url:"/submitmilestone/approve/:contractId/:id",cache:!1,views:{menuContent:{templateUrl:"templates/views/submitmilestoneapprove.html",controller:"SubmitmilestoneApproveCtrl"}}}).state("app.assignmilestone",{url:"/assignmilestone/:contractId",cache:!1,views:{menuContent:{templateUrl:"templates/views/assign_milestone.html",controller:"AssignMilestoneCtrl"}}}).state("app.workorganizer",{url:"/workorganizer",cache:!1,views:{menuContent:{templateUrl:"templates/views/work_organizer.html",controller:"WorkOrganizerCtrl"}}}).state("app.myfinance",{url:"/myfinance",cache:!1,views:{menuContent:{templateUrl:"templates/views/myfinance.html",controller:"MyFinanceCtrl"}}}).state("app.mymoney",{url:"/mymoney",cache:!1,views:{menuContent:{templateUrl:"templates/views/mymoney.html",controller:"MyMoneyCtrl",resolve:{taskObj:["$ionicPopup","$rootScope",function(t,a){return console.log("resolve"),!!a.loginVarify||t.show({template:'<input type="password" class="placeholder-grey pad0" placeholder="Enter Password"  ng-model="$root.tempwifidata.wifi">',title:"Enter your password",subTitle:"Please enter your worklidate account password to continue.",scope:a,buttons:[{text:"Cancel"},{text:"<b>Confirm</b>",type:"button-positive",onTap:function(e){return a.tempwifidata.wifi?a.tempwifidata.wifi:void e.preventDefault()}}]}).then(function(t){return firebase.auth().signInWithEmailAndPassword(JSON.parse(window.localStorage.getItem("info")).email,t).then(function(t){return t.emailVerified?(a.loginVarify=!0,!0):(alert("Login failed. Please try again."),void e.preventDefault())},function(t){alert("Login failed. Please try again."),e.preventDefault()})})}]}}}}).state("app.paymentmethods",{url:"/paymentmethods",cache:!1,views:{menuContent:{templateUrl:"templates/views/paymentmethods.html",controller:"PaymentMethodsCtrl"}}}).state("app.inovices",{url:"/inovices",cache:!1,views:{menuContent:{templateUrl:"templates/views/invoices.html",controller:"InvoicesCtrl"}}}).state("app.statements",{url:"/statements",cache:!1,views:{menuContent:{templateUrl:"templates/views/statements.html",controller:"StatementCtrl"}}}).state("app.transactions",{url:"/transactions",cache:!1,views:{menuContent:{templateUrl:"templates/views/transactions.html",controller:"TransactionsCtrl"}}}).state("app.withdrawmoney",{url:"/withdrawmoney",cache:!1,views:{menuContent:{templateUrl:"templates/views/withdraw.html",controller:"WithdrawMoneyCtrl"}}}).state("app.feedback",{url:"/feedback",cache:!1,views:{menuContent:{templateUrl:"templates/views/feedback.html",controller:"FeedbackCtrl"}}}).state("app.faq",{url:"/faq",cache:!1,views:{menuContent:{templateUrl:"templates/views/faq.html",controller:"FaqCtrl"}}}).state("app.feedbackid",{url:"/feedback/:id/:type",cache:!1,views:{menuContent:{templateUrl:"templates/views/feedbackDetails.html",controller:"FeedbackDetailsCtrl"}}}).state("app.inbox",{url:"/inbox",cache:!1,views:{menuContent:{templateUrl:"templates/views/inbox.html",controller:"InboxCtrl"}}}).state("app.group",{url:"/group",cache:!1,views:{menuContent:{templateUrl:"templates/views/group.html",controller:"GroupCtrl"}}}).state("app.sortby",{url:"/sortby",cache:!1,views:{menuContent:{templateUrl:"templates/views/sortby.html",controller:"SortByCtrl"}}}).state("app.search",{url:"/search",cache:!1,views:{menuContent:{templateUrl:"templates/views/search.html",controller:"SearchCtrl"}}}).state("app.searchtype",{url:"/search/:type",cache:!1,views:{menuContent:{templateUrl:"templates/views/search.html",controller:"SearchCtrl"}}}).state("app.searchtypeid",{url:"/search/:type/:id",cache:!1,views:{menuContent:{templateUrl:"templates/views/search.html",controller:"SearchCtrl"}}}).state("app.searchresult",{url:"/searchresult/:type/:id",cache:!1,views:{menuContent:{templateUrl:"templates/views/search_result.html",controller:"SearchResultCtrl"}}}).state("app.searchresultdetails",{url:"/searchresultdetails",cache:!1,views:{menuContent:{templateUrl:"templates/views/search_result_details.html",controller:"SearchResultDetailsCtrl"}}}).state("app.setting",{cache:!1,url:"/setting",views:{menuContent:{templateUrl:"templates/views/setting.html",controller:"SettingCtrl"}}}).state("app.editprofile",{url:"/editprofile",cache:!1,views:{menuContent:{templateUrl:"templates/views/edit_profile.html",controller:"EditProfileCtrl"}}}).state("app.groupdetails",{url:"/groupdetails/:id",cache:!1,views:{menuContent:{templateUrl:"templates/views/group_details.html",controller:"GroupDetailstCtrl"}}}).state("app.justLoadCtrl1",{url:"/justLoadCtrl1/",views:{menuContent:{templateUrl:"templates/views/employer.tpl.html",controller:"justLoadCtrl"}}}).state("app.justLoadCtrl2",{url:"/justLoadCtrl2/",views:{menuContent:{templateUrl:"templates/views/talent.tpl.html",controller:"justLoadCtrl"}}}).state("app.paypalpayment",{url:"/paypalpayment/:id",cache:!1,views:{menuContent:{templateUrl:"templates/views/paypalpayment.html",controller:"paypalpaymentCtrl"}}}).state("app.paypalpaymentfail",{url:"/paypalpaymentfail",cache:!1,views:{menuContent:{templateUrl:"templates/views/paypalpaymentfail.html",controller:"paypalpaymentfailCtrl"}}}),o.otherwise("/app/mainpage")}]).directive("select",function(){return{restrict:"E",scope:!1,link:function(e,t){t.on("touchmove touchstart",function(e){e.stopPropagation()})}}}).filter("trustAsResourceUrl",["$sce",function(e){return function(t){return e.trustAsResourceUrl(t)}}]).filter("getUser",["$sce","$rootScope","$firebaseObject",function(e,t,a){return function(e){var t=firebase.database().ref("/users/"+e);return a(t)}}]).filter("yesNo",function(){return function(e){return e?"Yes":"No"}}).filter("getGroup",["$sce","$rootScope","$firebaseObject",function(e,t,a){return function(e){var t=firebase.database().ref("/groups/"+e);return a(t)}}]).filter("getProject",["$sce","$rootScope","$firebaseObject",function(e,t,a){return function(e){var t=firebase.database().ref("/projects/"+e);return a(t)}}]).filter("getJob",["$sce","$rootScope","$firebaseObject",function(e,t,a){return function(e){var t=firebase.database().ref("/jobs/"+e);return a(t)}}]).filter("checkInvites",["$sce","$rootScope","$firebaseObject",function(e,t,a){return function(e,t){var o=firebase.database().ref("/groups/"+t+"/invites");return a(o.orderByChild("userid").equalTo(e))}}]).filter("checkPresent",["$sce","$rootScope","$firebaseObject",function(e,t,a){return function(e,t){for(var a in e)if(e[a].userid==t)return!0}}]).filter("positive",function(){return function(e){return e?Math.abs(e):0}}).filter("getLastElementOfObject",["$sce","$rootScope","$firebaseObject",function(e,t,a){return function(e,t){return Object.keys(e)[Object.keys(e).length-1]}}]).filter("checkSettingPresent",["$sce","$rootScope","$firebaseObject",function(e,t,a){return function(e,t){for(var a in e)if(e[a].catid==t)return!0}}]).filter("unique",function(){return function(e,t){var a=[],o=[];return angular.forEach(e,function(e){var r=e[t];o.indexOf(r)===-1&&(o.push(r),a.push(e))}),a}}).filter("objfilter",function(){return function(e,t){var a=[];for(var o in e)e[o].issue.indexOf(t)&&a.push(e[o]);return a}}).filter("objectToArray",function(){return function(e){var t=[];for(var a in e){var o=e[a];o.id=a,t.push(o)}return t}}).filter("reverse",function(){return function(e){if(e)return e.slice().reverse()}}).filter("matchesAll",function(){return function(e,t,a){return t&&t.length?(a=a||"categories",e.filter(function(e){var o=[];return e[a].forEach(function(e){o.push(e.name)}),t.every(function(e){return o.indexOf(e)!==-1})})):e}}).directive("starRating",function(){return{restrict:"A",template:'<ul class="rating"><li ng-repeat="star in stars" ng-class="star"><i class="fa fa-star" ng-if="star.filled==true"></i><i class="fa fa-star-o" ng-if="star.filled==false"></i></li></ul>',scope:{ratingValue:"=",max:"="},link:function(e,t,a){e.stars=[];for(var o=0;o<e.max;o++)e.stars.push({filled:o<e.ratingValue})}}}).directive("loading",function(){return{restrict:"E",replace:!0,template:'<div class="loading"><img src="images/ajax-loader.gif" class="imgload" /></div>',link:function(e,t,a){e.$watch("loading",function(e){e?$(t).show():$(t).hide()})}}}).directive("onlyDigits",function(){return{require:"ngModel",restrict:"A",link:function(e,t,a,o){function r(e){if(e){var t=e.replace(/[^0-9]/g,"");return t!==e&&(o.$setViewValue(t),o.$render()),parseInt(t,10)}}o.$parsers.push(r)}}}).directive("readMore",function(){return{restrict:"A",transclude:!0,replace:!0,template:"<p></p>",scope:{moreText:"@",lessText:"@",words:"@",ellipsis:"@","char":"@",limit:"@",content:"@",text:"@"},link:function(e,t,a,o,r){function n(e){var e=e,o=e,r=/\s+/gi,n=e.length,d=e.trim().replace(r," ").split(" ").length,p="char",u=n,m=[],f=e,g="";angular.isUndefined(a.words)||(p="words",u=d),"words"===p?(m=e.split(/\s+/),m.length>c&&(e=m.slice(0,c).join(" ")+l,g=m.slice(c,u).join(" "),f=e+i+'<span class="more-text">'+g+s+"</span>")):u>c&&(e=o.slice(0,c)+l,g=o.slice(c,u),f=e+i+'<span class="more-text">'+g+s+"</span>"),t.append(f),t.find(".read-more").on("click",function(){$(this).hide(),t.find(".more-text").addClass("show").slideDown()}),t.find(".read-less").on("click",function(){t.find(".read-more").show(),t.find(".more-text").hide().removeClass("show")})}var i=angular.isUndefined(e.moreText)?' <a class="read-more">Read More...</a>':' <a class="read-more">'+e.moreText+"</a>",s=angular.isUndefined(e.lessText)?' <a class="read-less">Less ^</a>':' <a class="read-less">'+e.lessText+"</a>",l=angular.isUndefined(e.ellipsis)?"":e.ellipsis,c=angular.isUndefined(e.limit)?150:e.limit;a.$observe("content",function(t){n(e.text)}),r(e.$parent,function(e,t){n(e.text().trim())})}}}).controller("MainpageCtrl",t("./controllers/MainpageCtrl")).controller("AppCtrl",t("./controllers/appCtrl")).controller("ApplytojobCtrl",t("./controllers/ApplytojobCtrl")).controller("AssignMilestoneCtrl",t("./controllers/assignMilestone")).controller("ChatCtrl",t("./controllers/chatCtrl")).controller("ContractdetailsEmployeeViewCtrl",t("./controllers/ContractdetailsEmployeeViewCtrl")).controller("ContractdetailsTalentViewCtrl",t("./controllers/ContractdetailsTalentViewCtrl")).controller("contractFeedbackCtrl",t("./controllers/contractFeedbackCtrl")).controller("CardDetailsCtrl",t("./controllers/carddetails")).controller("EditProfileCtrl",t("./controllers/EditProfileCtrl")).controller("EditProjectCtrl",t("./controllers/EditProjectCtrl")).controller("endcontraCtrl",t("./controllers/endcontraCtrl")).controller("FaqCtrl",t("./controllers/faqCtrl")).controller("FeedbackCtrl",t("./controllers/FeedbackCtrl")).controller("FeedbackDetailsCtrl",t("./controllers/FeedbackDetailsCtrl")).controller("ForgotpasswordCtrl",t("./controllers/ForgotpasswordCtrl")).controller("GroupCtrl",t("./controllers/GroupCtrl")).controller("GroupDetailstCtrl",t("./controllers/GroupDetailstCtrl")).controller("GroupDiscussionCtrl",t("./controllers/groupDiscussionCtrl")).controller("groupInviteCtrl",t("./controllers/groupInviteCtrl")).controller("InboxCtrl",t("./controllers/InboxCtrl")).controller("AddProjectCtrl",t("./controllers/insertProjectCtrl")).controller("InviteForJob",t("./controllers/inviteforjob")).controller("InvoicesCtrl",t("./controllers/invoices")).controller("JobContractListCtrl",t("./controllers/JobContractListCtrl")).controller("JobDetailsCtrl",t("./controllers/jobdetailsctrl")).controller("JobDetailsEmployerCtrl",t("./controllers/jobdetailsEmployerctrl")).controller("JobpostCtrl",t("./controllers/jobpost")).controller("LoginCtrl",t("./controllers/loginCtrl")).controller("MilestonesPaymentCtrl",t("./controllers/MilestonesPaymentCtrl")).controller("MyFinanceCtrl",t("./controllers/MyFinanceCtrl")).controller("MyMoneyCtrl",t("./controllers/MyMoneyCtrl")).controller("PaymentMethodsCtrl",t("./controllers/paymentmethod")).controller("paypalpaymentCtrl",t("./controllers/paypalpaymentCtrl")).controller("paypalpaymentfailCtrl",t("./controllers/paypalpaymentfailCtrl")).controller("ProfileCtrl",t("./controllers/ProfileCtrl")).controller("ProfileViewCtrl",t("./controllers/ProfileViewCtrl")).controller("ProjectDtailsCtrl",t("./controllers/ProjectDtailsCtrl")).controller("ProposaldetailsCtrl",t("./controllers/proposaldetailsCtrl")).controller("ProposaldetailsTalentViewCtrl",t("./controllers/ProposaldetailsTalentViewCtrl")).controller("ProposallistCtrl",t("./controllers/ProposallistCtrl")).controller("SearchCtrl",t("./controllers/SearchCtrl")).controller("SearchResultCtrl",t("./controllers/SearchResultCtrl")).controller("SearchResultDetailsCtrl",t("./controllers/SearchResultDetailsCtrl")).controller("SettingCtrl",t("./controllers/SettingCtrl")).controller("SignupCtrl",t("./controllers/SignupCtrl")).controller("SortByCtrl",t("./controllers/SortByCtrl")).controller("StatementCtrl",t("./controllers/statement")).controller("SubmitmilestoneApproveCtrl",t("./controllers/SubmitmilestoneApproveCtrl")).controller("SubmitmilestoneCtrl",t("./controllers/SubmitmilestoneCtrl")).controller("TransactionsCtrl",t("./controllers/transactions")).controller("WithdrawMoneyCtrl",t("./controllers/WithdrawMoneyCtrl")).controller("WorkOrganizerCtrl",t("./controllers/WorkOrganizerCtrl")).controller("justLoadCtrl",t("./controllers/justLoadCtrl")).factory("Auth",function(e,t){var a=firebase.database().ref("/users");return e(a)})},{"./controllers/ApplytojobCtrl":2,"./controllers/ContractdetailsEmployeeViewCtrl":3,"./controllers/ContractdetailsTalentViewCtrl":4,"./controllers/EditProfileCtrl":5,"./controllers/EditProjectCtrl":6,"./controllers/FeedbackCtrl":7,"./controllers/FeedbackDetailsCtrl":8,"./controllers/ForgotpasswordCtrl":9,"./controllers/GroupCtrl":10,"./controllers/GroupDetailstCtrl":11,"./controllers/InboxCtrl":12,"./controllers/JobContractListCtrl":13,"./controllers/MainpageCtrl":14,"./controllers/MilestonesPaymentCtrl":15,"./controllers/MyFinanceCtrl":16,"./controllers/MyMoneyCtrl":17,"./controllers/ProfileCtrl":18,"./controllers/ProfileViewCtrl":19,"./controllers/ProjectDtailsCtrl":20,"./controllers/ProposaldetailsTalentViewCtrl":21,"./controllers/ProposallistCtrl":22,"./controllers/SearchCtrl":23,"./controllers/SearchResultCtrl":24,"./controllers/SearchResultDetailsCtrl":25,"./controllers/SettingCtrl":26,"./controllers/SignupCtrl":27,"./controllers/SortByCtrl":28,"./controllers/SubmitmilestoneApproveCtrl":29,"./controllers/SubmitmilestoneCtrl":30,"./controllers/WithdrawMoneyCtrl":31,"./controllers/WorkOrganizerCtrl":32,"./controllers/appCtrl":33,"./controllers/assignMilestone":34,"./controllers/carddetails":35,"./controllers/chatCtrl":36,"./controllers/contractFeedbackCtrl":37,"./controllers/endcontraCtrl":38,"./controllers/faqCtrl":39,"./controllers/groupDiscussionCtrl":40,"./controllers/groupInviteCtrl":41,"./controllers/insertProjectCtrl":42,"./controllers/inviteforjob":43,"./controllers/invoices":44,"./controllers/jobdetailsEmployerctrl":45,"./controllers/jobdetailsctrl":46,"./controllers/jobpost":47,"./controllers/justLoadCtrl":48,"./controllers/loginCtrl":49,"./controllers/paymentmethod":50,"./controllers/paypalpaymentCtrl":51,"./controllers/paypalpaymentfailCtrl":52,"./controllers/proposaldetailsCtrl":53,"./controllers/statement":54,"./controllers/transactions":55}],2:[function(e,t,a){"use strict";t.exports=["$scope","$stateParams","$rootScope","$location","Analytics","$filter","$ionicLoading","$firebaseObject","$ionicPopup","$timeout",function(e,t,a,o,r,n,i,s,l,c){if(a.checkLogin(),e.milestones_percentage=0,e.jid=t.id,t.id){i.show({template:"Loading..."});var d=firebase.database().ref("/jobs/"+t.id);if(d.once("value",function(t){e.job=t.val()}),a.user_projects)i.hide();else if(window.localStorage.getItem("info")){var p=firebase.database().ref("/projects");p.orderByChild("userid").equalTo(JSON.parse(window.localStorage.getItem("info")).uid).on("value",function(e){a.user_projects=[];for(var t in e.val()){var o=e.val()[t];o.id=t,a.user_projects.push(o)}i.hide()},function(e){console.log("The read failed: "+e.code),i.hide()})}}e.project=[],e.showProject=function(t){if(t){var a=firebase.database().ref("/projects/"+t);e.project=s(a)}},e.jobproposal=[],e.newMilestoneData=[],e.milestones=[],e.addNewMilestone=function(){$(".newMilestone").css("display","block");var e=document.getElementById("scroll-content-applyjob");e.scrollTop=e.scrollHeight},e.cancelMilestone=function(){$(".newMilestone").css("display","none")},e.$watch("newMilestoneData.budget",function(t,a){if(a&&t){var o=t;parseFloat(e.milestones_percentage)+parseFloat(o)<=e.jobproposal.budget?e.newMilestoneData.budget=t:e.newMilestoneData.budget=a}}),e.createMilestone=function(){e.newMilestoneData.title&&e.newMilestoneData.details&&e.newMilestoneData.budget&&e.newMilestoneData.deliveryTime&&(e.newMilestoneData.progress=100*e.newMilestoneData.budget/e.jobproposal.budget,e.milestones_percentage=parseFloat(e.milestones_percentage)+e.newMilestoneData.budget,e.milestones.push(e.newMilestoneData),$(".newMilestone").css("display","none"),e.newMilestoneData=[],e.newMilestoneData.budget="")},e.deleteMilestone=function(t){e.milestones_percentage=e.milestones_percentage-e.milestones[t].budget,e.milestones.splice(t,1)},e.reCalculateMilestone=function(t){e.milestones_percentage=0,e.milestones.forEach(function(a,o){e.milestones[o].progress=100*e.milestones[o].budget/t,e.milestones_percentage=parseFloat(e.milestones_percentage)+parseFloat(e.milestones[o].budget)})},e.submitProposal=function(){e.milestones_percentage=0,e.milestones.forEach(function(t,a){e.milestones_percentage=parseFloat(e.milestones_percentage)+parseFloat(e.milestones[a].budget)}),i.show({template:"Applying..."}),c(function(){if(t.id)if(e.jobproposal.description)if(e.milestones.length>0)if(e.milestones_percentage==e.jobproposal.budget){if(e.valid=!0,e.job.screeningQuestions&&e.jobproposal.screeningQuestionsAnswer)for(var r in e.job.screeningQuestions)e.jobproposal.screeningQuestionsAnswer[r]||(e.jobproposal.screeningQuestionsAnswerError=[],e.jobproposal.screeningQuestionsAnswerError[r]="Answer this question to apply",e.valid=!1,i.hide());else if(e.job.screeningQuestions&&!e.jobproposal.screeningQuestionsAnswer){i.hide(),e.valid=!1;l.alert({title:"Required",template:"Please fill all the answers of questions."})}setTimeout(function(){if(1==e.valid){e.jobproposal.publishAt=new Date;var r=e.jobproposal;if(r.publishAt=e.job.publishAt.toString(),r.employer_id=e.job.userid,r.talent_id=JSON.parse(window.localStorage.getItem("info")).uid,r.jobid=t.id,r.currency=e.job.currency,r.status="open",r.milestones=[],e.milestones.length>0)e.milestones.forEach(function(n,s){if(r.milestones.push({progress:n.progress,deliveryTime:n.deliveryTime,title:n.title,details:n.details,budget:n.budget}),e.milestones.length==s+1){var c=firebase.database().ref("/jobproposals"),d=c.push(r);e.milestones=[],e.jobproposal=[],i.hide();var p=new Date,u=JSON.parse(angular.toJson({message:"New proposal received",date:p,type:"talent",status:"unread",hide:"true",jobid:t.id})),m=firebase.database().ref("/jobproposals/"+d.key+"/message");m.push(u);var f=JSON.parse(angular.toJson({date:p,message:"New proposal received from "+a.userdata.name+' for "'+e.job.title+'" job',type:"contractmessage",sender:a.loggedUserId,senderName:a.userdata.name,status:"unread",jobid:t.id,newProposal:!0})),g=firebase.database().ref("/notification/"+e.job.userid);g.push(f);var h=l.alert({title:"Sent",template:"Job proposal submitted successfully."});h.then(function(e){o.path("/app/mainpage")})}});else{var n=firebase.database().ref("/jobproposals");n.push(r);e.milestones=[],e.jobproposal=[],i.hide(),alert("Job proposal submitted successfully."),o.path("/app/mainpage")}setTimeout(function(){var e=firebase.database().ref("/jobs/"+t.id+"/proposals");e.push({userid:JSON.parse(window.localStorage.getItem("info")).uid})},100)}else i.hide()},2e3)}else{l.alert({title:"Milestones",template:"Job budget is "+e.jobproposal.budget+". Your milestone budget amount total is "+e.milestones_percentage+". Please check your milestone budget and try again."});i.hide()}else alert("Please create milestone."),i.hide();else alert("Write your proposal to apply for job."),i.hide()},1e3)},r.trackPage("Send_Job_Proposal")}]},{}],3:[function(e,t,a){"use strict";t.exports=["$scope","$location","$ionicModal","Analytics","$rootScope","Firebase","$ionicPopup","$stateParams","$ionicLoading","$ionicActionSheet","$http",function(e,t,a,o,r,n,i,s,l,c,d){if(e.contractId=s.id,r.checkLogin(),1==r.reloadContractPage&&location.reload(),s.id){e.contractId=s.id,l.show({template:"Loading..."});var p=firebase.database().ref("/contracts/"+s.id);p.on("value",function(t){if(t.val()){e.milestoneIsSubmitted=!1,e.milestoneIsWorking=!1,e.milestoneIsRemaining=!1,e.contract=t.val(),e.contract.milestones.forEach(function(t,a){t.title&&t.title&&(t.status||(e.milestoneIsRemaining=!0),"submitted"==t.status&&(e.milestoneIsSubmitted=!0),"working"==t.status&&(e.milestoneIsWorking=!0))}),e.$$phase||e.$apply();var a=firebase.database().ref("/jobs/"+e.contract.jobid);a.on("value",function(t){e.job=t.val();var a=firebase.database().ref("/users/"+e.contract.talent_id);a.on("value",function(t){l.hide(),e.talent=t.val(),setTimeout(function(){if(document.getElementById("job-details-message-list"+e.contractId)){var t=document.getElementById("job-details-message-list"+e.contractId);t.scrollTop=t.scrollHeight}},1e3)})})}});var p=firebase.database().ref("/contracts/"+s.id);p.once("value",function(t){console.log(t.val()),t.val()&&(e.milestoneIsSubmitted=!1,e.milestoneIsWorking=!1,e.milestoneIsRemaining=!1,e.contract=t.val(),e.contract.milestones.forEach(function(t,a){t.title&&t.title&&(t.status||(e.milestoneIsRemaining=!0),"submitted"==t.status&&(e.milestoneIsSubmitted=!0),"working"==t.status&&(e.milestoneIsWorking=!0)),a==e.contract.milestones.length-1&&setTimeout(function(){0==e.milestoneIsRemaining&&0==e.milestoneIsWorking&&0==e.milestoneIsSubmitted&&"end"!=e.contract.status&&(e.contract.feedbackbyEmployer&&e.contract.feedbackbyTalent?firebase.database().ref("/contracts/"+s.id+"/status").set("end"):firebase.database().ref("/contracts/"+s.id+"/status").set("completed"));
},1e3)}),e.$$phase||e.$apply())})}e.assingmilestone=function(){null!=e.contract&&1==e.milestoneIsRemaining&&"false"==e.contract.assigned_milestone&&s.id&&t.path("/app/assignmilestone/"+s.id)},e.proposalchat=[],e.sendMessage=function(){if(e.proposalchat.message){var t=new Date,a=JSON.parse(angular.toJson({message:e.proposalchat.message,date:t,type:"employer",status:"unread"})),o=firebase.database().ref("/contracts/"+s.id+"/message");o.push(a);var n=JSON.parse(angular.toJson({date:t,message:r.userdata.name+'(Employer) sent you a message on proposal of "'+e.job.title+'"',type:"contractmessage",sender:r.loggedUserId,senderName:r.userdata.name,status:"unread"})),i=firebase.database().ref("/notification/"+e.contract.talent_id);if(i.push(n),e.proposalchat.message="",document.getElementById("job-details-message-list"+e.contractId)){var l=document.getElementById("job-details-message-list"+e.contractId);l.scrollTop=l.scrollHeight}}},e.confirmEndcontract=function(){var t=i.confirm({title:"End Contract",template:"Are you sure you want to end the contract?"});t.then(function(t){t?(l.show({template:"Processing..."}),r.getObjectLength(e.contract.allSubmittedMilestonesData)>0?e.endContractProcess(!0):e.endContractProcess(!1)):console.log("You are not sure")})},e.endContractProcess=function(e){if(1==e){var a=firebase.database().ref("/transactions/").orderByChild("contractid").equalTo(s.id);a.once("value",function(e){e.val()?(l.show({template:"Processing..."}),d({method:"POST",url:window.location.origin+"/endcontract.php",data:{token:r.loggedUserId,contract:s.id,transactions:e.val(),endby:"employer"},headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(e){if(l.show({template:"Processing..."}),"success"==e.data){var t=new Date,a=firebase.database().ref("/contracts/"+s.id);a.update({endContractBeforeAppoved:"true",endby:"employer",contract_hold_on:t});var o=JSON.parse(angular.toJson({message:"Contracted end by employer, talent can apply dispute *",date:t,type:"employer",system_message:"true",status:"unread"})),r=firebase.database().ref("/contracts/"+s.id+"/message");r.push(o),l.hide()}else l.hide()},function(e){l.hide()})):(l.hide(),alert("Something went wrong. Please try again later or contact support team. Error : transactionsNotFound"))})}else{l.show({template:"Loading..."});var o=firebase.database().ref("/contracts/"+s.id);o.once("value",function(e){if(e.val()){var a=firebase.database().ref("/transactions/").orderByChild("contractid").equalTo(s.id);a.once("value",function(a){d({method:"POST",url:window.location.origin+"/transaction.php",data:{token:r.loggedUserId,type:"endcontract",domain:window.location.origin,contract:s.id,job:e.val().jobid,transactions:a.val()},headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(a){if(l.hide(),"success"==a.data){var o=new Date,n=firebase.database().ref("/contracts/"+s.id);n.update({status:"completed",contract_end_on:o});firebase.database().ref("/jobs/"+e.val().jobid+"/status").set("completed");n.update({endby:"employer"});var i=firebase.database().ref("/jobs/"+e.val().jobid);i.once("value",function(t){var a=firebase.database().ref("/users/"+JSON.parse(window.localStorage.getItem("info")).uid+"/timeline");a.push({publishAt:o.toString(),title:"Job Funded.",subTitle:t.val().title,description:t.val().description,type:"jobs",reference:e.val().jobid,statusline:""})});var c=JSON.parse(angular.toJson({message:"Contract end by employer. Please give a feedback. *",date:o,type:"employer",system_message:"true",status:"unread"})),d=firebase.database().ref("/contracts/"+s.id+"/message");d.push(c),r.givefeedbackby="employer",t.path("/app/contractfeedback/"+s.id)}},function(e){console.log("error"),l.hide()})})}})}},e.givefeedback=function(){r.givefeedbackby="employer",t.path("/app/contractfeedback/"+s.id)},e.messageMoreOptions=function(e,t,a){c.show({buttons:[{text:"Translate"}],cancelText:"Cancel",cancel:function(){},buttonClicked:function(t){if(0==t){var o=$("#"+e+a).html();$("#"+e+a).html("<img src='img/smallloading.gif' style='height:16px;width:28px'/>");var r=window.location.origin+"/translation.php";d({method:"POST",url:r,data:{text:o},headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(t){$("#"+e+a).html(t.data.text)},function(e){console.log(e)})}return!0}})},e.ViewApproveMilestoneWork=function(){for(var a in e.contract.milestones)"submitted"==e.contract.milestones[a].status&&t.path("/app/submitmilestone/approve/"+e.contractId+"/"+a)},e.MoreOptions=function(e,t){if(e){c.show({buttons:[{text:"Translate"}],cancelText:"Cancel",cancel:function(){},buttonClicked:function(a){if(0==a){var o=e;$("#"+t).html("<img src='img/smallloading.gif' style='height:16px;width:28px'/>");var r=window.location.origin+"/translation.php";d({method:"POST",url:r,data:{text:o},headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(e){$("#"+t).html(e.data.text)},function(e){console.log(e)})}return!0}})}},o.trackPage("Contract_Employer_View")}]},{}],4:[function(e,t,a){"use strict";t.exports=["$scope","$ionicModal","$rootScope","Analytics","$location","Firebase","$ionicPopup","$stateParams","$ionicLoading","$ionicActionSheet","$http",function(e,t,a,o,r,n,i,s,l,c,d){if(e.contractId=s.id,a.checkLogin(),s.id){e.contractId=s.id,l.show({template:"Loading..."});var p=firebase.database().ref("/contracts/"+s.id);p.on("value",function(t){e.milestoneIsSubmitted=!1,e.milestoneIsWorking=!1,e.milestoneIsRemaining=!1,e.contract=t.val(),e.contract.milestones.forEach(function(t,a){t.title&&(t.status||(e.milestoneIsRemaining=!0),"submitted"==t.status&&(e.milestoneIsSubmitted=!0),"working"==t.status&&(e.milestoneIsWorking=!0))}),e.$$phase||e.$apply();var a=firebase.database().ref("/jobs/"+e.contract.jobid);a.on("value",function(t){e.job=t.val();var a=firebase.database().ref("/users/"+e.job.userid);a.on("value",function(t){l.hide(),e.employer=t.val(),setTimeout(function(){var t=document.getElementById("job-details-message-list"+e.contractId);t.scrollTop=t.scrollHeight},1e3)})})});var p=firebase.database().ref("/contracts/"+s.id);p.once("value",function(t){e.milestoneIsSubmitted=!1,e.milestoneIsWorking=!1,e.milestoneIsRemaining=!1,e.contract=t.val(),e.contract.milestones.forEach(function(t,a){t.title&&(t.status||(e.milestoneIsRemaining=!0),"submitted"==t.status&&(e.milestoneIsSubmitted=!0),"working"==t.status&&(e.milestoneIsWorking=!0)),a==e.contract.milestones.length-1&&setTimeout(function(){0==e.milestoneIsRemaining&&0==e.milestoneIsWorking&&0==e.milestoneIsSubmitted&&"end"!=e.contract.status&&(console.log("2="+e.contract.status),e.contract.feedbackbyEmployer&&e.contract.feedbackbyTalent?firebase.database().ref("/contracts/"+s.id+"/status").set("end"):firebase.database().ref("/contracts/"+s.id+"/status").set("completed"))},1e3)}),e.$$phase||e.$apply()})}e.proposalchat=[],e.sendMessage=function(){if(e.proposalchat.message){var t=new Date,o=JSON.parse(angular.toJson({message:e.proposalchat.message,date:t,type:"talent",status:"unread"})),r=firebase.database().ref("/contracts/"+s.id+"/message");r.push(o);var n=JSON.parse(angular.toJson({date:t,message:a.userdata.name+'(Talent) sent you a message on proposal of "'+e.job.title+'"',type:"contractmessage",sender:a.loggedUserId,senderName:a.userdata.name,status:"unread"})),i=firebase.database().ref("/notification/"+e.contract.employer_id);i.push(n),e.proposalchat.message="";var l=document.getElementById("job-details-message-list"+e.contractId);l.scrollTop=l.scrollHeight}},e.confirmEndcontract=function(){var t=i.confirm({title:"End Contract",template:"Are you sure you want to end the contract?"});t.then(function(t){if(t){l.show({template:"Processing..."});var o=firebase.database().ref("/contracts/"+s.id);o.once("value",function(t){if(t.val()){var o=firebase.database().ref("/transactions/").orderByChild("contractid").equalTo(s.id);o.once("value",function(o){d({method:"POST",url:window.location.origin+"/transaction.php",data:{token:a.loggedUserId,type:"endcontract",domain:window.location.origin,contract:s.id,job:t.val().jobid,transactions:o.val()},headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(o){if(l.hide(),"success"==o.data){var n=new Date,i=firebase.database().ref("/contracts/"+s.id);if("completed"==t.val().status)a.givefeedbackby="talent",r.path("/app/contractfeedback/"+s.id);else{var c=JSON.parse(angular.toJson({message:"contracted ended by talent, milestone refund. *",date:n,type:"talent",status:"unread",system_message:"true"})),d=firebase.database().ref("/contracts/"+e.contractId+"/message");d.push(c);var i=firebase.database().ref("/contracts/"+s.id);i.update({status:"completed",contract_completed_on:n});firebase.database().ref("/jobs/"+e.contract.jobid+"/status").set("completed");i.update({endby:"talent"})}var p=firebase.database().ref("/jobs/"+t.val().jobid);p.once("value",function(e){var o=firebase.database().ref("/users/"+JSON.parse(window.localStorage.getItem("info")).uid+"/timeline");o.push({publishAt:n.toString(),title:"Job Completed.",subTitle:e.val().title,description:e.val().description,type:"jobs",reference:t.val().jobid,statusline:""});l.hide(),a.givefeedbackby="talent",r.path("/app/contractfeedback/"+s.id)})}},function(e){console.log("error"),l.hide()})})}})}else console.log("You are not sure")})},e.givefeedback=function(){a.givefeedbackby="talent",r.path("/app/contractfeedback/"+s.id)},e.messageMoreOptions=function(e,t,a){c.show({buttons:[{text:"Translate"}],cancelText:"Cancel",cancel:function(){},buttonClicked:function(t){if(0==t){var o=$("#"+e+a).html();$("#"+e+a).html("<img src='img/smallloading.gif' style='height:16px;width:28px'/>");var r=window.location.origin+"/translation.php";d({method:"POST",url:r,data:{text:o},headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(t){$("#"+e+a).html(t.data.text)},function(e){console.log(e)})}return!0}})},e.submitMilestoneWork=function(){for(var t in e.contract.milestones)"working"==e.contract.milestones[t].status&&r.path("/app/submitmilestone/"+e.contractId+"/"+t)},e.MoreOptions=function(e,t){if(e){c.show({buttons:[{text:"Translate"}],cancelText:"Cancel",cancel:function(){},buttonClicked:function(a){if(0==a){var o=e;$("#"+t).html("<img src='img/smallloading.gif' style='height:16px;width:28px'/>");var r=window.location.origin+"/translation.php";d({method:"POST",url:r,data:{text:o},headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(e){$("#"+t).html(e.data.text)},function(e){console.log(e)})}return!0}})}},e.dispute=function(){var t=i.confirm({title:"Confirm",template:"Are you sure you want to dispute?"});t.then(function(t){if(t){var a=new Date;firebase.database().ref("/endcontractRequests").orderByChild("contract").equalTo(s.id).once("value",function(t){if(t.val()){for(var o in t.val())if(o){firebase.database().ref("/endcontractRequests").child(o).update({dispute:"true"})}var r=firebase.database().ref("/contracts/"+s.id);r.update({dispute:"true"});var n=firebase.database().ref("/jobs/"+e.contract.jobid);n.update({dispute:"true"});var i=JSON.parse(angular.toJson({date:a,contract:e.contract,status:"open",contractid:s.id,jobid:e.contract.jobid})),l=firebase.database().ref("/disputes");l.push(i)}})}else console.log("You are not sure")})},o.trackPage("Contract_Talent_View")}]},{}],5:[function(e,t,a){"use strict";t.exports=["$scope","Upload","$rootScope","$state","$ionicPopup","$firebaseObject","$window","Analytics",function(e,t,a,o,r,n,i,s){a.mapdetails=null,a.checkLogin(),e.data=a.userdata;var l=firebase.storage().ref();e.uploadBtnText="",e.onFileSelect=function(t){if(t[0])if(t[0].size<=2228571){var o=l.child("upload/profile/"+JSON.parse(window.localStorage.getItem("info")).uid).put(t[0]);o.on("state_changed",function(t){var a=t.bytesTransferred/t.totalBytes*100;switch(a=parseInt(a),e.uploadBtnText="Upload is "+a+"% done",e.$$phase||e.$apply(),t.state){case firebase.storage.TaskState.PAUSED:console.log("Upload is paused");break;case firebase.storage.TaskState.RUNNING:console.log("Upload is running")}},function(e){},function(){var t=o.snapshot.downloadURL;firebase.database().ref("/users/"+JSON.parse(window.localStorage.getItem("info")).uid+"/").update({picture:t});a.userdata.picture=t,e.uploadBtnText="",e.$$phase||e.$apply()})}else alert("File size must be less than 2MB.")},e.onAboutFileSelect=function(t,a){if(t[0]&&"image"==a&&(t[0].objecttype="image",e.aboutPhoto?e.aboutPhoto.push(t[0]):(e.aboutPhoto=[],e.aboutPhoto.push(t[0]))),"text"==a){var o=[];o.text="",o.objecttype="text",e.aboutPhoto?e.aboutPhoto.push(o):(e.aboutPhoto=[],e.aboutPhoto.push(o))}},e.deleteAbout=function(t){e.data&&e.data.aboutPhoto&&e.data.aboutPhoto[t]&&delete e.data.aboutPhoto[t]},e["delete"]=function(t){e.filesdata_temp=[],e.aboutPhoto.forEach(function(a,o){o!=t&&e.filesdata_temp.push(a)}),setTimeout(function(){delete e.aboutPhoto,e.aboutPhoto=[],e.aboutPhoto=e.filesdata_temp,e.$$phase||e.$apply()},100)},e.fillText=function(t,a){e.aboutPhoto[a].text=t},e.searchSkills=function(e){},e.save=function(t){if(t)if(t.profession&&0!=t.profession.length)if(t.skills&&0!=t.skills.length)if(t.location)if(t.title){o.go("app.profile"),e.locationVarify&&(t.locationVerified=!0);var a=(new Date).getTimezoneOffset();t.timeoffset=a;var n=JSON.parse(angular.toJson(t));delete n.picture,console.log(n);firebase.database().ref();if(firebase.database().ref("/users/"+JSON.parse(window.localStorage.getItem("info")).uid+"/").update(n),e.aboutPhoto){e.lastImageAboutPhoto=-1,e.aboutPhoto.forEach(function(t,a){"text"!=t.objecttype&&(e.lastImageAboutPhoto=parseInt(e.lastImageAboutPhoto)+1)}),e.aboutPhoto.forEach(function(t,a){if("text"!=t.objecttype){var o=l.child("upload/profile/about/"+JSON.parse(window.localStorage.getItem("info")).uid+"/"+t.name).put(t);o.on("state_changed",function(e){t=parseInt(t);var t=e.bytesTransferred/e.totalBytes*100;switch(e.state){case firebase.storage.TaskState.PAUSED:console.log("Upload is paused");break;case firebase.storage.TaskState.RUNNING:console.log("Upload is running")}},function(e){},function(){var t=o.snapshot.downloadURL;if(e.aboutPhoto[a].downloadUrl=t,a==e.lastImageAboutPhoto){var r=firebase.database().ref(),n=[];for(var i in e.oldAbout)n.push({type:e.oldAbout[i].type,data:e.oldAbout[i].data});e.aboutPhoto.forEach(function(t,a){"text"==t.objecttype?n.push({type:t.objecttype,data:t.text}):n.push({type:t.objecttype,data:t.downloadUrl}),e.aboutPhoto.length==a+1&&r.child("users").child(JSON.parse(window.localStorage.getItem("info")).uid).update({aboutPhoto:n})})}})}})}var i=firebase.database().ref("/search/users"),s=[];t.profession&&t.profession.forEach(function(e){s.push(e.name)});var c=[];t.categories&&t.categories.forEach(function(e){c.push(e.id)});var d=[];t.tags&&t.tags.forEach(function(e){d.push(e.text)}),i.orderByChild("userid").equalTo(JSON.parse(window.localStorage.getItem("info")).uid).once("value",function(e){for(var a in e.val())a&&i.child(a).update({title:t.name.toLowerCase(),category:s.join(","),location:t.location,subtitle:t.title,tags:d,categoryid:c.join(",")})})}else r.alert({title:"Required!",content:"Please add your title."}).then(function(e){console.log("Test Alert Box")});else r.alert({title:"Required!",content:"Please add your location."}).then(function(e){console.log("Test Alert Box")});else r.alert({title:"Required!",content:"Please pick atleast one skill."}).then(function(e){console.log("Test Alert Box")});else r.alert({title:"Required!",content:"Please pick atleast one profession."}).then(function(e){console.log("Test Alert Box")})},e.validateLocation=function(){e.locationVarify=!1},e.removePorfilePic=function(){var e=i.confirm("Really want to delete it?");if(e){var t=firebase.database().ref("/users/"+JSON.parse(window.localStorage.getItem("info")).uid+"/picture/");t.remove(),a.userdata.picture=""}},e.dragControlListeners={accept:function(e,t){return boolean},itemMoved:function(e){},orderChanged:function(e){},containment:"#board",clone:!0,allowDuplicates:!1},e.motherCatSelect=function(t){e.CategoryID=t.id},s.trackPage("Edit_Profile")}]},{}],6:[function(e,t,a){"use strict";t.exports=["$scope","$stateParams","$rootScope","Firebase","Upload","$ionicLoading","Analytics",function(e,t,a,o,r,n,i){e.projectid=t.id,a.checkLogin(),e.onFileSelect=function(t){t[0]&&(e.editfilesdata?e.editfilesdata.push(t[0]):(e.editfilesdata=[],e.editfilesdata.push(t[0])))},e.save=function(t){n.show({template:"Updating..."}),t.updatedAt=new Date;var o={categories:t.categories,tags:t.tags,description:t.description,projectTitle:t.projectTitle,updatedAt:t.updatedAt},i=JSON.parse(angular.toJson(o)),s=firebase.database().ref("/projects/"+e.projectid);s.update(i),e.editfilesdata&&(n.show({template:"Uploading Images..."}),r.upload({url:a.serverURL+"/uploadfile.php?type=addproject",data:{file:e.editfilesdata,id:JSON.parse(window.localStorage.getItem("info")).uid,project_id:e.projectid}}).then(function(o){var r=[];t.images&&(r=t.images),e.editfilesdata.forEach(function(t,o){if(r.push(a.serverURL+"/upload/project/"+JSON.parse(window.localStorage.getItem("info")).uid+"/"+e.projectid+"/"+t.name),o==e.editfilesdata.length-1){var n=firebase.database().ref("/projects/"+e.projectid+"/images");n.set(r);e.editfilesdata=[]}}),n.hide()},function(e){n.hide()},function(e){var t=parseInt(100*e.loaded/e.total);n.show({template:t+"%"})}))},e.removePhoto=function(t){if(t>=0){var a=firebase.database().ref("/projects/"+e.projectid+"/images/"+t);a.remove()}},i.trackPage("Edit_Project")}]},{}],7:[function(e,t,a){"use strict";t.exports=["$scope","$ionicModal","$rootScope","Firebase","$ionicPopup","Analytics",function(e,t,a,o,r,n){a.checkLogin(),t.fromTemplateUrl("create_ticket.html",{scope:e,animation:"slide-in-up"}).then(function(t){e.modal=t}),e.openNewTicket=function(){e.modal.show(),e.data.type="Public"};var i=firebase.database().ref("/feedbackTicketsQuestionPublic");i.on("value",function(t){e.usertickets=[];for(var a in t.val()){var o=t.val()[a];o.id=a,e.usertickets.push(o)}e.$$phase||e.$apply()});var i=firebase.database().ref("/feedbackTicketsQuestionPrivate").orderByChild("userid").equalTo(JSON.parse(window.localStorage.getItem("info")).uid);i.on("value",function(t){e.userPrivateTickets=[];for(var a in t.val()){var o=t.val()[a];o.id=a,e.userPrivateTickets.push(o)}e.$$phase||e.$apply()}),e.data=[],e.createTicket=function(){if(e.data.ticketIssue){if("Private"==e.data.type)var t=firebase.database().ref("/feedbackTicketsQuestionPrivate");else var t=firebase.database().ref("/feedbackTicketsQuestionPublic");var a={};a.publishAt=new Date,a.issue=e.data.ticketIssue,a.status="open",a.feedback=e.data.feedback,a.userid=JSON.parse(window.localStorage.getItem("info")).uid;var o=JSON.parse(angular.toJson(a));t.push(o),r.alert({title:"Worklidate",content:"Thank you for getting in touch!.\n We try to respond as soon as possible, so one of our Customer Service colleagues will get back to you within a few hours. \n Have a great day ahead!."}).then(function(t){e.data=[]}),e.modal.hide()}},n.trackPage("Feedback")}]},{}],8:[function(e,t,a){"use strict";t.exports=["$scope","$ionicModal","$rootScope","Firebase","$ionicPopup","$stateParams","$location","$window","Analytics",function(e,t,a,o,r,n,i,s,l){if(a.checkLogin(),e.getComment=function(){var t=firebase.database().ref("/feedbackTicketsComments/").orderByChild("ticketId").equalTo(n.id);t.on("value",function(t){e.comments=t.val(),e.$$phase||e.$apply()})},n.id&&n.type){if("public"==n.type){var c=firebase.database().ref("/feedbackTicketsQuestionPublic/"+n.id);c.on("value",function(t){e.ticketdetails=t.val(),t.val()&&e.getComment(),e.$$phase||e.$apply()})}if("private"==n.type){var c=firebase.database().ref("/feedbackTicketsQuestionPrivate/"+n.id);c.on("value",function(t){e.ticketdetails=t.val(),t.val()&&e.getComment(),e.$$phase||e.$apply()})}if("faq"==n.type){var c=firebase.database().ref("/faq/"+n.id);c.on("value",function(t){e.ticketdetails=t.val(),t.val()&&e.getComment(),e.$$phase||e.$apply()})}}e.data=[],e.send=function(){if(e.data.message){var t=firebase.database().ref("/feedbackTicketsComments"),a={};a.publishAt=new Date,a.comment=e.data.message,a.userid=JSON.parse(window.localStorage.getItem("info")).uid,a.ticketId=n.id;var o=JSON.parse(angular.toJson(a));t.push(o)}},e.deleteTicket=function(){var e=s.confirm("Really want to delete it?");if(e){if(n.id&&"public"==n.type){var t=firebase.database().ref("/feedbackTicketsQuestionPublic/"+n.id);t.remove(),i.path("/app/feedback")}if(n.id&&"private"==n.type){var t=firebase.database().ref("/feedbackTicketsQuestionPrivate/"+n.id);t.remove(),i.path("/app/feedback")}}},l.trackPage("Feedback_Details")}]},{}],9:[function(e,t,a){"use strict";t.exports=["$scope","$rootScope","$ionicLoading","$state","Analytics",function(e,t,a,o,r){e.forgetpassword=function(e){a.show({template:"Loading..."}),firebase.auth().sendPasswordResetEmail(e).then(function(e){alert("Password reset email sent successfully"),a.hide(),o.go("app.login")},function(e){console.log("Error sending password reset email:",e),alert("Error sending password reset email: "+e.message),a.hide()})},r.trackPage("Forgot_Password")}]},{}],10:[function(e,t,a){"use strict";t.exports=["$scope","$window","$ionicPopup","$state","$location","$timeout","$rootScope","$ionicLoading","$ionicModal","Upload","$ionicActionSheet","$http","Analytics",function(e,t,a,o,r,n,i,s,l,c,d,p,u){s.show({template:"Loading..."}),i.checkLogin(),e.onFileSelect=function(t){t[0]&&(e.filesdata=t[0])};var m=firebase.database().ref("/groups");m.orderByChild("owner_userid").equalTo(JSON.parse(window.localStorage.getItem("info")).uid).on("value",function(e){i.user_groups=e.val(),s.hide()},function(e){console.log("The read failed: "+e.code),s.hide()});var m=firebase.database().ref("/users/"+JSON.parse(window.localStorage.getItem("info")).uid+"/groups");m.on("value",function(e){i.user_joined_groups=[];for(var t in e.val())if(t&&e.val()[t].groupid){var a=firebase.database().ref("/groups/"+e.val()[t].groupid);a.once("value",function(e){if(null!=e.val()){var t=e.val();t.groupid=e.key,i.user_joined_groups.push(t)}})}s.hide()},function(e){console.log("The read failed: "+e.code),s.hide()});l.fromTemplateUrl("templates/create_group.html",{scope:e,animation:"slide-in-up"}).then(function(t){e.modal=t});e.createGroupPopup=function(){e.data={},e.modal.show()},e.createGroup=function(t){if(t){s.show({template:"Loading..."}),t.image="",t.publishAt=new Date,t.portfolio=0,t.projects=0;var a=JSON.parse(angular.toJson(t));a.owner_userid=JSON.parse(window.localStorage.getItem("info")).uid;var o=firebase.database().ref("/groups"),r=o.push(a),n=firebase.database().ref("/search/groups"),l=[];t.interested_categories&&t.interested_categories.forEach(function(e){l.push(e.name)});var d=[];t.interested_categories&&t.interested_categories.forEach(function(e){d.push(e.id)}),setTimeout(function(){var a=(n.push({group_id:r.key,title:t.grouptitle.toLowerCase(),category:l.join(),location:t.location}),firebase.database().ref("/groups/"+r.key+"/members"));a.push({userid:JSON.parse(window.localStorage.getItem("info")).uid});var o=firebase.database().ref("/groups/"+r.key+"/admin/");o.push({userid:JSON.parse(window.localStorage.getItem("info")).uid}),e.filesdata?c.upload({url:i.serverURL+"/uploadfile.php?type=groups",data:{file:e.filesdata,id:r.key}}).then(function(e){s.hide();var t=firebase.database().ref();t.child("groups").child(r.key).update({image:i.serverURL+"/upload/groups/"+r.key}),s.hide()},function(e){console.log("Error status: "+e.status),s.hide()},function(e){parseInt(100*e.loaded/e.total)}):s.hide()},100),e.modal.hide()}};if(i.data_for_search){e.searched_group_result=[];for(var f in i.data_for_search.groups)e.searched_group_result.push(i.data_for_search.groups[f])}else{var m=firebase.database().ref("/search/groups");m.once("value",function(t){i.data_for_search=t.val(),i.data_for_search_user_array=[],i.data_for_search_groups_array=[],i.data_for_search_projects_array=[],e.searched_group_result=[];for(var a in t.val())e.searched_group_result.push(t.val()[a])})}e.search=[],e.deleteGroup=function(e){if(e){var a=t.confirm("Really want to delete it?");if(a){s.show({template:"Deleting..."});var o=firebase.database().ref("/groups/"+e);o.remove(function(t){if(t)console.log("Synchronization failed"),s.hide();else{var a=firebase.database().ref("/search/groups/").orderByChild("group_id").equalTo(e);a.once("value",function(e){if(e.val())for(var t in e.val()){var a=firebase.database().ref("/search/groups/"+t);a.remove()}}),console.log("Synchronization succeeded"),s.hide()}})}}},e.isMember=function(e){var t=JSON.parse(window.localStorage.getItem("info")).uid;for(var a in e)if(e[a].userid==t)return!0},e.leaveGroup=function(e){if(e){s.show({template:"Leaving..."});var t=firebase.database().ref("/groups/"+e+"/members");t.orderByChild("userid").equalTo(JSON.parse(window.localStorage.getItem("info")).uid).once("value",function(t){var a=0;if(null!=t.val()){for(var o in t.val())a=o;setTimeout(function(){var t=firebase.database().ref("/groups/"+e+"/members/"+a),o=firebase.database().ref("/users/"+JSON.parse(window.localStorage.getItem("info")).uid+"/groups");t.remove(function(t){t?(s.hide(),console.log("Synchronization failed")):(o.orderByChild("groupid").equalTo(e).once("value",function(e){for(var t in e.val()){var a=firebase.database().ref("/users/"+JSON.parse(window.localStorage.getItem("info")).uid+"/groups/"+t);a.remove()}}),s.hide(),console.log("Synchronization succeeded"))})},100)}})}},e.moreoptions=function(e,t){d.show({buttons:[{text:"Translate"}],buttonClicked:function(t){if(0==t){var a=$("#"+e).html();$("#"+e).html("<img src='img/smallloading.gif' style='height:16px;width:28px'/>");var o=window.location.origin+"/translation.php";p({method:"POST",url:o,data:{text:a},headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(t){$("#"+e).html(t.data.text)},function(e){console.log(e)})}return!0}})},u.trackPage("Groups")}]},{}],11:[function(e,t,a){"use strict";t.exports=["$scope","$rootScope","$ionicLoading","$location","$stateParams","$ionicModal","$ionicPopup","$ionicActionSheet","$http","Analytics",function(e,t,a,o,r,n,i,s,l,c){t.checkLogin(),document.getElementById("group_projects")&&(document.getElementById("group_projects").style.display="block"),document.getElementById("group_topics_discussion")&&(document.getElementById("group_topics_discussion").style.display="none"),e.groupId=r.id,t.showManageTopicOption=!1,t.inviteMember=function(){o.path("/app/groupinvite/"+e.groupId)};n.fromTemplateUrl("templates/kickout_member.html",{scope:e,animation:"slide-in-up"}).then(function(t){e.modal=t}),n.fromTemplateUrl("templates/grouprules.html",{scope:e,animation:"slide-in-up"}).then(function(t){e.rulesmodal=t}),n.fromTemplateUrl("templates/manage_group_topic.html",{scope:e,animation:"slide-in-up"}).then(function(t){e.manageTopicmodal=t}),n.fromTemplateUrl("templates/group_admin.html",{scope:e,animation:"slide-in-up"}).then(function(t){e.groupAdmin=t});if(t.kickOutMember=function(){e.modal.show()},t.showAdminPopup=function(){e.groupAdmin.show()},t.showRules=function(){e.rulesmodal.show()},t.manageGroupTopic=function(){e.manageTopicmodal.show()},t.deleteTopic=function(t){if(t){var a=firebase.database().ref("/groups/"+e.groupId+"/topics/"+t);a.remove()}},t.deleteComment=function(t,a){if(a&&t){var o=firebase.database().ref("/groups/"+e.groupId+"/topics/"+a+"/comments/"+t);o.remove()}},t.makeAdmin=function(t,a){if(t&&a){var o=firebase.database().ref("/groups/"+e.groupId+"/admin/");o.push({userid:a})}},t.removeAdmin=function(t,a,o){if(t&&a)for(var r in o)if(o[r].userid==a){var n=firebase.database().ref("/groups/"+e.groupId+"/admin/"+r);n.remove()}},t.kickout=function(t,o){e.groupId&&(a.show({template:"Removing..."}),setTimeout(function(){var r=firebase.database().ref("/groups/"+e.groupId+"/members/"+t),n=firebase.database().ref("/users/"+o+"/groups");r.remove(function(t){t?(a.hide(),console.log("Synchronization failed")):(n.orderByChild("groupid").equalTo(e.groupId).once("value",function(e){for(var t in e.val()){var a=firebase.database().ref("/users/"+o+"/groups/"+t);a.remove()}}),a.hide(),console.log("Synchronization succeeded"),e.searchgroup())})},100))},e.loggeduserIsFollower=!1,e.groupId){a.show({template:"Loading..."});var d=firebase.database().ref("/groups/"+e.groupId);d.on("value",function(o){e.group=o.val(),e.$apply(),t.showManageTopicOption=!1;for(var r in e.group.admin)e.group.admin[r].userid==JSON.parse(window.localStorage.getItem("info")).uid&&(t.showManageTopicOption=!0);e.group.owner_userid==JSON.parse(window.localStorage.getItem("info")).uid?t.showAdminOption=!0:t.showAdminOption=!1,a.hide()},function(e){console.log("The read failed: "+e.code),a.hide()});var p=firebase.database().ref("/users/"+JSON.parse(window.localStorage.getItem("info")).uid+"/groups_follow");p.orderByChild("groupid").equalTo(e.groupId).on("value",function(t){null==t.val()?e.loggeduserIsFollower=!1:e.loggeduserIsFollower=!0})}e.discussionProject=function(e){document.getElementById("group_projects")&&(document.getElementById("group_projects").style.display="none"),document.getElementById("group_topics_discussion")&&(document.getElementById("group_topics_discussion").style.display="block")},e.getMembersProject=function(e){document.getElementById("group_projects")&&(document.getElementById("group_projects").style.display="block"),document.getElementById("group_topics_discussion")&&(document.getElementById("group_topics_discussion").style.display="none"),t.members_projects=[];for(var o in e.members){a.show({template:"Loading..."});var r=firebase.database().ref("/projects");r.orderByChild("userid").equalTo(e.members[o].userid).on("value",function(e){if(a.hide(),null!=e.val())for(var o in e.val()){var r=e.val()[o];r.id=o,t.members_projects.push(r)}},function(e){a.hide(),console.log("The read failed: "+e.code)})}},e.followgroup=function(e){e&&(a.show({template:"Loading..."}),setTimeout(function(){var t=firebase.database().ref("/groups/"+e+"/followers/");t.orderByChild("userid").equalTo(JSON.parse(window.localStorage.getItem("info")).uid).once("value",function(o){if(null==o.val()){t.push({userid:JSON.parse(window.localStorage.getItem("info")).uid});var r=firebase.database().ref("/users/"+JSON.parse(window.localStorage.getItem("info")).uid+"/groups_follow");r.push({groupid:e}),a.hide()}else a.hide(),alert("Already Follower")})},100))},e.unfollowGroup=function(e){if(e){a.show({template:"Loading..."});var t=firebase.database().ref("/groups/"+e+"/followers");t.orderByChild("userid").equalTo(JSON.parse(window.localStorage.getItem("info")).uid).once("value",function(t){var o=0;if(null!=t.val()){for(var r in t.val())o=r;setTimeout(function(){var t=firebase.database().ref("/groups/"+e+"/followers/"+o),r=firebase.database().ref("/users/"+JSON.parse(window.localStorage.getItem("info")).uid+"/groups_follow");t.remove(function(t){t?(a.hide(),console.log("Synchronization failed")):(r.orderByChild("groupid").equalTo(e).once("value",function(e){for(var t in e.val()){var a=firebase.database().ref("/users/"+JSON.parse(window.localStorage.getItem("info")).uid+"/groups_follow/"+t);a.remove()}}),a.hide(),console.log("Synchronization succeeded"))})},100)}})}},e.createTopic=function(){e.data={};var t=i.show({template:'<p>Topic</p> <input type="text" ng-model="data.title"><p>Description</p><input type="text" ng-model="data.description">',title:"Create Topic",scope:e,buttons:[{text:"Cancel"},{text:"<b>Create</b>",type:"button-positive",onTap:function(t){return e.data.title?e.data:void t.preventDefault()}}]});t.then(function(t){if(t){var a=firebase.database().ref("/groups/"+e.groupId+"/topics");a.push(t)}})},e.comment=function(t){e.comment_data={};var a=i.show({template:'<input type="text" ng-model="comment_data.comment">',title:"Enter comment",scope:e,buttons:[{text:"Cancel"},{text:"<b>Comment</b>",type:"button-positive",onTap:function(t){return e.comment_data.comment?e.comment_data.comment:void t.preventDefault();
}}]});a.then(function(a){if(a){var o={userid:JSON.parse(window.localStorage.getItem("info")).uid,comment:e.comment_data.comment,publishAt:new Date},r=JSON.parse(angular.toJson(o)),n=firebase.database().ref("/groups/"+e.groupId+"/topics/"+t+"/comments");n.push(r),setTimeout(function(){o.groupid=e.groupId,o.topicid=t,o.type="group";var a=JSON.parse(angular.toJson(o)),r=firebase.database().ref("/users/"+JSON.parse(window.localStorage.getItem("info")).uid+"/comments/");r.push(a)},100)}})},e.moreoptions=function(e,t){s.show({buttons:[{text:"Translate"}],buttonClicked:function(t){if(0==t){var a=$("#"+e).html();$("#"+e).html("<img src='img/smallloading.gif' style='height:16px;width:28px'/>");var o=window.location.origin+"/translation.php";l({method:"POST",url:o,data:{text:a},headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(t){$("#"+e).html(t.data.text)},function(e){console.log(e)})}return!0}})},c.trackPage("Group_Details")}]},{}],12:[function(e,t,a){"use strict";t.exports=["$scope","Firebase","$rootScope","$ionicLoading","$stateParams","$firebaseObject","$location","$ionicActionSheet","Analytics",function(e,t,a,o,r,n,i,s,l){if(a.checkLogin(),e.inboxUnreadCount=0,e.contractUnreadMessageCount=[],e.addContractUnreadMessageCount=function(t,a){"unread"==t.status&&(e.contractUnreadMessageCount[a]||(e.contractUnreadMessageCount[a]="1",e.contractUnreadMessageCount.push(a)))},window.localStorage.getItem("info")){e.loggedUser=JSON.parse(window.localStorage.getItem("info")).uid;var c=firebase.database().ref("/inbox/"+e.loggedUser);c.on("value",function(t){e.inboxdata=t.val();for(var a in e.inboxdata)"unread"==e.inboxdata[a].status&&(e.inboxUnreadCount=parseInt(e.inboxUnreadCount)+1);e.$$phase||e.$apply()}),e.contract=[];var d=firebase.database().ref("/contracts/").orderByChild("talent_id").equalTo(e.loggedUser);d.on("value",function(t){for(var a in t.val()){var o=t.val()[a];o.id=a,o.publishAt=new Date(t.val()[a].publishAt).getTime(),o.c_type_role="talent",o.c_type="contract",e.contract.push(o)}});var d=firebase.database().ref("/jobproposals/").orderByChild("talent_id").equalTo(e.loggedUser);d.on("value",function(t){for(var a in t.val()){var o=t.val()[a];o.id=a,o.publishAt=new Date(t.val()[a].publishAt).getTime(),o.c_type_role="talent",o.c_type="proposal",e.contract.push(o)}});var d=firebase.database().ref("/contracts/").orderByChild("employer_id").equalTo(e.loggedUser);d.on("value",function(t){for(var a in t.val()){var o=t.val()[a];o.id=a,o.publishAt=new Date(t.val()[a].publishAt).getTime(),o.c_type_role="employer",o.c_type="contract",e.contract.push(o)}});var d=firebase.database().ref("/jobproposals/").orderByChild("employer_id").equalTo(e.loggedUser);d.on("value",function(t){for(var a in t.val()){var o=t.val()[a];o.id=a,o.c_type_role="employer",o.publishAt=new Date(t.val()[a].publishAt).getTime(),o.c_type="proposal",e.contract.push(o)}})}e.openContract=function(e,t){if("contract"==e.c_type){var a=firebase.database().ref("/contracts/"+e.id+"/message/"+t);a.once("value",function(e){e.val()&&"unread"==e.val().status&&a.update({status:"read"})}),"employer"==e.c_type_role&&i.path("/app/contract/details/emp/"+e.id),"talent"==e.c_type_role&&i.path("/app/contract/details/"+e.id)}if("proposal"==e.c_type){var a=firebase.database().ref("/jobproposals/"+e.id+"/message/"+t);a.once("value",function(e){e.val()&&"unread"==e.val().status&&a.update({status:"read"})}),"employer"==e.c_type_role&&("New proposal received"==e.message[t].message&&e.message[t].jobid?i.path("/app/proposallist/"+e.message[t].jobid):i.path("/app/proposaldetails/"+e.id)),"talent"==e.c_type_role&&i.path("/app/proposal/details/"+e.id)}},e.inboxOpen=function(t,a){if("chat"==a.type){i.path("/app/chat/"+a.sender);var o=firebase.database().ref("/inbox/"+e.loggedUser+"/"+t);o.update({status:"read"});var r=firebase.database().ref("/notification/"+e.loggedUser);r.orderByChild("sender").equalTo(a.sender).once("value",function(t){if(t.val())for(var a in t.val())if("chat"==t.val()[a].type){var o=firebase.database().ref("/notification/"+e.loggedUser+"/"+a);o.remove()}})}},e.deleteNotification=function(e){if(e){firebase.database().ref("/notification/"+JSON.parse(window.localStorage.getItem("info")).uid+"/"+e).update({"delete":"true"})}},e.inboxMoreOptions=function(t,a){if("chat"==a.type){s.show({buttons:[],destructiveText:"Delete",cancelText:"Cancel",cancel:function(){},buttonClicked:function(e){return!0},destructiveButtonClicked:function(){if(t){var o=firebase.database().ref("/userschat/"+e.loggedUser+"/chat/"+a.sender);o.remove();var r=firebase.database().ref("/inbox/"+e.loggedUser+"/"+t);r.remove();var n=firebase.database().ref("/notification/"+e.loggedUser);n.orderByChild("sender").equalTo(a.sender).once("value",function(t){if(t.val())for(var a in t.val())if("chat"==t.val()[a].type){var o=firebase.database().ref("/notification/"+e.loggedUser+"/"+a);o.remove()}})}return!0}})}},l.trackPage("Inbox")}]},{}],13:[function(e,t,a){"use strict";t.exports=["$scope","$ionicModal","$rootScope","Firebase","$ionicPopup","$stateParams","$ionicLoading","$location",function(e,t,a,o,r,n,i,s){if(a.checkLogin(),n.id){i.show({template:"Loading..."});var l=firebase.database().ref("/jobs/"+n.id);l.once("value",function(t){e.job=t.val();var a=firebase.database().ref("/contracts/").orderByChild("jobid").equalTo(n.id);a.once("value",function(t){i.hide(),e.contracts=[],e.end_contracts=[];for(var a in t.val()){var o=t.val()[a];o.id=a,"open"==t.val()[a].status&&e.contracts.push(o),"end"==t.val()[a].status&&e.end_contracts.push(o)}})})}e.closejob=function(){firebase.database().ref("/jobs/"+n.id+"/status").set("end");s.path("/app/workorganizer")}}]},{}],14:[function(e,t,a){"use strict";function o(e,t){return new Date(e).getTime()>new Date(t).getTime()}t.exports=["$scope","$rootScope","$ionicModal","$ionicPopover","Firebase","$location","$ionicLoading","$filter","$state","$ionicSideMenuDelegate",function(e,t,a,r,n,i,s,l,c,d){if(e.searchFilters=[],e.searchFilters.categories=[],e.projectsearch="",window.localStorage.getItem("home_sortdata")?(e.projectsearch=window.localStorage.getItem("home_term"),e.projectsearch_filter=window.localStorage.getItem("home_term"),t.ProjectFilterOn=!0,e.searchFilters.sort=window.localStorage.getItem("home_sortdata"),e.searchFilters.timeDuration=window.localStorage.getItem("home_timeDuration"),e.searchFilters.categories=JSON.parse(window.localStorage.getItem("home_categories")),"customer_range"==e.searchFilters.timeDuration&&(e.searchFilters.customer_rangeto=window.localStorage.getItem("home_timeDuration_customer_rangeto"),e.searchFilters.customer_rangefrom=window.localStorage.getItem("home_timeDuration_customer_rangefrom"))):(e.searchFilters.sort="latest",e.searchFilters.timeDuration="all"),a.fromTemplateUrl("mainpagesort.html",{scope:e,animation:"slide-in-up"}).then(function(t){e.model=t}),e.viewmainSorts=function(){e.model.show()},e.reset=function(){t.ProjectFilterOn=!1,e.searchFilters.sort="latest",e.projectsearch="",e.projectsearch_filter="",e.searchFilters.timeDuration="all",window.localStorage.removeItem("home_term"),window.localStorage.removeItem("home_sortdata"),window.localStorage.removeItem("home_timeDuration"),window.localStorage.removeItem("home_categories"),e.searchFilters.categories=[]},e.moreDataCanBeLoaded=!1,1==t.refreshHomePage&&(t.refreshHomePage=!1,location.reload()),window.history.go(-window.history.length),$(".mainpage-banner").css("height",$(document).height()/3),s.show({template:"Loading..."}),e.hideAds=function(){document.getElementById("mainpage-banner-outer").style.display="none"},e.toggleLeft=function(){d.toggleLeft()},e.pageReload=function(){location.reload()},e.loadedProjects=0,e.loadMore=function(){e.allhomePageProjects&&setTimeout(function(){if(e.allhomePageProjects.length>=e.loadedProjects){e.loadedProjects=e.loadedProjects+5;for(var t=e.loadedProjects;t<e.loadedProjects+5;t++)e.allhomePageProjects[t]&&e.homePageProjects.push(e.allhomePageProjects[t]),e.$broadcast("scroll.infiniteScrollComplete")}else e.moreDataCanBeLoaded=!1,e.$broadcast("scroll.infiniteScrollComplete")},1e3)},e.sortdata=function(a){t.ProjectFilterOn=!0,window.localStorage.setItem("home_sortdata",a),s.show({template:"Searching..."}),"latest"!=a&&"select"!=a||(e.homePageProjects=l("orderBy")(e.homePageProjects,"-publishAt")),"mostcommented"==a&&(e.homePageProjects=l("orderBy")(e.homePageProjects,"-commnetscount")),"mostviewed"==a&&(e.homePageProjects=l("orderBy")(e.homePageProjects,"-viewscount")),setTimeout(function(){s.hide()},3e3)},e.applyFilter=function(a,o,r){s.show({template:"Searching..."}),"latest"!=o||r||"all"!=a||e.searchFilters.categories&&0!=e.searchFilters.categories.length?(t.ProjectFilterOn=!0,r?(e.projectsearch=r,window.localStorage.setItem("home_term",r)):(e.projectsearch="",window.localStorage.setItem("home_term","")),window.localStorage.setItem("home_timeDuration",a),window.localStorage.setItem("home_sortdata",o),"customer_range"==e.searchFilters.timeDuration&&(window.localStorage.setItem("home_timeDuration_customer_rangeto",e.searchFilters.customer_rangeto),window.localStorage.setItem("home_timeDuration_customer_rangefrom",e.searchFilters.customer_rangefrom))):e.reset(),null!=e.searchFilters.categories&&e.searchFilters.categories.length>0?(console.log("getFilteredCategoryProject"),e.getFilteredCategoryProject(),window.localStorage.setItem("home_categories",JSON.stringify(e.searchFilters.categories))):(console.log("all project"),e.loadedProjects=0,e.getAllProject())},e.getFilteredCategoryProject=function(){var t=l("date")(new Date,"dd/MM/yy");e.homePageProjects=[];var a=[];e.searchFilters.categories.forEach(function(r,n){console.log("1"),e.allhomePageProjects.forEach(function(n){a.indexOf(n.id)<0&&(console.log("2"),n.categories&&n.categories.forEach(function(i){if(console.log("3 : catPrroject.name : searchCat"),i.name==r.name){if(console.log(a.indexOf(n.id)),"all"==e.searchFilters.timeDuration&&(a.push(n.id),e.homePageProjects.push(n),e.$$phase||e.$apply()),"today"==e.searchFilters.timeDuration&&t==l("date")(n.publishAt,"dd/MM/yy")&&(a.push(n.id),e.homePageProjects.push(n)),"this_week"==e.searchFilters.timeDuration){var s=l("date")(new Date,"dd"),c=l("date")(new Date,"MM"),d=l("date")(new Date,"yy"),p=(new Date).getDay();d==l("date")(n.publishAt,"yy")&&c==l("date")(n.publishAt,"MM")&&s-l("date")(n.publishAt,"dd")<=p&&(a.push(n.id),e.homePageProjects.push(n))}if("customer_range"==e.searchFilters.timeDuration&&e.searchFilters.customer_rangeto&&e.searchFilters.customer_rangefrom){var u=e.searchFilters.customer_rangeto.split("-"),m=e.searchFilters.customer_rangefrom.split("-"),f=o(u[1]+"-"+u[0]+"-"+u[2],l("date")(n.publishAt,"MM-dd-yyyy")),g=o(m[1]+"-"+m[0]+"-"+m[2],l("date")(n.publishAt,"MM-dd-yyyy"));f&&!g&&(a.push(n.id),e.homePageProjects.push(n))}}}))}),n==e.searchFilters.categories.length-1&&(e.loadedProjects=e.allhomePageProjects.length,setTimeout(function(){"latest"==e.searchFilters.sort&&(e.allhomePageProjects=l("orderBy")(e.allhomePageProjects,"-publishAt")),"mostcommented"==e.searchFilters.sort&&(e.allhomePageProjects=l("orderBy")(e.allhomePageProjects,"-commnetscount")),"mostviewed"==e.searchFilters.sort&&(e.allhomePageProjects=l("orderBy")(e.allhomePageProjects,"-viewscount")),s.hide()},2e3))})},e.getCategoryProject=function(){e.allhomePageProjects=[],setTimeout(function(){e.allhomePageProjects.length<=3&&(e.moreDataCanBeLoaded=!1,s.hide(),e.$broadcast("scroll.refreshComplete"))},5e3);var a=[],o=[];t.userdata.interested_categories||t.userdata.follows||(s.hide(),e.$broadcast("scroll.refreshComplete"));for(key in t.userdata.interested_categories){var r=firebase.database().ref("/categoryprojects/"+t.userdata.interested_categories[key].id);r.orderByChild("timestamp").limitToLast(25).once("value",function(t){for(var a in t.val())e.allhomePageProjects.push(t.val()[a]),e.$$phase||e.$apply()})}for(key in t.userdata.follows){var n=firebase.database().ref("/projects");n.orderByChild("userid").equalTo(t.userdata.follows[key].userid).once("value",function(t){for(var a in t.val())e.allhomePageProjects.push({project_id:a,timestamp:t.val()[a].publishAt,type:"Following"}),e.$$phase||e.$apply()})}setTimeout(function(){angular.forEach(e.allhomePageProjects,function(t,r){var n=t.project_id;if(o.indexOf(n)===-1&&(o.push(n),a.push(t)),r==e.allhomePageProjects.length-1){e.allOrderedhomePageProjects=l("orderBy")(a,"-timestamp"),e.homePageProjects=[];for(var i=0;i<5;i++)e.allOrderedhomePageProjects[i]&&e.homePageProjects.push(e.allOrderedhomePageProjects[i]);e.$$phase||e.$apply(),s.hide(),e.$broadcast("scroll.refreshComplete"),e.allOrderedhomePageProjects.length>=3&&(e.moreDataCanBeLoaded=!0)}})},5e3)},e.getAllProject=function(){e.allhomePageProjects=[],e.homePageProjects=[];var a=firebase.database().ref("projects");a.once("value",function(a){var r=l("date")(new Date,"dd/MM/yy");if("all"==e.searchFilters.timeDuration)for(var n in a.val()){var i=a.val()[n];i.id=n,i.comments?i.commnetscount=t.getObjectLength(i.comments):i.commnetscount=0,i.views?i.viewscount=t.getObjectLength(i.views):i.viewscount=0,e.allhomePageProjects.push(i)}if("today"==e.searchFilters.timeDuration)for(var n in a.val())if(r==l("date")(a.val()[n].publishAt,"dd/MM/yy")){var i=a.val()[n];i.id=n,i.comments?i.commnetscount=t.getObjectLength(i.comments):i.commnetscount=0,i.views?i.viewscount=t.getObjectLength(i.views):i.viewscount=0,e.allhomePageProjects.push(i)}if("this_week"==e.searchFilters.timeDuration){var c=l("date")(new Date,"dd"),d=l("date")(new Date,"MM"),p=l("date")(new Date,"yy"),u=(new Date).getDay();for(var n in a.val())if(p==l("date")(a.val()[n].publishAt,"yy")&&d==l("date")(a.val()[n].publishAt,"MM")&&c-l("date")(a.val()[n].publishAt,"dd")<=u){var i=a.val()[n];i.id=n,i.comments?i.commnetscount=t.getObjectLength(i.comments):i.commnetscount=0,i.views?i.viewscount=t.getObjectLength(i.views):i.viewscount=0,e.allhomePageProjects.push(i)}}if("customer_range"==e.searchFilters.timeDuration&&e.searchFilters.customer_rangeto&&e.searchFilters.customer_rangefrom){var m=e.searchFilters.customer_rangeto.split("-"),f=e.searchFilters.customer_rangefrom.split("-");for(var n in a.val()){var g=o(m[1]+"-"+m[0]+"-"+m[2],l("date")(a.val()[n].publishAt,"MM-dd-yyyy")),h=o(f[1]+"-"+f[0]+"-"+f[2],l("date")(a.val()[n].publishAt,"MM-dd-yyyy"));if(g&&!h){var i=a.val()[n];i.id=n,i.comments?i.commnetscount=t.getObjectLength(i.comments):i.commnetscount=0,i.views?i.viewscount=t.getObjectLength(i.views):i.viewscount=0,e.allhomePageProjects.push(i)}}}e.$$phase||e.$apply(),setTimeout(function(){"latest"==e.searchFilters.sort&&(e.allhomePageProjects=l("orderBy")(e.allhomePageProjects,"-publishAt")),"mostcommented"==e.searchFilters.sort&&(e.allhomePageProjects=l("orderBy")(e.allhomePageProjects,"-commnetscount")),"mostviewed"==e.searchFilters.sort&&(e.allhomePageProjects=l("orderBy")(e.allhomePageProjects,"-viewscount"));for(var t=0;t<e.allhomePageProjects.length&&t<5;t++)e.homePageProjects.push(e.allhomePageProjects[t]);s.hide(),e.$broadcast("scroll.refreshComplete"),e.allhomePageProjects.length>=3&&(e.moreDataCanBeLoaded=!0),s.hide(),e.allhomePageProjectsIsFetched=!0},2e3)})},null!=e.searchFilters.categories&&e.searchFilters.categories.length>0){console.log("getFilteredCategoryProject"),e.getAllProject();var p=setInterval(function(){e.allhomePageProjectsIsFetched&&(clearInterval(p),e.getFilteredCategoryProject())},1e3)}else console.log("all project"),e.getAllProject();e.like=function(e,t){var a=firebase.database().ref("/projects/"+e+"/likes");a.orderByChild("userid").equalTo(JSON.parse(window.localStorage.getItem("info")).uid).once("value",function(o){if(null==o.val()){a.push({userid:JSON.parse(window.localStorage.getItem("info")).uid});var r=firebase.database().ref("/users/"+JSON.parse(window.localStorage.getItem("info")).uid+"/projectlikes");r.orderByChild("projectid").equalTo(e).once("value",function(a){if(null==a.val()){r.push({projectid:e});var o=firebase.database().ref("/users/"+t+"/project_likers");o.push({projectid:e,userid:JSON.parse(window.localStorage.getItem("info")).uid})}})}})},e.unlike=function(e,t){var a=firebase.database().ref("/projects/"+e+"/likes");a.orderByChild("userid").equalTo(JSON.parse(window.localStorage.getItem("info")).uid).once("value",function(a){if(a.val())for(key in a.val()){var o=firebase.database().ref("/projects/"+e+"/likes/"+key);o.remove();var r=firebase.database().ref("/users/"+JSON.parse(window.localStorage.getItem("info")).uid+"/projectlikes");r.orderByChild("projectid").equalTo(e).once("value",function(e){if(e.val())for(var t in e.val()){var a=firebase.database().ref("/users/"+JSON.parse(window.localStorage.getItem("info")).uid+"/projectlikes/"+t);a.remove()}});var n=firebase.database().ref("/users/"+t+"/project_likers");n.orderByChild("projectid").equalTo(e).once("value",function(e){if(e.val())for(var a in e.val())if(e.val()[a].userid==JSON.parse(window.localStorage.getItem("info")).uid){var o=firebase.database().ref("/users/"+t+"/project_likers/"+a);o.remove()}})}})}}]},{}],15:[function(t,a,o){"use strict";a.exports=["$scope","$ionicModal","$rootScope","Firebase","$ionicPopup","$stateParams","$ionicLoading","$location","$http","Analytics",function(t,a,o,r,n,i,s,l,c,d){if(t.jobid=0,o.checkLogin(),i.proposalid&&"first"==i.type){t.proposalid=i.proposalid,s.show({template:"Loading..."});var p=firebase.database().ref("/jobproposals/"+i.proposalid);p.once("value",function(e){if(e.val()){var a=firebase.database().ref("/jobs/"+e.val().jobid);a.once("value",function(e){t.job=e.val();var a=firebase.database().ref("/transactions/").orderByChild("moneyof").equalTo(o.loggedUserId);a.once("value",function(e){e.val()?c({method:"POST",url:window.location.origin+"/transaction.php",data:{token:o.loggedUserId,type:"checkMyBalance",domain:window.location.origin,transactions:e.val(),currency:t.job.currency},headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(e){s.hide(),parseInt(e.data)&&(t.MyAccountBalance=parseInt(e.data))},function(e){console.log(e),s.hide()}):s.hide()})}),t.contract=e.val(),t.jobid=t.contract.jobid;for(var r in t.contract.milestones)t.contract.milestones[r].status||t.milestone||(t.milestone=t.contract.milestones[r],t.milestoneId=r);setTimeout(function(){if(t.milestone)if(t.milestone.status)l.path("/app/mainpage");else{var e=firebase.database().ref("/cardTransactionDataInitialise/").orderByChild("proposalid").equalTo(i.proposalid);e.once("value",function(e){for(var a in e.val())"success"==e.val()[a].payment&&e.val()[a].proposalid==t.proposalid&&(t.cardTransData_id=a,t.payPalTransationResponce=e.val()[a].paymentData,t.payProccess("card"))})}else l.path("/app/mainpage")},2e3)}else l.path("/app/mainpage");s.hide()})}t.showPaymentbtn=!0,a.fromTemplateUrl("cardDetails.html",{scope:t,animation:"slide-in-up"}).then(function(e){t.modal=e}),t.makepayment=function(a,r){t.paymentVarifyStatus=!1,n.show({template:'<input type="password" ng-model="$root.tempwifidata.wifi5">',title:"Enter your password",subTitle:"Please enter your worklidate account password to continue.",scope:o,buttons:[{text:"Cancel"},{text:"<b>Confirm</b>",type:"button-positive",onTap:function(e){return o.tempwifidata.wifi5?o.tempwifidata.wifi5:void e.preventDefault()}}]}).then(function(o){return firebase.auth().signInWithEmailAndPassword(JSON.parse(window.localStorage.getItem("info")).email,o).then(function(o){o.emailVerified?(t.paymentVarifyStatus=!0,t.paymentVarify(a,r)):(alert("Login failed. Please try again."),e.preventDefault())},function(t){alert("Login failed. Please try again."),e.preventDefault()})})},t.paymentVarify=function(e,a){if(1==t.paymentVarifyStatus){t.showresult=!1,t.showForm=!0;var r=n.confirm({title:"Milestone Payment",template:"Process to fund "+t.job.currency+e+"?"});r.then(function(r){if(r){if(!t.milestone.status&&t.milestoneId&&t.proposalid&&t.job&&(i.type="first")){t.showPaymentbtn=!1,s.show({template:"Proccessing..."});var n=firebase.database().ref("/transactions/").orderByChild("moneyof").equalTo(o.loggedUserId);n.once("value",function(r){r.val()?(s.show({template:"Proccessing..."}),c({method:"POST",url:window.location.origin+"/transaction.php",data:{token:o.loggedUserId,type:"checkMyBalance",domain:window.location.origin,transactions:r.val(),currency:t.job.currency},headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(o){s.show({template:"Proccessing..."}),parseInt(o.data)&&e<=parseFloat(o.data)?("myaccount"==a&&t.payProccess("myaccount"),"bycard"==a&&(t.modal.show(),s.hide())):"bycard"==a&&(t.modal.show(),s.hide())},function(e){alert(e),s.hide()})):"bycard"==a&&(t.modal.show(),s.hide())})}}else console.log("You are not sure")})}},t.showForm=!0,t.payPalTransationResponce=[],t.payProccess=function(e){if(s.show({template:"Proccessing..."}),!t.milestone.status&&t.milestoneId&&t.proposalid&&t.job){s.show({template:"Proccessing..."});var a=firebase.database().ref("/jobproposals/"+i.proposalid);a.once("value",function(a){s.show({template:"Proccessing..."});var r=new Date,n=firebase.database().ref("/contracts/"),l=a.val(),d=!1;for(var p in l.milestones)l.milestones[p]&&0==d&&(l.milestones[p].status="working"),d=!0;setTimeout(function(){l.contract_start_on=r.toString();var a=n.push(l);if(a.key){var d=new Date,p=JSON.parse(angular.toJson({message:"Contract started  *",date:d,type:"employer",system_message:"true",status:"unread"})),u=firebase.database().ref("/jobproposals/"+i.proposalid+"/message");u.push(p),s.show({template:"Proccessing..."}),c({method:"POST",url:window.location.origin+"/transaction.php",data:{token:o.loggedUserId,type:"milestone_payment",domain:window.location.origin,milestone:t.milestoneId,contract:a.key,job:t.contract.jobid,payType:e,payPalTransationResponce:t.payPalTransationResponce},headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(e){if(s.show({template:"Proccessing..."}),"success"==e.data){s.show({template:"Proccessing..."});var r=firebase.database().ref("/jobproposals/"+i.proposalid);r.remove();firebase.database().ref("/jobs/"+t.contract.jobid+"/status").set("working");o.clearBrowserHistory=!0;var n=firebase.database().ref("/users/"+t.contract.employer_id+"/timeline"),l=(n.push({publishAt:d.toString(),title:"Hired talent for job.",subTitle:t.job.title,description:t.job.description,type:"jobs",reference:t.contract.jobid,statusline:""}),firebase.database().ref("/users/"+t.contract.talent_id+"/timeline")),c=(l.push({publishAt:d.toString(),title:"Hired for job.",subTitle:t.job.title,description:t.job.description,type:"jobs",reference:t.contract.jobid,statusline:""}),JSON.parse(angular.toJson({message:"Contract confirmed and funded first milestone.",date:d,type:"employer",status:"unread",system_message:"true"}))),p=firebase.database().ref("/contracts/"+a.key+"/message");p.push(c);var u=JSON.parse(angular.toJson({date:d,message:o.userdata.name+'(Employer) confirmed contract and funded first milestone for job  "'+t.job.title+'"',type:"contractmessage",sender:o.loggedUserId,senderName:o.userdata.name,status:"unread"})),m=firebase.database().ref("/notification/"+t.contract.talent_id);m.push(u);var f=firebase.database().ref("/jobproposals/").orderByChild("jobid").equalTo(t.contract.jobid);f.once("value",function(e){if(e.val()){for(var r in e.val()){var n=firebase.database().ref("/jobproposals/"+r),l=(firebase.database().ref("/jobproposalsClosed/"+r).set(e.val()[r]),JSON.parse(angular.toJson({date:d,message:'Your proposal to the job "'+t.job.title+'" was declined. Employer picked another freelancer',type:"contractmessage",sender:o.loggedUserId,senderName:o.userdata.name,status:"unread"}))),c=firebase.database().ref("/notification/"+e.val()[r].talent_id);c.push(l),n.remove(),t.cardTransData_id&&firebase.database().ref("/cardTransactionDataInitialise/"+t.cardTransData_id.key).remove()}firebase.database().ref("/proposalid_contractid").push({proposalid:i.proposalid,contractid:a.key});s.show(),setTimeout(function(){var e=history.length;history.go(-e),window.location.replace("#/app/contract/details/emp/"+a.key),o.reloadContractPage=!0,s.hide()},5e3)}else{var p=(firebase.database().ref("/proposalid_contractid").push({proposalid:i.proposalid,contractid:a.key}),history.length);history.go(-p),s.show(),setTimeout(function(){var e=history.length;history.go(-e),window.location.replace("#/app/contract/details/emp/"+a.key),o.reloadContractPage=!0,s.hide()},5e3)}})}},function(e){console.log(e),s.hide()})}},100)})}},t.payNow=function(e,a){if(t.showForm=!1,t.milestone.budget&&t.job.currency&&!t.milestone.status&&t.milestoneId&&t.proposalid&&t.job){var r=firebase.database().ref("/cardTransactionDataInitialise/");t.cardTransData_id=r.push({milestoneId:t.milestoneId,proposalid:t.proposalid,job:t.job}),c({method:"POST",url:window.location.origin+"/first.php",data:{token:o.loggedUserId,n:e.number,cv:e.cvc,fname:e.fname,lname:e.lname,expM:e.expiration.month,expY:e.expiration.year,amt:t.milestone.budget,curr:t.job.currency,type:a.toLowerCase(),itemName:"Milestone Payment",itenDescription:"JOB NAME: "+t.job.title+"  JOBID:"+t.jobid+" MILESTONE:"+t.milestone.title+"("+t.milestoneId+")",proposalid:t.proposalid,cardTransData_id:t.cardTransData_id.key},headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(e){t.modal.hide(),e.data&&"null"!=e.data&&null!=e.data&&"approved"==e.data.state?(t.payPalTransationResponce=e.data,t.payProccess("card")):(t.showPaymentbtn=!0,alert("Something went wrong. Please try again later. Contact support team if money is deducted from your account.")),t.showresult=!0,t.result=e.data},function(e){t.showresult=!0,t.showPaymentbtn=!0,t.modal.hide(),alert("Something went wrong. Please try again later. Contact support team if money is deducted from your account."),s.hide()})}},d.trackPage("First_Milestone_Payment")}]},{}],16:[function(e,t,a){"use strict";t.exports=["$scope","Analytics","$rootScope",function(e,t,a){t.trackPage("My_Finance"),a.checkLogin()}]},{}],17:[function(e,t,a){"use strict";t.exports=["$scope","$rootScope","$http","$ionicLoading","Analytics","taskObj",function(e,t,a,o,r,n){if(console.log("taskObj "),t.checkLogin(),t.loggedUserId){o.show({template:"Loading..."});var i=firebase.database().ref("/transactions/").orderByChild("employer_id").equalTo(t.loggedUserId);i.on("value",function(t){e.MyEmployerAccount=t.val(),e.MyEmployerAccountEscrowUSD=0,e.MyEmployerAccountEscrowHKD=0;for(var a in e.MyEmployerAccount)"escrow"==e.MyEmployerAccount[a].payment_status&&"USD"==e.MyEmployerAccount[a].currency&&(e.MyEmployerAccountEscrowUSD=parseFloat(e.MyEmployerAccountEscrowUSD)+parseFloat(e.MyEmployerAccount[a].amount)),"escrow"==e.MyEmployerAccount[a].payment_status&&"HKD"==e.MyEmployerAccount[a].currency&&(e.MyEmployerAccountEscrowHKD=parseFloat(e.MyEmployerAccountEscrowHKD)+parseFloat(e.MyEmployerAccount[a].amount))});var s=firebase.database().ref("/transactions/").orderByChild("talent_id").equalTo(t.loggedUserId);s.on("value",function(t){e.MyTalentAccount=t.val(),e.MyTalentAccountEscrowUSD=0,e.MyTalentAccountEscrowHKD=0;for(var a in e.MyTalentAccount)"escrow"==e.MyTalentAccount[a].payment_status&&"USD"==e.MyTalentAccount[a].currency&&(e.MyTalentAccountEscrowUSD=parseFloat(e.MyTalentAccountEscrowUSD)+parseFloat(e.MyTalentAccount[a].amount)),"escrow"==e.MyTalentAccount[a].payment_status&&"HKD"==e.MyTalentAccount[a].currency&&(e.MyTalentAccountEscrowHKD=parseFloat(e.MyTalentAccountEscrowHKD)+parseFloat(e.MyTalentAccount[a].amount));o.hide()});var l=firebase.database().ref("/transactions/").orderByChild("moneyof").equalTo(t.loggedUserId);l.on("value",function(t){e.MyAvialableAccount=t.val(),e.myAccountAvailableUSD=0,e.myAccountAvailableHKD=0;for(var a in e.MyAvialableAccount)"available"==e.MyAvialableAccount[a].payment_status&&"USD"==e.MyAvialableAccount[a].currency&&(e.myAccountAvailableUSD=parseFloat(e.myAccountAvailableUSD)+parseFloat(e.MyAvialableAccount[a].amount)),"available"==e.MyAvialableAccount[a].payment_status&&"HKD"==e.MyAvialableAccount[a].currency&&(e.myAccountAvailableHKD=parseFloat(e.myAccountAvailableHKD)+parseFloat(e.MyAvialableAccount[a].amount)),console.log(e.myAccountAvailableHKD)})}r.trackPage("My_Money")}]},{}],18:[function(e,t,a){"use strict";function o(e){var t,a,o,r;a=new Date,t=a.getTime(),o=6e4*a.getTimezoneOffset(),r=t+o;var n=new Date(r+36e5*e);return r=new Date(r),n.toLocaleString()}t.exports=["$scope","Firebase","$rootScope","$ionicLoading","$http","$ionicPopup","$ionicModal","Analytics","$ionicActionSheet",function(e,t,a,r,n,i,s,l,c){if(a.checkLogin(),a.userdata?e.userLocalTime=new Date(o(a.userdata.timeoffset)):setTimeout(function(){a.userdata&&(e.userLocalTime=new Date(o(a.userdata.timeoffset)))},5e3),r.show({template:"Loading..."}),s.fromTemplateUrl("stats.html",{scope:e,animation:"slide-in-up"}).then(function(t){e.modal=t}),s.fromTemplateUrl("connections.html",{scope:e,animation:"slide-in-up"}).then(function(t){e.connectionmodel=t}),e.viewStats=function(){e.modal.show()},e.viewConnection=function(){e.connectionmodel.show()},e.tabs=[{title:"About",url:"templates/views/about.tpl.html"},{title:"Projects",url:"templates/views/project.tpl.html"},{title:"Jobs",url:"templates/views/jobs.tpl.html"},{title:"Comments",url:"templates/views/comments.tpl.html"}],e.currentTab="templates/views/about.tpl.html",e.onClickTab=function(t){e.currentTab=t.url},e.isActiveTab=function(t){return t==e.currentTab},e.comment=[],e.getdevider=function(e,t){return e&&t?2:1},e.getTotalRatings=function(e,t){return e&&t?a.calculateRating(e)/a.getObjectLength(e)+a.calculateRating(t)/a.getObjectLength(t):e?a.calculateRating(e)/a.getObjectLength(e):t?a.calculateRating(t)/a.getObjectLength(t):0},e.showRatings=function(t,o,r){if(e.comment.show=!1,e.attitude=0,e.understanding=0,e.communication=0,e.payment=0,e.responsibility=0,e.totalRatings=0,"all"==t){if(e.totalRatings=a.getObjectLength(o)+a.getObjectLength(r),e.totalavgRating=e.getTotalRatings(o,r),a.getObjectLength(o)){e.comment.show=!0;for(var n in o)e.attitude=e.attitude+parseInt(o[n].attitude),e.understanding=e.understanding+parseInt(o[n].understanding),e.communication=e.communication+parseInt(o[n].communication),e.payment=e.payment+parseInt(o[n].payment),e.responsibility=e.responsibility+parseInt(o[n].responsibility)}if(a.getObjectLength(r)){e.comment.show=!0;for(var n in r)e.attitude=e.attitude+parseInt(r[n].attitude),e.understanding=e.understanding+parseInt(r[n].understanding),e.communication=e.communication+parseInt(r[n].communication),e.payment=e.payment+parseInt(r[n].payment),e.responsibility=e.responsibility+parseInt(r[n].responsibility)}}if("from_employer"==t&&(e.totalRatings=a.getObjectLength(o),e.totalavgRating=e.getTotalRatings(o),a.getObjectLength(o))){e.comment.show=!0;for(var n in o)e.attitude=e.attitude+parseInt(o[n].attitude),e.understanding=e.understanding+parseInt(o[n].understanding),e.communication=e.communication+parseInt(o[n].communication),e.payment=e.payment+parseInt(o[n].payment),e.responsibility=e.responsibility+parseInt(o[n].responsibility)}if("from_talents"==t&&(e.totalRatings=a.getObjectLength(r),e.totalavgRating=e.getTotalRatings(r),a.getObjectLength(r))){e.comment.show=!0;for(var n in r)e.attitude=e.attitude+parseInt(r[n].attitude),e.understanding=e.understanding+parseInt(r[n].understanding),e.communication=e.communication+parseInt(r[n].communication),e.payment=e.payment+parseInt(r[n].payment),e.responsibility=e.responsibility+parseInt(r[n].responsibility)}},window.localStorage.getItem("info")){var d=firebase.database().ref("/jobs/");d.orderByChild("userid").equalTo(JSON.parse(window.localStorage.getItem("info")).uid).on("value",function(t){e.userOpenJobs=[],e.userClosedJobs=[],e.userWorkingJobs=[];for(var a in t.val()){var o=t.val()[a];o.id=a,"end"!=t.val()[a].status&&"completed"!=t.val()[a].status||e.userClosedJobs.push(o),"working"==t.val()[a].status&&e.userWorkingJobs.push(o),"open"==t.val()[a].status&&e.userOpenJobs.push(o)}e.$$phase||e.$apply()});var p=firebase.database().ref("/contracts/");
p.orderByChild("talent_id").equalTo(JSON.parse(window.localStorage.getItem("info")).uid).on("value",function(t){e.userWorkingContracts=[],e.userEndContracts=[];for(var a in t.val()){var o=t.val()[a];o.id=a,"end"!=t.val()[a].status&&"completed"!=t.val()[a].status||e.userEndContracts.push(o),"open"==t.val()[a].status&&e.userWorkingContracts.push(o)}e.$$phase||e.$apply()})}e.availableForHiring=function(){if(a.userdata.billaddress)if(a.userdata.hourlyRateHKD)if(a.userdata.hourlyRateUSD)if(a.userdata.picture)if(a.userdata.title)if(a.userdata.location)if(a.userdata.profession){var e=firebase.database().ref();e.child("users").child(JSON.parse(window.localStorage.getItem("info")).uid).update({availableForHiring:!0})}else i.alert({title:"Required!",content:"Please set the categories."}).then(function(e){console.log("Test Alert Box")});else i.alert({title:"Required!",content:"Please set the location."}).then(function(e){console.log("Test Alert Box")});else i.alert({title:"Required!",content:"Please set the profile title."}).then(function(e){console.log("Test Alert Box")});else i.alert({title:"Required!",content:"Please set the profile picture."}).then(function(e){console.log("Test Alert Box")});else i.alert({title:"Required!",content:"Please set the USD Hour rate."}).then(function(e){console.log("Test Alert Box")});else i.alert({title:"Required!",content:"Please set the HKD hour rate."}).then(function(e){console.log("Test Alert Box")});else i.alert({title:"Required!",content:"Please set billing address."}).then(function(e){console.log("Test Alert Box")})},e.NotavailableForHiring=function(){var e=firebase.database().ref();e.child("users").child(JSON.parse(window.localStorage.getItem("info")).uid).update({availableForHiring:!1})};var u=firebase.database().ref("/projects");u.orderByChild("userid").equalTo(JSON.parse(window.localStorage.getItem("info")).uid).on("value",function(e){a.user_projects=[];for(var t in e.val()){var o=e.val()[t];o.id=t,a.user_projects.push(o)}r.hide()},function(e){console.log("The read failed: "+e.code),r.hide()});var p=firebase.database().ref("/contracts/");p.orderByChild("talent_id").equalTo(JSON.parse(window.localStorage.getItem("info")).uid).on("value",function(t){e.telentWorkingContracts=[],e.telentEndContracts=[];for(var a in t.val()){var o=t.val()[a];o.id=a,"open"==t.val()[a].status&&e.telentWorkingContracts.push(o),"end"!=t.val()[a].status&&"completed"!=t.val()[a].status||e.telentEndContracts.push(o)}e.$$phase||e.$apply()});var p=firebase.database().ref("/contracts/");p.orderByChild("employer_id").equalTo(JSON.parse(window.localStorage.getItem("info")).uid).on("value",function(t){e.employerWorkingContracts=[],e.employerEndContracts=[];for(var a in t.val()){var o=t.val()[a];o.id=a,"open"==t.val()[a].status&&e.employerWorkingContracts.push(o),"end"!=t.val()[a].status&&"completed"!=t.val()[a].status||e.employerEndContracts.push(o)}e.$$phase||e.$apply()}),e.MoreOptions=function(e,t){if(e){c.show({buttons:[{text:"Translate"}],cancelText:"Cancel",cancel:function(){},buttonClicked:function(a){if(0==a){var o=e;$("#"+t).html("<img src='img/smallloading.gif' style='height:16px;width:28px'/>");var r=window.location.origin+"/translation.php";n({method:"POST",url:r,data:{text:o},headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(e){$("#"+t).html(e.data.text)},function(e){console.log(e)})}return!0}})}},l.trackPage("My_Profile")}]},{}],19:[function(e,t,a){"use strict";function o(e){var t,a,o,r;a=new Date,t=a.getTime(),o=6e4*a.getTimezoneOffset(),r=t+o;var n=new Date(r+36e5*e);return r=new Date(r),n.toLocaleString()}t.exports=["$scope","Firebase","$rootScope","$ionicLoading","$http","$stateParams","$ionicModal","Analytics","$ionicActionSheet",function(e,t,a,r,n,i,s,l,c){e.userid=i.id,window.localStorage.getItem("info")&&(e.loggedUserId=JSON.parse(window.localStorage.getItem("info")).uid),r.show({template:"Loading..."}),s.fromTemplateUrl("stats.html",{scope:e,animation:"slide-in-up"}).then(function(t){e.modal=t}),s.fromTemplateUrl("connections.html",{scope:e,animation:"slide-in-up"}).then(function(t){e.connectionmodel=t}),e.viewStats=function(){e.modal.show()},e.viewConnection=function(){e.connectionmodel.show()},e.tabs=[{title:"About",url:"templates/views/about_view.tpl.html"},{title:"Projects",url:"templates/views/project.tpl.html"},{title:"Jobs",url:"templates/views/jobs_view.tpl.html"},{title:"Comments",url:"templates/views/comments_view.tpl.html"}],e.currentTab="templates/views/about_view.tpl.html",e.onClickTab=function(t){e.currentTab=t.url},e.isActiveTab=function(t){return t==e.currentTab},e.comment=[],e.getdevider=function(e,t){return e&&t?2:1},e.getTotalRatings=function(e,t){return e&&t?a.calculateRating(e)/a.getObjectLength(e)+a.calculateRating(t)/a.getObjectLength(t):e?a.calculateRating(e)/a.getObjectLength(e):t?a.calculateRating(t)/a.getObjectLength(t):0},e.showRatings=function(t,o,r){if(e.comment.show=!1,e.attitude=0,e.understanding=0,e.communication=0,e.payment=0,e.responsibility=0,e.totalRatings=0,"all"==t){if(e.totalRatings=a.getObjectLength(o)+a.getObjectLength(r),e.totalavgRating=e.getTotalRatings(o,r),a.getObjectLength(o)){e.comment.show=!0;for(var n in o)e.attitude=e.attitude+parseInt(o[n].attitude),e.understanding=e.understanding+parseInt(o[n].understanding),e.communication=e.communication+parseInt(o[n].communication),e.payment=e.payment+parseInt(o[n].payment),e.responsibility=e.responsibility+parseInt(o[n].responsibility)}if(a.getObjectLength(r)){e.comment.show=!0;for(var n in r)e.attitude=e.attitude+parseInt(r[n].attitude),e.understanding=e.understanding+parseInt(r[n].understanding),e.communication=e.communication+parseInt(r[n].communication),e.payment=e.payment+parseInt(r[n].payment),e.responsibility=e.responsibility+parseInt(r[n].responsibility)}}if("from_employer"==t&&(e.totalRatings=a.getObjectLength(o),e.totalavgRating=e.getTotalRatings(o),a.getObjectLength(o))){e.comment.show=!0;for(var n in o)e.attitude=e.attitude+parseInt(o[n].attitude),e.understanding=e.understanding+parseInt(o[n].understanding),e.communication=e.communication+parseInt(o[n].communication),e.payment=e.payment+parseInt(o[n].payment),e.responsibility=e.responsibility+parseInt(o[n].responsibility)}if("from_talents"==t&&(e.totalRatings=a.getObjectLength(r),e.totalavgRating=e.getTotalRatings(r),a.getObjectLength(r))){e.comment.show=!0;for(var n in r)e.attitude=e.attitude+parseInt(r[n].attitude),e.understanding=e.understanding+parseInt(r[n].understanding),e.communication=e.communication+parseInt(r[n].communication),e.payment=e.payment+parseInt(r[n].payment),e.responsibility=e.responsibility+parseInt(r[n].responsibility)}};var d=firebase.database().ref("/jobs/");d.orderByChild("userid").equalTo(e.userid).on("value",function(t){e.userOpenJobs=[],e.userClosedJobs=[],e.userWorkingJobs=[];for(var a in t.val()){var o=t.val()[a];o.id=a,"end"!=t.val()[a].status&&"completed"!=t.val()[a].status||e.userClosedJobs.push(o),"working"==t.val()[a].status&&e.userWorkingJobs.push(o),"open"==t.val()[a].status&&e.userOpenJobs.push(o)}e.$$phase||e.$apply()});var p=firebase.database().ref("/contracts/");p.orderByChild("talent_id").equalTo(e.userid).on("value",function(t){e.telentWorkingContracts=[],e.telentEndContracts=[];for(var a in t.val()){var o=t.val()[a];o.id=a,"open"==t.val()[a].status&&e.telentWorkingContracts.push(o),"end"!=t.val()[a].status&&"completed"!=t.val()[a].status||e.telentEndContracts.push(o)}e.$$phase||e.$apply()});var p=firebase.database().ref("/contracts/");p.orderByChild("employer_id").equalTo(e.userid).on("value",function(t){e.employerWorkingContracts=[],e.employerEndContracts=[];for(var a in t.val()){console.log(t.val()[a].status);var o=t.val()[a];o.id=a,"open"==t.val()[a].status&&e.employerWorkingContracts.push(o),"end"!=t.val()[a].status&&"completed"!=t.val()[a].status||e.employerEndContracts.push(o)}e.$$phase||e.$apply()});var u=firebase.database().ref("/users/"+e.userid);u.on("value",function(t){a.viewUser=t.val(),a.viewUser.timeoffset&&(e.userLocalTime=new Date(o(a.viewUser.timeoffset)))});var u=firebase.database().ref("/projects");u.orderByChild("userid").equalTo(e.userid).once("value",function(e){a.user_projects=[];for(var t in e.val()){var o=e.val()[t];o.id=t,a.user_projects.push(o)}r.hide()},function(e){console.log("The read failed: "+e.code),r.hide()});var u=firebase.database().ref("/groups");if(u.orderByChild("owner_userid").equalTo(e.userid).once("value",function(t){e.user_groups=t.val(),r.hide()},function(e){console.log("The read failed: "+e.code),r.hide()}),e.like=function(){if(e.userid!=e.loggedUserId){var t=firebase.database().ref("/users/"+e.userid+"/liker");t.orderByChild("userid").equalTo(JSON.parse(window.localStorage.getItem("info")).uid).once("value",function(a){if(null==a.val()){t.push({userid:JSON.parse(window.localStorage.getItem("info")).uid});var o=firebase.database().ref("/users/"+JSON.parse(window.localStorage.getItem("info")).uid+"/likes");o.orderByChild("userid").equalTo(JSON.parse(window.localStorage.getItem("info")).uid).once("value",function(t){null==t.val()&&o.push({userid:e.userid})})}})}},e.unlike=function(){if(e.userid!=e.loggedUserId){var t=firebase.database().ref("/users/"+e.userid+"/liker");t.orderByChild("userid").equalTo(JSON.parse(window.localStorage.getItem("info")).uid).once("value",function(t){if(t.val())for(var a in t.val()){var o=firebase.database().ref("/users/"+e.userid+"/liker/"+a);o.remove();var r=firebase.database().ref("/users/"+JSON.parse(window.localStorage.getItem("info")).uid+"/likes");r.orderByChild("userid").equalTo(e.userid).once("value",function(e){if(e.val())for(var t in e.val()){var a=firebase.database().ref("/users/"+JSON.parse(window.localStorage.getItem("info")).uid+"/likes/"+t);a.remove()}})}})}},e.follow=function(){if(e.userid!=e.loggedUserId){var t=firebase.database().ref("/users/"+e.userid+"/followers");t.orderByChild("userid").equalTo(JSON.parse(window.localStorage.getItem("info")).uid).once("value",function(a){if(null==a.val()){t.push({userid:JSON.parse(window.localStorage.getItem("info")).uid});var o=firebase.database().ref("/users/"+JSON.parse(window.localStorage.getItem("info")).uid+"/follows");o.orderByChild("userid").equalTo(JSON.parse(window.localStorage.getItem("info")).uid).once("value",function(t){null==t.val()&&o.push({userid:e.userid})})}})}},e.unfollow=function(){if(e.userid!=e.loggedUserId){var t=firebase.database().ref("/users/"+e.userid+"/followers");t.orderByChild("userid").equalTo(JSON.parse(window.localStorage.getItem("info")).uid).once("value",function(t){if(t.val())for(var a in t.val()){var o=firebase.database().ref("/users/"+e.userid+"/followers/"+a);o.remove();var r=firebase.database().ref("/users/"+JSON.parse(window.localStorage.getItem("info")).uid+"/follows");r.orderByChild("userid").equalTo(e.userid).once("value",function(e){if(e.val())for(var t in e.val()){var a=firebase.database().ref("/users/"+JSON.parse(window.localStorage.getItem("info")).uid+"/follows/"+t);a.remove()}})}})}},window.localStorage.getItem("info")){var u=firebase.database().ref("/users/"+e.userid+"/views");u.orderByChild("userid").equalTo(JSON.parse(window.localStorage.getItem("info")).uid).once("value",function(t){if(null==t.val()){u.push({userid:JSON.parse(window.localStorage.getItem("info")).uid});var a=firebase.database().ref("/views/profile/");a.push({userid:e.userid})}})}e.MoreOptions=function(e,t){if(e){c.show({buttons:[{text:"Translate"}],cancelText:"Cancel",cancel:function(){},buttonClicked:function(a){if(0==a){var o=e;$("#"+t).html("<img src='img/smallloading.gif' style='height:16px;width:28px'/>");var r=window.location.origin+"/translation.php";n({method:"POST",url:r,data:{text:o},headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(e){$("#"+t).html(e.data.text)},function(e){console.log(e)})}return!0}})}},l.trackPage("View_Profile")}]},{}],20:[function(e,t,a){"use strict";t.exports=["$scope","$rootScope","$ionicLoading","$location","$stateParams","$ionicModal","$ionicPopup","$ionicActionSheet","ngDialog","$http","Analytics",function(e,t,a,o,r,n,i,s,l,c,d){if(e.currentURL=window.location.href,e.projectid=r.id,window.localStorage.getItem("info")&&(e.loggedUserId=JSON.parse(window.localStorage.getItem("info")).uid),e.projectid){a.show({template:"Loading..."});var p=firebase.database().ref("/projects/"+e.projectid);p.on("value",function(o){if(e.project=o.val(),a.hide(),e.metaimg="",e.project.images&&(e.metaimg=e.project.images[0]),$("head").append('<meta property="og:title" content="'+e.project.projectTitle+'" /><meta property="og:type" content="article" /><meta property="og:url" content="'+e.currentURL+'" /><meta property="og:image" content="'+e.metaimg+'" /><meta property="og:description" content="'+e.project.description+'" /> <meta property="og:site_name" content="www.worklidate.com" />'),!e.relatedprojects){e.randomMum=Math.floor(10*Math.random()+1),e.relatedprojects=[];for(var r in e.project.categories){var n=firebase.database().ref("/search/projects");n.once("value",function(a){e.randomMum=[];var o=t.getObjectLength(a.val());e.randomMum.push(Math.floor(Math.random()*o+1)),e.randomMum.push(Math.floor(Math.random()*o+1)),e.randomMum.push(Math.floor(Math.random()*o+1)),e.randomMum.push(Math.floor(Math.random()*o+1)),e.randomMum.push(Math.floor(Math.random()*o+1)),e.randomMum.push(Math.floor(Math.random()*o+1)),e.randomMum.push(Math.floor(Math.random()*o+1));for(var r in a.val()){var n=Object.keys(a.val()).indexOf(r);e.randomMum.indexOf(n)>-1&&a.val()[r].project_id!=e.projectid&&e.relatedprojects.length<3&&e.relatedprojects.push(a.val()[r])}})}setTimeout(function(){console.log(e.relatedprojects),console.log(e.randomMum)},5e3)}if(o.val()&&e.projectid){var i=firebase.database().ref("/projects/"+e.projectid+"/views");i.orderByChild("userid").equalTo(JSON.parse(window.localStorage.getItem("info")).uid).once("value",function(t){if(null==t.val()){i.push({userid:JSON.parse(window.localStorage.getItem("info")).uid});var a=firebase.database().ref("/views/project");a.push({projectid:e.projectid})}})}})}e.like=function(t){if(e.projectid){var a=firebase.database().ref("/projects/"+e.projectid+"/likes");a.orderByChild("userid").equalTo(JSON.parse(window.localStorage.getItem("info")).uid).once("value",function(o){if(null==o.val()){a.push({userid:JSON.parse(window.localStorage.getItem("info")).uid});var r=firebase.database().ref("/users/"+JSON.parse(window.localStorage.getItem("info")).uid+"/projectlikes");r.orderByChild("projectid").equalTo(e.projectid).once("value",function(a){if(null==a.val()){r.push({projectid:e.projectid});var o=firebase.database().ref("/users/"+t+"/project_likers");o.push({projectid:e.projectid,userid:JSON.parse(window.localStorage.getItem("info")).uid})}})}})}},e.unlike=function(t){if(e.projectid){var a=firebase.database().ref("/projects/"+e.projectid+"/likes");a.orderByChild("userid").equalTo(JSON.parse(window.localStorage.getItem("info")).uid).once("value",function(a){if(a.val())for(var o in a.val()){var r=firebase.database().ref("/projects/"+e.projectid+"/likes/"+o);r.remove();var n=firebase.database().ref("/users/"+JSON.parse(window.localStorage.getItem("info")).uid+"/projectlikes");n.orderByChild("projectid").equalTo(e.projectid).once("value",function(e){if(e.val())for(var t in e.val()){var a=firebase.database().ref("/users/"+JSON.parse(window.localStorage.getItem("info")).uid+"/projectlikes/"+t);a.remove()}});var i=firebase.database().ref("/users/"+t+"/project_likers");i.orderByChild("projectid").equalTo(e.projectid).once("value",function(e){if(e.val())for(var a in e.val())if(e.val()[a].userid==JSON.parse(window.localStorage.getItem("info")).uid){var o=firebase.database().ref("/users/"+t+"/project_likers/"+a);o.remove()}})}})}},e.data=[],e.send=function(){if(e.data.message){var t={userid:JSON.parse(window.localStorage.getItem("info")).uid,comment:e.data.message,publishAt:new Date},a=JSON.parse(angular.toJson(t)),o=firebase.database().ref("/projects/"+e.projectid+"/comments");o.push(a);var t={projectid:e.projectid,comment:e.data.message,publishAt:new Date,type:"project"},a=JSON.parse(angular.toJson(t)),r=firebase.database().ref("/users/"+JSON.parse(window.localStorage.getItem("info")).uid+"/comments");r.push(a),e.data.message=[]}},n.fromTemplateUrl("share.html",{scope:e,animation:"slide-in-up"}).then(function(t){e.modal=t}),e.share=function(){e.modal.show()},e.showLikers=function(e){t.likesData=e,l.open({template:"templates/likes.html",className:"ngdialog-theme-default"})},e.moreoptions=function(e,t){s.show({buttons:[{text:"Translate"}],buttonClicked:function(t){if(0==t){var a=$("#"+e).html();$("#"+e).html("<img src='img/smallloading.gif' style='height:16px;width:28px'/>");var o=window.location.origin+"/translation.php";c({method:"POST",url:o,data:{text:a},headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(t){$("#"+e).html(t.data.text)},function(e){console.log(e)})}return!0}})},e.supported=!1,e.success=function(){e.modal.hide()},e.fail=function(e){console.error("Error!",e)},d.trackPage("Project_Details")}]},{}],21:[function(e,t,a){"use strict";t.exports=["$scope","$ionicModal","$location","$rootScope","Firebase","$http","$ionicPopup","$stateParams","$ionicLoading","$ionicActionSheet","Analytics",function(e,t,a,o,r,n,i,s,l,c,d){if(e.proposalId=s.id,o.checkLogin(),s.id){l.show({template:"Loading..."});var p=firebase.database().ref("/jobproposals/"+s.id);p.on("value",function(t){if(e.proposal=t.val(),t.val()){var a=firebase.database().ref("/jobs/"+e.proposal.jobid);a.on("value",function(t){if(e.job=t.val(),e.job){var a=firebase.database().ref("/users/"+e.job.userid);a.on("value",function(t){l.hide(),e.employer=t.val(),setTimeout(function(){var t=document.getElementById("job-details-message-list"+e.proposalId);t.scrollTop=t.scrollHeight},1e3)})}else{var o=history.length;history.go(-o)}})}else{var r=firebase.database().ref("/proposalid_contractid").orderByChild("proposalid").equalTo(e.proposalId);r.once("value",function(e){if(e.val())for(var t in e.val()){l.hide();var a=i.alert({title:"Contract Started.",template:"This contract is start by client. You will redirect to contract screen."});a.then(function(a){var r=history.length;history.go(-r),window.location.replace("#/app/contract/details/"+e.val()[t].contractid),o.reloadContractPage=!0})}else{var r=history.length;history.go(-r),window.location.replace("#/app/mainpage"),l.hide()}})}})}e.proposalchat=[],e.sendMessage=function(){if(e.proposalchat.message){var t=new Date,a=JSON.parse(angular.toJson({message:e.proposalchat.message,date:t,type:"talent",status:"unread"})),r=firebase.database().ref("/jobproposals/"+s.id+"/message");r.push(a);var n=JSON.parse(angular.toJson({date:t,message:o.userdata.name+'(Talent) sent you a message on proposal of "'+e.job.title+'"',type:"contractmessage",sender:o.loggedUserId,senderName:o.userdata.name,status:"unread"})),i=firebase.database().ref("/notification/"+e.proposal.employer_id);i.push(n),e.proposalchat.message="";var l=document.getElementById("job-details-message-list"+e.proposalId);l.scrollTop=l.scrollHeight}},e.acceptproposal=function(){var t=firebase.database().ref("/jobproposals/"+s.id+"/acceptedbytalent");t.set("1");var a=new Date,r=JSON.parse(angular.toJson({message:"Proposal accepted.  *",date:a,type:"talent",system_message:"true",status:"unread"})),n=firebase.database().ref("/jobproposals/"+s.id+"/message");n.push(r);var i=JSON.parse(angular.toJson({date:a,message:o.userdata.name+'(Talent) accepted the proposal of "'+e.job.title+'"',type:"contractmessage",sender:o.loggedUserId,senderName:o.userdata.name,status:"unread"})),l=firebase.database().ref("/notification/"+e.proposal.employer_id);l.push(i)},e.messageMoreOptions=function(e,t,a){c.show({buttons:[{text:"Translate"}],cancelText:"Cancel",cancel:function(){},buttonClicked:function(t){if(0==t){var o=$("#"+e+a).html();$("#"+e+a).html("<img src='img/smallloading.gif' style='height:16px;width:28px'/>");var r=window.location.origin+"/translation.php";n({method:"POST",url:r,data:{text:o},headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(t){$("#"+e+a).html(t.data.text)},function(e){console.log(e)})}return!0}})},e.MoreOptions=function(e,t){if(e){c.show({buttons:[{text:"Translate"}],cancelText:"Cancel",cancel:function(){},buttonClicked:function(e){if(0==e){$("#"+t).html("<img src='img/smallloading.gif' style='height:16px;width:28px'/>");var a=window.location.origin+"/translation.php";n({method:"POST",url:a,data:{text:text},headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(e){$("#"+t).html(e.data.text)},function(e){console.log(e)})}return!0}})}},d.trackPage("Proposal_Details_Talent_View")}]},{}],22:[function(e,t,a){"use strict";t.exports=["$scope","$ionicModal","$rootScope","Firebase","$ionicPopup","$stateParams","$ionicLoading","Analytics",function(e,t,a,o,r,n,i,s){if(a.checkLogin(),n.id){i.show({template:"Loading..."});var l=firebase.database().ref("/jobproposals/").orderByChild("jobid").equalTo(n.id);l.on("value",function(t){i.hide(),e.proposals=t.val(),e.$$phase||e.$apply()});var c=firebase.database().ref("/jobs/"+n.id);c.once("value",function(t){e.job=t.val(),e.$$phase||e.$apply()})}e.telentWorkingContracts=[],e.telentEndContracts=[],e.getJobStatus=function(t){e.telentWorkingContracts[t]=0,e.telentEndContracts[t]=0;var a=firebase.database().ref("/contracts/");a.orderByChild("talent_id").equalTo(t).once("value",function(a){for(var o in a.val())"open"==a.val()[o].status&&(e.telentWorkingContracts[t]=e.telentWorkingContracts[t]+1),"end"==a.val()[o].status&&(e.telentEndContracts[t]=e.telentEndContracts[t]+1);e.$$phase||e.$apply()})},s.trackPage("Proposal_List")}]},{}],23:[function(e,t,a){"use strict";t.exports=["$scope","$stateParams","$location","$rootScope","Analytics",function(e,t,a,o,r){o.checkLogin(),t.type&&(e.searchType=t.type,e.searchoption=t.type),t.id?e.id=t.id:e.id=0,e.show_filters=function(e){"Project"==e||"Job"==e?a.path("/app/search/"+e):a.path("/app/searchresult/"+e+"/")},e.show_filters_2=function(r){var n=0;o.categories.forEach(function(i,s){r==i.parent_id&&(n=1),o.categories.length==s+1&&(0==n?a.path("/app/searchresult/"+t.type+"/"+r):a.path("/app/search/"+e.searchType+"/"+r))})},e.mainSearch=function(e,t){a.path("/app/searchresult/"+t+"/"+e)},r.trackPage("Search")}]},{}],24:[function(e,t,a){"use strict";t.exports=["$scope","$ionicModal","$stateParams","$rootScope","$location","$filter","$ionicLoading","Analytics",function(e,t,a,o,r,n,i,s){if(e.type=a.type,e.id=a.id,e.searched_group_result=[],e.searchFilters=[],e.applyMultiCat=[],e.searchFilters.categories=[],o.checkLogin(),t.fromTemplateUrl("sort.html",{scope:e,animation:"slide-in-up"}).then(function(t){e.model=t}),e.viewSorts=function(){e.model.show()},e.getAllJob=function(t){e.mainsearchType=1,e.searchFilters.location=e.id,e.searched_group_result=[];var a=firebase.database().ref("/jobs/");a.orderByChild("viewtype").equalTo("users").once("value",function(a){e.allJobs=[];for(var r in a.val()){var n=a.val()[r];n.id=r,n.publishAt=o.convertToDate(a.val()[r].publishAt),e.pushJOBdata(n),e.$$phase||e.$apply()}setTimeout(function(){"filterCategory"==t?e.applyFilters():(i.hide(),e.timeDuration(e.searchFilters.timeDuration))},3e3)})},e.applyFilters=function(){if("all"==e.searchFilters.sort&&"all"==e.searchFilters.timeDuration&&""==e.searchFilters.jobAveragetEmployer&&""==e.searchFilters.experienceLevel&&""==e.searchFilters.joblength&&""==e.searchFilters.jobStatus2&&""==e.searchFilters.jobCurrency&&"-publishAt"==e.searchFilters.orderBy&&"50"==e.searchFilters.jobClienthistory&&"10000"==e.searchFilters.jobBudget&&e.searchFilters.categories==[])o.JobFilterOn=!1,i.show({template:"Searching..."}),e.reset(),e.getAllJob();else if(i.show({template:"Searching..."}),o.JobFilterOn=!0,window.localStorage.setItem("job_sortdata",e.searchFilters.sort),window.localStorage.setItem("job_timeDuration",e.searchFilters.timeDuration),window.localStorage.setItem("job_jobAveragetEmployer",e.searchFilters.jobAveragetEmployer),window.localStorage.setItem("job_experienceLevel",e.searchFilters.experienceLevel),window.localStorage.setItem("job_joblength",e.searchFilters.joblength),window.localStorage.setItem("job_jobStatus2",e.searchFilters.jobStatus2),window.localStorage.setItem("job_jobCurrency",e.searchFilters.jobCurrency),window.localStorage.setItem("job_orderBy",e.searchFilters.orderBy),window.localStorage.setItem("job_jobClienthistory",e.searchFilters.jobClienthistory),window.localStorage.setItem("job_jobBudget",e.searchFilters.jobBudget),e.searchFilters.categories)if(e.searchFilters.categories.length>0)if(e.allJobs){window.localStorage.setItem("job_categories",JSON.stringify(e.searchFilters.categories)),e.searched_group_result=[];var t=[];console.log(e.allJobs),e.searchFilters.categories.forEach(function(a,o){console.log("1"),e.allJobs.forEach(function(o){t.indexOf(o.id)<0&&(console.log("2"),o.categories&&o.categories.forEach(function(t){console.log("3 : catPrroject.name : searchCat"),t.name==a.name&&e.searched_group_result.push(o)}))}),o==e.searchFilters.categories.length-1&&setTimeout(function(){e.timeDuration(e.searchFilters.timeDuration)},1e3)})}else e.getAllJob("filterCategory");else e.getAllJob();else e.getAllJob()},"Job"==e.type&&(window.localStorage.getItem("job_sortdata")?(console.log("job_sortdata"),e.searchFilters.sort=window.localStorage.getItem("job_sortdata"),e.searchFilters.timeDuration=window.localStorage.getItem("job_timeDuration"),e.searchFilters.jobAveragetEmployer=window.localStorage.getItem("job_jobAveragetEmployer"),e.searchFilters.experienceLevel=window.localStorage.getItem("job_experienceLevel"),e.searchFilters.joblength=window.localStorage.getItem("job_joblength"),e.searchFilters.jobStatus2=window.localStorage.getItem("job_jobStatus2"),e.searchFilters.jobCurrency=window.localStorage.getItem("job_jobCurrency"),e.searchFilters.orderBy=window.localStorage.getItem("job_orderBy"),e.searchFilters.jobClienthistory=window.localStorage.getItem("job_jobClienthistory"),e.searchFilters.jobBudget=window.localStorage.getItem("job_jobBudget"),window.localStorage.getItem("job_categories")&&(e.searchFilters.categories=JSON.parse(window.localStorage.getItem("job_categories"))),e.applyFilters(),console.log(e.searchFilters)):(e.searchFilters.sort="all",e.searchFilters.timeDuration="all",e.searchFilters.jobAveragetEmployer="",e.searchFilters.experienceLevel="",e.searchFilters.joblength="",e.searchFilters.jobStatus2="",e.searchFilters.jobCurrency="",e.searchFilters.orderBy="-publishAt",e.searchFilters.jobClienthistory="50",e.searchFilters.jobBudget="10000",e.getAllJob())),e.reset=function(){o.JobFilterOn=!1,e.searchFilters.sort="all",e.searchFilters.timeDuration="all",e.searchFilters.jobAveragetEmployer="",e.searchFilters.experienceLevel="",e.searchFilters.joblength="",e.searchFilters.jobStatus2="",e.searchFilters.jobCurrency="",e.searchFilters.orderBy="-publishAt",e.searchFilters.jobClienthistory="50",e.searchFilters.jobBudget="10000",window.localStorage.removeItem("job_sortdata"),window.localStorage.removeItem("job_timeDuration"),window.localStorage.removeItem("job_jobAveragetEmployer"),window.localStorage.removeItem("job_experienceLevel"),window.localStorage.removeItem("job_joblength"),window.localStorage.removeItem("job_jobStatus2"),window.localStorage.removeItem("job_jobCurrency"),window.localStorage.removeItem("job_orderBy"),window.localStorage.removeItem("job_jobClienthistory"),window.localStorage.removeItem("job_jobBudget"),window.localStorage.removeItem("job_categories"),e.searchFilters.categories=[]},i.show({template:"Searching..."}),parseInt(e.id)||"Project"!=e.type){if(e.mainsearchType=2,e.searchFilters.catId=e.id,a.type&&"Project"==e.type){var l=firebase.database().ref("/categoryprojects/"+e.searchFilters.catId);l.once("value",function(t){e.allProjects=[],e.searched_group_result=[];for(var a in t.val()){var r=firebase.database().ref("/projects/"+t.val()[a].project_id);r.once("value",function(t){if(t.val()){var a=t.val();a.id=t.key,t.val().comments?a.commnetscount=o.getObjectLength(t.val().comments):a.commnetscount=0,t.val().views?a.viewscount=o.getObjectLength(t.val().views):a.viewscount=0,e.searched_group_result.push(a),e.allProjects.push(a)}})}setTimeout(function(){i.hide(),e.sortdata("select")},3e3)}),s.trackPage("Search_Project")}}else{e.mainsearchType=1,e.searchFilters.location=e.id;var l=firebase.database().ref("/projects/");l.once("value",function(t){e.allProjects=[];for(var a in t.val()){var r=t.val()[a];r.id=a,t.val()[a].comments?r.commnetscount=o.getObjectLength(t.val()[a].comments):r.commnetscount=0,t.val()[a].views?r.viewscount=o.getObjectLength(t.val()[a].views):r.viewscount=0,e.searched_group_result.push(r),e.allProjects.push(r)}setTimeout(function(){i.hide(),e.sortdata("select")},3e3)}),s.trackPage("Search_Project")}if("Group"==e.type){var l=firebase.database().ref("/groups/");l.once("value",function(t){e.groups=[];for(var a in t.val()){var r=t.val()[a];r.id=a,t.val()[a].members?r.memberscount=o.getObjectLength(t.val()[a].members):r.memberscount=0,e.searched_group_result.push(r),e.groups.push(r)}setTimeout(function(){i.hide()},3e3)}),s.trackPage("Search_Group")}"People"==e.type&&(i.hide(),s.trackPage("Search_People")),e.pushJOBdata=function(t){var a=firebase.database().ref("/users/"+t.userid);a.once("value",function(a){a.val()&&(t.user=a.val(),t.clienthistory=o.getObjectLength(a.val().jobs),t.ratings=o.calculateRating(a.val().asEmployerfeedback)/o.getObjectLength(a.val().asEmployerfeedback),e.searched_group_result.push(t),e.allJobs.push(t),e.$$phase||e.$apply())})},e.jobfilters=[],e.jobfilters.budget=[],e.jobfilters.Clienthistory=[],e.jobfilters.AveragetEmployer=[],e.jobfilters.budget.from=0,e.jobfilters.budget.to=1e5,e.jobfilters.Clienthistory.from=0,e.jobfilters.Clienthistory.to=50,e.jobfilters.AveragetEmployer.from=0,e.jobfilters.AveragetEmployer.to=5,e.jobAveragetEmployerSort=function(t){e.jobfilters.AveragetEmployer.to=t,e.jobSort()},e.jobClienthistorySort=function(t){e.jobfilters.Clienthistory=t,e.jobSort()},e.jobBudgetSort=function(t){e.jobfilters.budget=t,e.jobSort()},e.jobSort=function(){e.searched_group_result=[],e.allJobs.forEach(function(t,a){t.budget>=e.jobfilters.budget.from&&t.budget<=e.jobfilters.budget.to&&t.clienthistory>=e.jobfilters.Clienthistory.from&&t.clienthistory<=e.jobfilters.Clienthistory.to&&t.ratings>=e.jobfilters.AveragetEmployer.from&&t.ratings<=e.jobfilters.AveragetEmployer.to&&e.searched_group_result.push(t)}),e.$$phase||e.$apply()},e.groupSort=function(){e.searched_group_result=[],e.groups.forEach(function(t){t.memberscount>=e.searchFilters.groupsmenbersFrom&&t.memberscount<=e.searchFilters.groupsmenbersUpto&&e.searched_group_result.push(t)})},e.sortdata=function(t){i.show({template:"Searching..."}),"latest"!=t&&"select"!=t&&"all"!=t||(e.searched_group_result=n("orderBy")(e.searched_group_result,"-publishAt")),"mostcommented"==t&&(e.searched_group_result=n("orderBy")(e.searched_group_result,"-commnetscount")),"mostviewed"==t&&(e.searched_group_result=n("orderBy")(e.searched_group_result,"-viewscount")),setTimeout(function(){e.sortByJobStatus(e.searchFilters.jobStatus2),i.hide()},100)},e.timeDuration=function(t){if(i.show({template:"Searching..."}),"today"==e.searchFilters.timeDuration){var a=n("date")(new Date,"dd/MM/yy");e.searched_group_result=[],e.allProjects.forEach(function(t){a==n("date")(t.publishAt,"dd/MM/yy")&&e.searched_group_result.push(t)})}if("this_week"==e.searchFilters.timeDuration){var a=n("date")(new Date,"dd/MM/yy"),o=n("date")(new Date,"dd"),r=n("date")(new Date,"MM"),s=n("date")(new Date,"yy"),l=(new Date).getDay();e.searched_group_result=[],e.allProjects.forEach(function(t){s==n("date")(t.publishAt,"yy")&&r==n("date")(t.publishAt,"MM")&&o-n("date")(t.publishAt,"dd")<=l&&e.searched_group_result.push(t)})}"customer_range"==e.searchFilters.timeDuration&&e.searchFilters.customer_rangeto&&e.searchFilters.customer_rangefrom&&(e.searched_group_result=[],
e.allProjects.forEach(function(t){var a=CompareDate(e.searchFilters.customer_rangeto,n("date")(t.publishAt,"dd-MM-yyyy")),o=CompareDate(e.searchFilters.customer_rangefrom,n("date")(t.publishAt,"dd-MM-yyyy"));a&&!o&&e.searched_group_result.push(t)})),setTimeout(function(){e.sortdata(e.searchFilters.sort),i.hide()},3e3)},e.sortByJobStatus=function(t){e.searched_group_result=[],""==t?e.allJobs.forEach(function(t){e.searched_group_result.push(t)}):e.allJobs.forEach(function(a){a.status==t&&e.searched_group_result.push(a)})}}]},{}],25:[function(e,t,a){"use strict";t.exports=["$scope","$stateParams",function(e,t){}]},{}],26:[function(e,t,a){"use strict";t.exports=["$scope","Firebase","$rootScope","$state","Analytics","$ionicModal","$ionicPopup",function(e,t,a,o,r,n,i){a.checkLogin(),e.userSettings=[],n.fromTemplateUrl("create_ticket.html",{scope:e,animation:"slide-in-up"}).then(function(t){e.modal=t}),e.openNewTicket=function(){e.modal.show()};var s=firebase.database().ref("/categories");s.orderByChild("parent_id").equalTo(0).once("value",function(t){e.category_level_1=[];for(var a in t.val())if(0==t.val()[a].parent_id){var o=t.val()[a];o.id=a,e.category_level_1.push(o)}var r=firebase.database().ref("/users/"+JSON.parse(window.localStorage.getItem("info")).uid+"/interested_categories");r.once("value",function(t){setTimeout(function(){for(var a in t.val())e.userSettings.push(t.val()[a].id),$("#category"+t.val()[a].id).addClass("checked"),$("#category"+t.val()[a].id).removeClass("unchecked");e.$$phase||e.$apply()},1e3)})}),e.settingBack=function(){o.go("app.mainpage"),location.reload()},e.setLanguagePreference=function(e){a.refreshHomePage=!0;var t=firebase.database().ref("/users/"+JSON.parse(window.localStorage.getItem("info")).uid+"/languagePreference");t.set({languagePreference:e})},e.getCategories=function(e){$("#category"+e).toggle("show")},e.markCategory=function(t,o){if(a.refreshHomePage=!0,0==e.userSettings.length){e.userSettings.push(t),$("#category"+t).addClass("checked"),$("#category"+t).removeClass("unchecked");var r=firebase.database().ref("/users/"+JSON.parse(window.localStorage.getItem("info")).uid+"/interested_categories"),n=JSON.parse(angular.toJson(o));r.push(n)}else{var i=!0;e.userSettings.forEach(function(a,r){if(a==t){$("#category"+t).addClass("unchecked"),$("#category"+t).removeClass("checked"),e.userSettings.splice(r,1),i=!1;firebase.database().ref("/users/"+JSON.parse(window.localStorage.getItem("info")).uid+"/interested_categories").orderByChild("id").equalTo(t).once("value",function(e){for(var t in e.val()){var a=firebase.database().ref("/users/"+JSON.parse(window.localStorage.getItem("info")).uid+"/interested_categories/"+t);a.remove()}})}setTimeout(function(){if(r==e.userSettings.length-1&&1==i){e.userSettings.push(t),$("#category"+t).addClass("checked"),$("#category"+t).removeClass("unchecked");var a=firebase.database().ref("/users/"+JSON.parse(window.localStorage.getItem("info")).uid+"/interested_categories"),n=JSON.parse(angular.toJson(o));a.push(n)}},10)})}},e.data=[],e.createTicket=function(){if(e.data.feedback){var t=firebase.database().ref("/feedbackTicketsQuestionPrivate"),a={};a.publishAt=new Date,a.issue="",a.status="open",a.feedback=e.data.feedback,a.userid=JSON.parse(window.localStorage.getItem("info")).uid;var o=JSON.parse(angular.toJson(a));t.push(o),i.alert({title:"Worklidate",content:"Thank you for getting in touch!.\n Have a great day ahead!."}).then(function(t){e.data=[]}),e.modal.hide()}},r.trackPage("Settings")}]},{}],27:[function(e,t,a){"use strict";t.exports=["$scope","Firebase","$state","$rootScope","$ionicLoading","$ionicModal","$http","$ionicPopup","Analytics",function(e,t,a,o,r,n,i,s,l){o.checkLogin(),o.mapdetails=null,e.locationVarify=!1,e.userdata=[],n.fromTemplateUrl("interested_category.html",{scope:e,animation:"slide-in-up"}).then(function(t){e.modal=t}),e.validateLocation=function(t){navigator.geolocation&&navigator.geolocation.getCurrentPosition(function(a){e.position=a.coords,e.locationVarify=!1,e.position&&setTimeout(function(){var a=e.position.latitude,r=e.position.longitude;if("html"==t&&o.mapdetails){var n=o.mapdetails.geometry.location.lat(),i=o.mapdetails.geometry.location.lng(),s=parseInt(n)-parseInt(a),l=parseInt(i)-parseInt(r);s<=1&&l<=1?e.locationVarify=!0:e.locationVarify=!1,e.$$phase||e.$apply()}if("onload"==t){var c;c=new google.maps.Geocoder;var d=new google.maps.LatLng(a,r);c.geocode({latLng:d},function(t,a){if(a==google.maps.GeocoderStatus.OK&&t[0]){var o=t[0].formatted_address,r=o.split(",");count=r.length,country=r[count-1].replace(/[0-9]/g,""),state=r[count-2].replace(/[0-9]/g,""),city=r[count-3].replace(/[0-9]/g,""),e.userdata.location=city+", "+state+", "+country,e.locationVarify=!0}})}},1e3)})},e.next=function(){r.show({template:"Loading..."});var t=firebase.database().ref("/invitationcodes/");t.orderByChild("code").equalTo(e.userdata.invitationcode).on("value",function(t){if(t.val()&&null!=t.val())for(var a in t.val())"used"!=t.val()[a].status&&"open"!=t.val()[a].status||t.val()[a].code!=e.userdata.invitationcode||(e.invitationcodeKey=a,e.modal.show(),r.hide());else r.hide(),s.alert({title:"Invitation Code",content:"Invalid Invitation Code."})})},e.signup=function(t){e.modal.hide(),r.show({template:"Loading..."});var o=new Date,n=(new Date).getTimezoneOffset(),i=firebase.database().ref();firebase.auth().createUserWithEmailAndPassword(t.email,t.password).then(function(l){var c=t.location.split(","),d=JSON.parse(angular.toJson({provider:"email&pass",name:t.firstname+" "+t.lastname,timezone:t.timezone,email:t.email,location:t.location,firstname:t.firstname,lastname:t.lastname,interested_categories:t.interested_categories,locationVerified:e.locationVarify,signUpDate:o,timeoffset:n,accountStatus:"pending",invitationcode:t.invitationcode}));c[2]&&(d.country=c[2].split(" ").join("").replace(/[0-9]/g,"")),c[1]&&(d.state=c[1].split(" ").join("").replace(/[0-9]/g,"")),c[0]&&(d.city=c[0].split(" ").join("").replace(/[0-9]/g,"")),i.child("users").child(l.uid).set(d);var p=firebase.database().ref("/search/users"),u=[];t.interested_categories&&t.interested_categories.forEach(function(e){u.push(e.name)});var m=[];t.categories&&t.categories.forEach(function(e){m.push(e.id)}),firebase.database().ref("/invitationcodes/"+e.invitationcodeKey+"/status").set("registered"),firebase.database().ref("/invitationcodes/"+e.invitationcodeKey+"/userid").set(l.uid);p.push({userid:l.uid,title:(t.firstname+" "+t.lastname).toLowerCase(),category:u.join(),location:t.location,categoryid:m.join(),signUpDate:d.signUpDate});l.sendEmailVerification(),r.hide();var f=s.show({template:"<b>Account created successfully. Please confirm your email address.</b>",title:"Worklidate",subTitle:"",scope:e,buttons:[{text:"OK",onTap:function(e){f.close(),a.go("app.login"),location.reload()}},{text:"Resend Email",type:"button-positive",onTap:function(e){l.sendEmailVerification(),f.close(),a.go("app.login"),location.reload()}}]})},function(e){e.code,e.message;r.hide(),alert(e.message)})},e.userSettings=[];var c=firebase.database().ref("/categories");c.orderByChild("parent_id").equalTo(0).once("value",function(t){e.category_level_1=[];for(var a in t.val())if(0==t.val()[a].parent_id){var o=t.val()[a];o.id=a,e.category_level_1.push(o)}}),e.getCategories=function(e){$("#category"+e).toggle("show")},e.markCategory=function(t,a){if(0==e.userSettings.length)e.userSettings.push(t),$("#category"+t).addClass("checked"),$("#category"+t).removeClass("unchecked"),e.userdata.interested_categories=[],e.userdata.interested_categories.push(a);else{var o=!0;e.userSettings.forEach(function(r,n){r==t&&($("#category"+t).addClass("unchecked"),$("#category"+t).removeClass("checked"),e.userSettings.splice(n,1),o=!1,e.userdata.interested_categories.splice(n,1)),setTimeout(function(){n==e.userSettings.length-1&&1==o&&(e.userSettings.push(t),$("#category"+t).addClass("checked"),$("#category"+t).removeClass("unchecked"),e.userdata.interested_categories.push(a)),e.$$phase||e.$apply()},10)})}},l.trackPage("SignUp")}]},{}],28:[function(e,t,a){"use strict";t.exports=["$scope",function(e){}]},{}],29:[function(t,a,o){"use strict";a.exports=["$scope","$http","$ionicModal","$rootScope","Firebase","$ionicPopup","$stateParams","$ionicLoading","$location","$timeout",function(t,a,o,r,n,i,s,l,c,d){if(t.showPaymentbtn=!0,r.checkLogin(),t.showpage=!0,s.contractId&&s.id){t.contractId=s.contractId,t.milestoneId=s.id,l.show({template:"Loading..."});var p=firebase.database().ref("/contracts/"+s.contractId);p.once("value",function(e){if(t.contract=e.val(),t.milestone=t.contract.milestones[s.id],t.milestone)if("submitted"==t.milestone.status){var o=firebase.database().ref("/cardTransactionDataInitialise/").orderByChild("proposalid").equalTo(t.contractId);o.once("value",function(e){for(var a in e.val())"success"==e.val()[a].payment&&e.val()[a].proposalid==t.contractId&&(t.cardTransData_id=a,t.payPalTransationResponce=e.val()[a].paymentData,t.payBonusProccess("card",e.val()[a].bonusdata))});var n=firebase.database().ref("/jobs/"+t.contract.jobid);n.once("value",function(e){t.job=e.val();var o=firebase.database().ref("/transactions/").orderByChild("moneyof").equalTo(r.loggedUserId);o.once("value",function(e){e.val()?a({method:"POST",url:window.location.origin+"/transaction.php",data:{token:r.loggedUserId,type:"checkMyBalance",domain:window.location.origin,transactions:e.val(),currency:t.contract.currency},headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(e){l.hide(),parseInt(e.data)&&(t.MyAccountBalance=parseInt(e.data))},function(e){console.log(e),l.hide()}):l.hide()})})}else c.path("/app/mainpage");else c.path("/app/mainpage");l.hide()})}o.fromTemplateUrl("bonuscardDetails.html",{scope:t,animation:"slide-in-up"}).then(function(e){t.modal=e}),t.showForm=!0,t.payPalTransationResponce=[],t.approve=function(a,o){t.paymentVarifyStatus=!1,i.show({template:'<input type="password" ng-model="$root.tempwifidata.wifi3">',title:"Enter your password",subTitle:"Please enter your worklidate account password to continue.",scope:r,buttons:[{text:"Cancel"},{text:"<b>Confirm</b>",type:"button-positive",onTap:function(e){return r.tempwifidata.wifi3?r.tempwifidata.wifi3:void e.preventDefault()}}]}).then(function(r){return firebase.auth().signInWithEmailAndPassword(JSON.parse(window.localStorage.getItem("info")).email,r).then(function(r){r.emailVerified?(t.paymentVarifyStatus=!0,t.paymentVarify(a,o)):(alert("Login failed. Please try again."),e.preventDefault())},function(t){alert("Login failed. Please try again."),e.preventDefault()})})},t.paymentVarify=function(e,o){if(1==t.paymentVarifyStatus){if("approve"!=e.milestoneaction||e.bonusamount){if("approve"==e.milestoneaction&&e.bonusamount){t.bonusamount=e.bonusamount;var n=i.confirm({title:"Confirm ?",template:"<div>1. Sure to complete this milestone?</div><div>2. "+t.contract.currency+" "+t.milestone.budget+" will be released</div><div>3. "+t.contract.currency+" "+e.bonusamount+" Bonus will be sent.</div>"});n.then(function(n){if(n){t.showPaymentbtn=!1,l.show({template:"Loading..."}),t.$$phase||t.$apply();var i=firebase.database().ref("/transactions/").orderByChild("moneyof").equalTo(r.loggedUserId);i.once("value",function(n){n.val()?(l.show({template:"Proccessing..."}),t.$$phase||t.$apply(),a({method:"POST",url:window.location.origin+"/transaction.php",data:{token:r.loggedUserId,type:"checkMyBalance",domain:window.location.origin,transactions:n.val(),currency:t.contract.currency},headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(a){l.show({template:"Proccessing..."}),t.$$phase||t.$apply(),parseInt(a.data)&&e.bonusamount<=parseFloat(a.data)?(t.ProccessingData=e,"myaccount"==o&&t.payBonusProccess("myaccount",e),"bycard"==o&&(t.modal.show(),l.hide())):(t.ProccessingData=e,"bycard"==o&&(t.modal.show(),l.hide()))},function(e){console.log(e)})):(t.ProccessingData=e,"bycard"==o&&(t.modal.show(),l.hide()))})}else console.log("You are not sure")})}}else{var n=i.confirm({title:"Confirm ?",template:"<div>1. Sure to complete this milestone?</div><div>2. "+t.contract.currency+" "+t.milestone.budget+" will be released</div>"});n.then(function(e){if(e){t.showPaymentbtn=!1,t.showpage=!1,l.show({template:"Loading..."});var o=null,n=firebase.database().ref("/transactions/").orderByChild("contractid").equalTo(s.contractId);n.once("value",function(e){l.show({template:"Proccessing..."}),t.$$phase||t.$apply();for(var n in e.val())e.val()[n].milestoneid==s.id&&"escrow"==e.val()[n].payment_status&&(o=n);var i=e.val()[n].amount;setTimeout(function(){l.show({template:"Proccessing..."}),t.$$phase||t.$apply(),null!=o&&a({method:"POST",url:window.location.origin+"/transaction.php",data:{token:r.loggedUserId,type:"milestone_approved",domain:window.location.origin,milestone:s.id,contract:s.contractId,job:t.contract.jobid,transactionsId:o},headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(e){if(l.show({template:"Proccessing..."}),t.$$phase||t.$apply(),"success"==e.data){l.show({template:"Proccessing..."}),t.$$phase||t.$apply();var a=new Date,o=(firebase.database().ref("/contracts/"+s.contractId+"/milestones/"+s.id).update({status:"approved",approved_on:a}),firebase.database().ref("/contracts/"+s.contractId+"/assigned_milestone").set("false"),JSON.parse(angular.toJson({message:"Milestone approved. Paid "+t.contract.currency+" "+i+" *",date:a,type:"employer",subtype:"milestone_approved",data:"/"+s.contractId+"/"+s.id,system_message:"true",status:"unread"}))),n=firebase.database().ref("/contracts/"+s.contractId+"/message");n.push(o);var c=firebase.database().ref("/contracts/"+s.contractId);c.once("value",function(e){if(l.show({template:"Loading..."}),t.$$phase||t.$apply(),e.val()){l.show({template:"Proccessing..."}),t.$$phase||t.$apply(),t.contract=e.val();for(var a in t.contract.milestones)t.contract.milestones[a].status||(t.milestoneIsRemaining=!0),"submitted"==t.contract.milestones[a].status&&(t.milestoneIsSubmitted=!0),"working"==t.contract.milestones[a].status&&(t.milestoneIsWorking=!0);l.show({template:"Proccessing..."}),t.$$phase||t.$apply(),d(function(){if(1!=t.milestoneIsRemaining&&1!=t.milestoneIsWorking&&1!=t.milestoneIsSubmitted){r.endcontractby="employer";var e=new Date,a=JSON.parse(angular.toJson({message:"Contract completed. Please give a feedback. *",date:e,type:"employer",status:"unread",system_message:"true"})),o=firebase.database().ref("/contracts/"+t.contractId+"/message");o.push(a);var n=firebase.database().ref("/contracts/"+t.contractId);n.update({status:"completed",contract_completed_on:e});firebase.database().ref("/jobs/"+t.contract.jobid+"/status").set("completed");setTimeout(function(){var e=history.length;history.go(-e),window.location.replace("#/app/endcontract/"+s.contractId),l.hide()},1e3)}else{var a=JSON.parse(angular.toJson({message:"Please assign next milestone for talent from contract details page.",date:e,type:"talent",status:"unread",hide:"true"})),o=firebase.database().ref("/jobproposals/"+s.contractId+"/message");o.push(a);var i=JSON.parse(angular.toJson({date:e,message:"Please assign next milestone for talent from contract details page.",type:"contractmessage",sender:r.loggedUserId,senderName:r.userdata.name,status:"unread"})),c=firebase.database().ref("/notification/"+t.contract.employer_id);c.push(i);var d=history.length;history.go(-d),window.location.replace("#/app/contract/details/emp/"+t.contractId),l.hide()}},1e4)}})}},function(e){alert("Something went wrong. Please try again later."),c.path("/app/contract/details/emp/"+t.contractId),r.reloadContractPage=!0,l.hide()})},3e3)})}else console.log("You are not sure")})}if("changesrequired"==e.milestoneaction){var p=(firebase.database().ref("/contracts/"+s.contractId+"/milestones/"+s.id+"/status").set("working"),new Date),u=JSON.parse(angular.toJson({message:"The milestone needs additional work. *",date:p,type:"employer",subtype:"milestone_approved",data:"/"+s.contractId+"/"+s.id,system_message:"true",status:"unread"})),m=firebase.database().ref("/contracts/"+s.contractId+"/message");m.push(u);var f=history.length;history.go(-f),window.location.replace("#/app/contract/details/emp/"+t.contractId)}}},t.payBonusProccess=function(e,o){l.show({template:"Proccessing..."}),t.showpage=!1,a({method:"POST",url:window.location.origin+"/transaction.php",data:{token:r.loggedUserId,type:"bonus",domain:window.location.origin,milestone:s.id,contract:s.contractId,job:t.contract.jobid,amount:o.bonusamount,payType:e,payPalTransationResponce:t.payPalTransationResponce},headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(e){if(l.show({template:"Proccessing..."}),t.$$phase||t.$apply(),"success"==e.data){l.show({template:"Proccessing..."}),t.$$phase||t.$apply();var n=null,i=firebase.database().ref("/transactions/").orderByChild("contractid").equalTo(s.contractId);i.once("value",function(e){for(var i in e.val())e.val()[i].milestoneid==s.id&&"escrow"==e.val()[i].payment_status&&(n=i);var c=e.val()[i].amount;setTimeout(function(){null!=n&&(l.show({template:"Proccessing..."}),t.$$phase||t.$apply(),a({method:"POST",url:window.location.origin+"/transaction.php",data:{token:r.loggedUserId,type:"milestone_approved",domain:window.location.origin,milestone:s.id,contract:s.contractId,job:t.contract.jobid,transactionsId:n},headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(e){l.show({template:"Proccessing..."}),t.$$phase||t.$apply(),setTimeout(function(){if("success"==e.data){l.show({template:"Proccessing..."}),t.$$phase||t.$apply();var a=new Date,n=(firebase.database().ref("/contracts/"+s.contractId+"/milestones/"+s.id).update({status:"approved",approved_on:a}),firebase.database().ref("/contracts/"+s.contractId+"/assigned_milestone").set("false"),JSON.parse(angular.toJson({message:"Milestone approved. Paid "+t.contract.currency+" "+c+" and bonus "+t.contract.currency+" "+o.bonusamount+". *",date:a,type:"employer",subtype:"milestone_approved",data:"/"+s.contractId+"/"+s.id,system_message:"true",status:"unread"}))),i=firebase.database().ref("/contracts/"+s.contractId+"/message");i.push(n);var p=(firebase.database().ref("/contracts/"+s.contractId+"/milestones/"+s.id+"/bonus").set(o.bonusamount),firebase.database().ref("/contracts/"+s.contractId));p.once("value",function(e){if(l.show({template:"Proccessing..."}),t.$$phase||t.$apply(),e.val()){t.contract=e.val();for(var a in t.contract.milestones)t.contract.milestones[a].status||(t.milestoneIsRemaining=!0),"submitted"==t.contract.milestones[a].status&&(t.milestoneIsSubmitted=!0),"working"==t.contract.milestones[a].status&&(t.milestoneIsWorking=!0);l.show({template:"Proccessing..."}),t.$$phase||t.$apply(),d(function(){1!=t.milestoneIsRemaining&&1!=t.milestoneIsWorking&&1!=t.milestoneIsSubmitted?(r.endcontractby="employer",window.location.replace("#/app/endcontract/"+s.contractId),l.hide()):(window.location.replace("#/app/contract/details/emp/"+t.contractId),l.hide()),t.cardTransData_id&&firebase.database().ref("/cardTransactionDataInitialise/"+t.cardTransData_id).remove()},5e3)}})}},10)},function(e){console.log(e),l.hide()}))},3e3)})}else alert("eror"),l.hide()},function(e){console.log(e),l.hide()})},t.payNow=function(e,o){if(t.showForm=!1,t.bonusamount&&t.contract.currency){var n=firebase.database().ref("/cardTransactionDataInitialise/");t.cardTransData_id=n.push({milestoneId:t.milestoneId,proposalid:s.contractId,job:t.job,bonusdata:t.ProccessingData}),a({method:"POST",url:window.location.origin+"/first.php",data:{token:r.loggedUserId,n:e.number,cv:e.cvc,fname:e.fname,lname:e.lname,expM:e.expiration.month,expY:e.expiration.year,amt:t.bonusamount,curr:t.contract.currency,type:o.toLowerCase(),itemName:"Milestone Bonus",itenDescription:"JOB NAME: "+t.job.title+" JOBID:"+t.jobid+" MILESTONE:"+t.milestone.title+"("+t.milestoneId+")",proposalid:t.contractId,cardTransData_id:t.cardTransData_id.key},headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(e){t.modal.hide(),e.data&&"null"!=e.data&&null!=e.data&&"approved"==e.data.state?(t.payPalTransationResponce=e.data,t.payBonusProccess("card",t.ProccessingData)):(t.showPaymentbtn=!0,t.showpage=!0,alert("Something went wrong. Please try again later. Contact support team if money is deducted from your account."),c.path("/app/contract/details/emp/"+t.contractId),r.reloadContractPage=!0),t.showresult=!0,t.result=e.data},function(e){t.showresult=!0,t.showPaymentbtn=!0,t.showpage=!0,t.modal.hide(),alert("Something went wrong. Please try again later. Contact support team if money is deducted from your account."),c.path("/app/contract/details/emp/"+t.contractId),r.reloadContractPage=!0,l.hide()})}},t.payPaypal=function(e){l.show({template:"Proccessing..."}),t.$$phase||t.$apply(),e&&t.contract.currency&&(t.uniqidkey=r.loggedUserId+Math.round(+new Date/1e3)+Math.floor(1e6*Math.random()+1),a({method:"POST",url:window.location.origin+"/paypalpayment.php",data:{token:r.loggedUserId,amt:e,curr:t.contract.currency,itemName:"Milestone Bonus",itenDescription:"JOB NAME: "+t.job.title+" JOBID:"+t.jobid+" MILESTONE:"+t.milestone.title+"("+t.milestoneId+")",uniqidkey:t.uniqidkey},headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(e){if(l.show({template:"Proccessing..."}),t.$$phase||t.$apply(),e.data&&"null"!=e.data&&null!=e.data&&"created"==e.data.state&&null!=e.data.approvalUrl){t.payPalTransationResponce=[],t.payPalTransationResponce.paypal=e.data,t.payPalTransationResponce.data={milestoneid:s.id,contractId:s.contractId,type:"bonus"};var a=firebase.database().ref("/paypalPaymentData/"+t.uniqidkey);a.set(t.payPalTransationResponce);var o=history.length;history.go(-o),window.location.replace(e.data.approvalUrl)}else t.showPaymentbtn=!0,t.showpage=!0,l.hide(),alert("Something went wrong. Please try again later. Contact support team if money is deducted from your account."),c.path("/app/contract/details/emp/"+t.contractId),r.reloadContractPage=!0;t.result=e.data},function(e){t.showPaymentbtn=!0,t.showpage=!0,alert("Something went wrong. Please try again later. Contact support team if money is deducted from your account."),console.log(e),c.path("/app/contract/details/emp/"+t.contractId),r.reloadContractPage=!0,l.hide()}))}}]},{}],30:[function(e,t,a){"use strict";t.exports=["$scope","Upload","$rootScope","Firebase","$ionicLoading","$location","$ionicPopup","$stateParams","Analytics","$http",function(e,t,a,o,r,n,i,s,l,c){a.checkLogin();var d=firebase.storage().ref();if(s.contractId&&s.id){e.contractId=s.contractId,e.milestoneId=s.id,r.show({template:"Loading..."});var p=firebase.database().ref("/contracts/"+s.contractId+"/milestones/"+s.id);p.once("value",function(t){e.milestone=t.val(),t.val()&&"working"==t.val().status?console.log("yes"):n.path("/app/contract/details/"+e.contractId),r.hide()})}e.onFileSelect=function(t,a){t[0]&&(e.attachedfilesdata?e.attachedfilesdata.push(t[0]):(e.attachedfilesdata=[],e.attachedfilesdata.push(t[0])))},e["delete"]=function(t){e.filesdata_temp=[],e.attachedfilesdata.forEach(function(a,o){o!=t&&e.filesdata_temp.push(a)}),setTimeout(function(){delete e.attachedfilesdata,e.attachedfilesdata=[],e.$$phase||e.$apply()},100)},e.submitWork=function(t){if(t){r.show({template:"Loading..."});var o=(firebase.database().ref("/contracts/"+s.contractId+"/milestones/"+s.id+"/status").set("submitted"),firebase.database().ref("/contracts/"+s.contractId+"/milestones/"+s.id));if(o.update({message:t}),t){var i=new Date,l=JSON.parse(angular.toJson({message:"(Milestone Submitted) : "+t+" *",date:i,type:"talent",subtype:"milestone_submitted",data:"/"+s.contractId+"/"+s.id,system_message:"true",status:"unread"})),p=firebase.database().ref("/contracts/"+s.contractId+"/message");p.push(l);var u=null,m=firebase.database().ref("/transactions/").orderByChild("contractid").equalTo(s.contractId);m.once("value",function(e){for(var t in e.val())e.val()[t].milestoneid==s.id&&"escrow"==e.val()[t].payment_status&&(u=t);setTimeout(function(){c({method:"POST",url:window.location.origin+"/milestones.php",data:{token:a.loggedUserId,milestone:s.id,contract:s.contractId,transactions:u},headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(e){},function(e){})},3e3)})}e.attachedfilesdata&&e.attachedfilesdata.length>0?e.attachedfilesdata.forEach(function(t,a){var o=d.child("upload/milestone/"+JSON.parse(window.localStorage.getItem("info")).uid+"/"+s.contractId+"/"+t.name).put(t);o.on("state_changed",function(e){t=parseInt(t);var t=e.bytesTransferred/e.totalBytes*100;switch(r.show({template:"Upload is "+t+"% done"}),e.state){case firebase.storage.TaskState.PAUSED:console.log("Upload is paused");break;case firebase.storage.TaskState.RUNNING:console.log("Upload is running")}},function(e){},function(){var t=o.snapshot.downloadURL;if(e.attachedfilesdata[a].downloadUrl=t,a==e.attachedfilesdata.length-1){var i=[];e.attachedfilesdata.forEach(function(t,a){if(i.push({name:t.name,data:t.downloadUrl}),a==e.attachedfilesdata.length-1){var o=firebase.database().ref("/contracts/"+s.contractId+"/milestones/"+s.id+"/attachments");o.set(i);e.milestone.attachments=i,firebase.database().ref("/contracts/"+s.contractId+"/allSubmittedMilestonesData").push(e.milestone),r.hide(),n.path("/app/contract/details/"+e.contractId)}})}})}):(firebase.database().ref("/contracts/"+s.contractId+"/allSubmittedMilestonesData").push(e.milestone),r.hide(),n.path("/app/contract/details/"+e.contractId))}},l.trackPage("Submit_Milestone")}]},{}],31:[function(t,a,o){"use strict";a.exports=["$scope","$rootScope","$http","$ionicLoading","$ionicPopup","$location","Analytics",function(t,a,o,r,n,i,s){if(a.checkLogin(),a.loggedUserId){r.show({template:"Loading..."}),t.MyEmployerAccountEscrowUSD=0,t.MyEmployerAccountEscrowHKD=0,t.MyTalentAccountEscrowUSD=0,t.MyTalentAccountEscrowHKD=0;var l=firebase.database().ref("/transactions/").orderByChild("moneyof").equalTo(a.loggedUserId);l.on("value",function(e){t.MyAvialableAccount=e.val(),t.myAccountAvailableUSD=0,t.myAccountAvailableHKD=0;for(var a in t.MyAvialableAccount)"available"==t.MyAvialableAccount[a].payment_status&&"USD"==t.MyAvialableAccount[a].currency&&(t.myAccountAvailableUSD=parseFloat(t.myAccountAvailableUSD)+parseFloat(t.MyAvialableAccount[a].amount)),"available"==t.MyAvialableAccount[a].payment_status&&"HKD"==t.MyAvialableAccount[a].currency&&(t.myAccountAvailableHKD=parseFloat(t.myAccountAvailableHKD)+parseFloat(t.MyAvialableAccount[a].amount));r.hide()})}t.withdrawUSD=function(o){t.paymentVarifyUSDStatus=!1,n.show({template:'<input type="password" ng-model="$root.tempwifidata.wifi1">',title:"Enter your password",subTitle:"Please enter your worklidate account password to continue.",scope:a,buttons:[{text:"Cancel"},{text:"<b>Confirm</b>",type:"button-positive",onTap:function(e){return a.tempwifidata.wifi1?a.tempwifidata.wifi1:void e.preventDefault()}}]}).then(function(a){return firebase.auth().signInWithEmailAndPassword(JSON.parse(window.localStorage.getItem("info")).email,a).then(function(a){a.emailVerified?(t.paymentVarifyUSDStatus=!0,t.paymentVarifyUSD(o)):(alert("Login failed. Please try again."),e.preventDefault())},function(t){alert("Login failed. Please try again."),e.preventDefault()})})},t.paymentVarifyUSD=function(e){if(1==t.paymentVarifyUSDStatus)if(e){var s=n.confirm({title:"Withdraw",template:"Are you sure you want to withdraw USD "+t.myAccountAvailableUSD+" to "+e+"?"});s.then(function(n){if(n){r.show({template:"Loading..."});var s=firebase.database().ref("/transactions/").orderByChild("moneyof").equalTo(a.loggedUserId);s.once("value",function(n){t.myAccountAvailableUSD>=3&&(o({method:"POST",url:window.location.origin+"/transaction.php",data:{token:a.loggedUserId,type:"checkMyBalance",domain:window.location.origin,transactions:n.val(),currency:"USD"},headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(t){parseInt(t.data)>=3&&o({method:"POST",url:window.location.origin+"/transaction.php",data:{token:a.loggedUserId,type:"withdraw",domain:window.location.origin,transactions:n.val(),currency:"USD",email:e},headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(e){"success"==e.data?(r.hide(),i.path("/app/mymoney")):(r.hide(),alert("Something went wrong. Please try again later."))},function(e){r.hide(),alert("Something went wrong. Please try again later.")})},function(e){r.hide(),alert("Something went wrong. Please try again later.")}),r.hide())})}else console.log("You are not sure")})}else alert("Please enter email id.")},t.withdrawHKD=function(o){t.paymentVarifyHKDStatus=!1,n.show({template:'<input type="password" ng-model="$root.tempwifidata.wifi2">',title:"Enter your password",subTitle:"Please enter your worklidate account password to continue.",scope:a,buttons:[{text:"Cancel"},{text:"<b>Confirm</b>",type:"button-positive",onTap:function(e){return a.tempwifidata.wifi2?a.tempwifidata.wifi2:void e.preventDefault()}}]}).then(function(a){return firebase.auth().signInWithEmailAndPassword(JSON.parse(window.localStorage.getItem("info")).email,a).then(function(a){a.emailVerified?(t.paymentVarifyHKDStatus=!0,t.paymentVarifyHKD(o)):(alert("Login failed. Please try again."),e.preventDefault())},function(t){alert("Login failed. Please try again."),e.preventDefault()})})},t.paymentVarifyHKD=function(e){if(1==t.paymentVarifyHKDStatus)if(e){var s=n.confirm({title:"Withdraw",template:"Are you sure you want to withdraw HKD "+t.myAccountAvailableHKD+" to "+e+"?"});s.then(function(n){if(n){r.show({template:"Loading..."});var s=firebase.database().ref("/transactions/").orderByChild("moneyof").equalTo(a.loggedUserId);s.once("value",function(n){t.myAccountAvailableHKD>=20&&o({method:"POST",url:window.location.origin+"/transaction.php",data:{token:a.loggedUserId,type:"checkMyBalance",domain:window.location.origin,transactions:n.val(),currency:"HKD"},headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(t){parseInt(t.data)>=20&&o({method:"POST",url:window.location.origin+"/transaction.php",data:{token:a.loggedUserId,type:"withdraw",domain:window.location.origin,transactions:n.val(),currency:"HKD",email:e},headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(e){"success"==e.data?(r.hide(),i.path("/app/mymoney")):(r.hide(),alert("Something went wrong. Please try again later."))},function(e){r.hide(),alert("Something went wrong. Please try again later.")})},function(e){r.hide(),alert("Something went wrong. Please try again later.")})})}else console.log("You are not sure")})}else alert("Please enter email id.")},s.trackPage("Withdraw_Money")}]},{}],32:[function(e,t,a){"use strict";t.exports=["$scope","$rootScope","Firebase","Analytics",function(e,t,a,o){t.checkLogin(),1==t.clearBrowserHistory&&(window.history.go(-window.history.length),t.clearBrowserHistory=!1),e.tabs=[{title:"Talent",url:"templates/views/talent.tpl.html"},{title:"Employer",url:"templates/views/employer.tpl.html"}],e.currentTab="templates/views/talent.tpl.html",e.onClickTab=function(t){e.currentTab=t.url},e.isActiveTab=function(t){return t==e.currentTab};var r=firebase.database().ref("/jobs/");r.orderByChild("userid").equalTo(JSON.parse(window.localStorage.getItem("info")).uid).on("value",function(t){e.EmployerOpenJobs=[],e.EmployerClosedJobs=[],e.EmployerWorkingJobs=[];for(var a in t.val()){var o=t.val()[a];o.id=a,"end"==t.val()[a].status&&e.EmployerClosedJobs.push(o),"working"==t.val()[a].status&&e.EmployerWorkingJobs.push(o),"open"==t.val()[a].status&&e.EmployerOpenJobs.push(o)}e.$$phase||e.$apply()});var n=firebase.database().ref("/jobproposals/");n.orderByChild("talent_id").equalTo(JSON.parse(window.localStorage.getItem("info")).uid).on("value",function(t){e.userOpenProposals=[];for(var a in t.val()){var o=t.val()[a];o.id=a,"open"==t.val()[a].status&&e.userOpenProposals.push(o)}e.$$phase||e.$apply()});var n=firebase.database().ref("/contracts/");n.orderByChild("talent_id").equalTo(JSON.parse(window.localStorage.getItem("info")).uid).on("value",function(t){
e.userWorkingContracts=[],e.userCompletedContracts=[],e.userEndContracts=[];for(var a in t.val()){var o=t.val()[a];o.id=a,console.log(t.val()[a].status),"open"==t.val()[a].status&&e.userWorkingContracts.push(o),"completed"==t.val()[a].status&&e.userCompletedContracts.push(o),"end"==t.val()[a].status&&e.userEndContracts.push(o)}e.$$phase||e.$apply()});var n=firebase.database().ref("/contracts/");n.orderByChild("employer_id").equalTo(JSON.parse(window.localStorage.getItem("info")).uid).on("value",function(t){e.employerWorkingContracts=[],e.employerCompletedContracts=[],e.employerEndContracts=[];for(var a in t.val()){var o=t.val()[a];o.id=a,console.log(t.val()[a].status),"open"==t.val()[a].status&&e.employerWorkingContracts.push(o),"completed"==t.val()[a].status&&e.employerCompletedContracts.push(o),"end"==t.val()[a].status&&e.employerEndContracts.push(o)}e.$$phase||e.$apply()});var n=firebase.database().ref("/jobproposalsClosed/");n.orderByChild("talent_id").equalTo(JSON.parse(window.localStorage.getItem("info")).uid).on("value",function(t){e.userClosedproposals=[];for(var a in t.val()){var o=t.val()[a];o.id=a,"close"==t.val()[a].status&&e.userClosedproposals.push(o)}e.$$phase||e.$apply()}),o.trackPage("Work_Organizer")}]},{}],33:[function(e,t,a){"use strict";t.exports=["$scope","$ionicModal","$timeout","$ionicPopover","$rootScope","$location","$ionicHistory","Firebase","$state","$window","$filter","$ionicLoading",function(e,t,a,o,r,n,i,s,l,c,d,p){e.loginData={},r.firebaseurl=app_config.databaseURL,r.serverURL=app_config.serverURL,window.localStorage.getItem("info")&&(r.loggedUserId=JSON.parse(window.localStorage.getItem("info")).uid),e.animation="slide-in-up",o.fromTemplateUrl("templates/popover.html",{scope:e,animation:e.animation}).then(function(t){e.popover=t}),setInterval(function(){r.currentDate=new Date,r.serverTime=new Date},1e3),e.closePopover=function(){e.popover.hide()},e.$on("$stateChangeStart",function(t,a,o,r,n){e.closePopover()}),r.checkLogin=function(){window.localStorage.getItem("info")?("/app/login"==n.path()&&l.go("app.mainpage"),r.loggedUserId=JSON.parse(window.localStorage.getItem("info")).uid):"/app/login"!=n.path()&&"/app/signup"!=n.path()&&"/app/forgotpassword"!=n.path()&&l.go("app.login")},r.skills=[];for(var u in skills)if(skills[u]){var m=skills[u];m.id=u,r.skills.push(m)}e.groupdetails=function(e){n.path("/app/groupdetails/"+e)},e.addproject=function(){n.path("/app/addproject")},e.postproject=function(){n.path("/app/jobpost")},e.joinGroup=function(e){e&&(p.show({template:"Joining..."}),setTimeout(function(){var t=firebase.database().ref("/groups/"+e+"/members/");window.localStorage.getItem("info")&&t.orderByChild("userid").equalTo(JSON.parse(window.localStorage.getItem("info")).uid).once("value",function(a){if(null==a.val()){var o=firebase.database().ref("/groups/"+e+"/invites");o.once("value",function(t){for(var a in t.val())if(t.val()[a].userid==JSON.parse(window.localStorage.getItem("info")).uid){var o=firebase.database().ref("/groups/"+e+"/invites/"+a);o.remove()}});var r=firebase.database().ref("/users/"+JSON.parse(window.localStorage.getItem("info")).uid+"/groups_invitaion");r.once("value",function(t){for(var a in t.val())if(t.val()[a].groupid==e){var o=firebase.database().ref("/users/"+JSON.parse(window.localStorage.getItem("info")).uid+"/groups_invitaion/"+a);o.remove()}}),t.push({userid:JSON.parse(window.localStorage.getItem("info")).uid});var n=firebase.database().ref("/users/"+JSON.parse(window.localStorage.getItem("info")).uid+"/groups");n.push({groupid:e}),p.hide()}else p.hide(),alert("Already joined")})},100))},e.readNotification=function(e){if(e.id){var t=firebase.database().ref("/notification/"+JSON.parse(window.localStorage.getItem("info")).uid+"/"+e.id);t.update({status:"read"})}e.newProposal&&n.path("/app/proposallist/"+e.jobid)},e.rejectInvitation=function(e){if(window.localStorage.getItem("info")){var t=firebase.database().ref("/groups/"+e+"/invites");t.once("value",function(t){for(var a in t.val())if(t.val()[a].userid==JSON.parse(window.localStorage.getItem("info")).uid){var o=firebase.database().ref("/groups/"+e+"/invites/"+a);o.remove()}});var a=firebase.database().ref("/users/"+JSON.parse(window.localStorage.getItem("info")).uid+"/groups_invitaion");a.once("value",function(t){for(var a in t.val())if(t.val()[a].groupid==e){var o=firebase.database().ref("/users/"+JSON.parse(window.localStorage.getItem("info")).uid+"/groups_invitaion/"+a);o.remove()}})}},r.getInitialUserData=function(){if(window.localStorage.getItem("info")){var t=firebase.database().ref("/users/"+JSON.parse(window.localStorage.getItem("info")).uid);t.on("value",function(e){r.userdata=e.val()},function(e){console.log("The read failed: "+e.code),p.hide()});var a=firebase.database().ref("/notification/"+JSON.parse(window.localStorage.getItem("info")).uid);a.orderByChild("date").on("value",function(t){r.notifications=t.val(),r.unReadNotificationsCount=0,r.unReadNotificationsCount_tab=0;for(var a in r.notifications)"unread"==r.notifications[a].status&&"true"!=r.notifications[a]["delete"]&&(r.unReadNotificationsCount=r.unReadNotificationsCount+1),"unread"==r.notifications[a].status&&"chat"!=r.notifications[a].type&&"true"!=r.notifications[a]["delete"]&&(r.unReadNotificationsCount_tab=r.unReadNotificationsCount_tab+1);e.$$phase||e.$apply()})}},window.localStorage.getItem("info")&&r.getInitialUserData(),e.setLang=function(e){window.localStorage.setItem("lang",e),n.path("/"),location.reload()};var f=firebase.database().ref("/categories");f.orderByChild("name").on("value",function(e){var t=[];r.categories_tree=[],t=e.val(),r.categoriesObjects=e.val(),r.categories=[],r.withoutYellowcategories=[];for(var a in t){var o=t[a];o.id=a,0!=t[a].parent_id&&r.categories.push(o),0!=t[a].parent_id&&1!=t[a].type&&r.withoutYellowcategories.push(o),1!=t[a].type&&(r.categories_tree[t[a].parent_id]?r.categories_tree[t[a].parent_id].push(o):(r.categories_tree[t[a].parent_id]=[],r.categories_tree[t[a].parent_id].push(o)))}},function(e){console.log("The read failed: "+e.code)}),e.logout=function(){window.localStorage.removeItem("info"),delete r.userdata,delete r.loggedUserId,firebase.auth().signOut().then(function(){window.localStorage.setItem("just_logout","true"),location.reload()},function(e){window.localStorage.setItem("just_logout","true"),location.reload()})},e["goto"]=function(e){console.log(e),n.path("/app/"+e)},e.toggleTabs=function(e){$("#"+e).toggleClass("open")},e.back=function(){i.goBack()},r.calculateWindowSizes=function(){r.screenHeight=window.screen.height,r.screenWidth=window.screen.width,r.windowHeight=$(window).height(),r.windowWidth=$(window).width()},r.calculateWindowSizes();var g=angular.element(c);g.bind("resize",function(){r.calculateWindowSizes()})}]},{}],34:[function(t,a,o){"use strict";a.exports=["$scope","$ionicModal","$rootScope","Firebase","$ionicPopup","$stateParams","Analytics","$ionicLoading","$location","$http",function(t,a,o,r,n,i,s,l,c,d){if(o.checkLogin(),i.contractId){t.contractId=i.contractId,l.show({template:"Loading..."});var p=firebase.database().ref("/contracts/"+i.contractId);p.once("value",function(e){if(e.val()){t.contract=e.val();for(var a in t.contract.milestones)t.contract.milestones[a].status||t.milestone||(t.milestone=t.contract.milestones[a],t.milestoneId=a);setTimeout(function(){if(t.milestone)if(t.milestone.status)c.path("/app/mainpage");else{var e=firebase.database().ref("/cardTransactionDataInitialise/").orderByChild("proposalid").equalTo(t.contractId);e.once("value",function(e){for(var a in e.val())"success"==e.val()[a].payment&&e.val()[a].proposalid==t.contractId&&(t.cardTransData_id=a,t.payPalTransationResponce=e.val()[a].paymentData,t.payProccess("card"))})}else c.path("/app/mainpage")},2e3);var r=(t.milestone.budget,firebase.database().ref("/jobs/"+t.contract.jobid));r.once("value",function(e){t.job=e.val();var a=firebase.database().ref("/transactions/").orderByChild("moneyof").equalTo(o.loggedUserId);a.once("value",function(e){e.val()?d({method:"POST",url:window.location.origin+"/transaction.php",data:{token:o.loggedUserId,type:"checkMyBalance",domain:window.location.origin,transactions:e.val(),currency:t.job.currency},headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(e){l.hide(),parseInt(e.data)&&(t.MyAccountBalance=parseInt(e.data))},function(e){l.hide()}):l.hide()})})}else c.path("/app/mainpage"),l.hide()})}t.showPaymentbtn=!0,a.fromTemplateUrl("assigncardDetails.html",{scope:t,animation:"slide-in-up"}).then(function(e){t.modal=e}),t.assignmilestone=function(a){t.paymentVarifyStatus=!1,n.show({template:'<input type="password" ng-model="$root.tempwifidata.wifi4">',title:"Enter your password",subTitle:"Please enter your worklidate account password to continue.",scope:o,buttons:[{text:"Cancel"},{text:"<b>Confirm</b>",type:"button-positive",onTap:function(e){return o.tempwifidata.wifi4?o.tempwifidata.wifi4:void e.preventDefault()}}]}).then(function(o){return firebase.auth().signInWithEmailAndPassword(JSON.parse(window.localStorage.getItem("info")).email,o).then(function(o){o.emailVerified?(t.paymentVarifyStatus=!0,t.paymentVarify(a)):(alert("Login failed. Please try again."),e.preventDefault())},function(t){alert("Login failed. Please try again."),e.preventDefault()})})},t.paymentVarify=function(e){if(1==t.paymentVarifyStatus){var a=t.milestone.budget;l.show({template:"Loading..."}),t.$$phase||t.$apply();var r=firebase.database().ref("/transactions/").orderByChild("moneyof").equalTo(o.loggedUserId);r.once("value",function(r){r.val()?d({method:"POST",url:window.location.origin+"/transaction.php",data:{token:o.loggedUserId,type:"checkMyBalance",domain:window.location.origin,transactions:r.val(),currency:t.job.currency},headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(o){parseInt(o.data)&&a<=parseFloat(o.data)?("myaccount"==e&&t.payProccess("myaccount"),"bycard"==e&&(t.modal.show(),l.hide())):"bycard"==e&&(t.modal.show(),l.hide())},function(e){console.log(e)}):"bycard"==e&&(t.modal.show(),l.hide())})}},t.showForm=!0,t.payPalTransationResponce=[],t.payProccess=function(e){l.show({template:"Proccessing..."}),t.$$phase||t.$apply(),!t.milestone.status&&t.milestoneId&&t.contractId&&d({method:"POST",url:window.location.origin+"/transaction.php",data:{token:o.loggedUserId,type:"milestone_payment",domain:window.location.origin,milestone:t.milestoneId,contract:t.contractId,job:t.contract.jobid,payType:e,payPalTransationResponce:t.payPalTransationResponce},headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(e){if("success"==e.data){var a=(firebase.database().ref("/contracts/"+i.contractId+"/milestones/"+t.milestoneId+"/status").set("working"),new Date),r=JSON.parse(angular.toJson({message:"'"+t.milestone.title+"' Milestone assigned *",date:a,type:"employer",subtype:"milestone_assign",system_message:"true",status:"unread"})),n=firebase.database().ref("/contracts/"+i.contractId+"/message");n.push(r),t.cardTransData_id&&firebase.database().ref("/cardTransactionDataInitialise/"+t.cardTransData_id.key).remove(),l.show(),setTimeout(function(){l.hide(),c.path("/app/contract/details/emp/"+t.contractId),o.reloadContractPage=!0},5e3)}else alert("Something went wrong. Please try again later. Contact support team if money is deducted from your account."),c.path("/app/contract/details/emp/"+t.contractId),o.reloadContractPage=!0},function(e){console.log(e),l.hide()})},t.payNow=function(e,a){if(t.showForm=!1,t.milestone.budget&&t.job.currency){var r=firebase.database().ref("/cardTransactionDataInitialise/");t.cardTransData_id=r.push({milestoneId:t.milestoneId,proposalid:t.contractId,job:t.job}),d({method:"POST",url:window.location.origin+"/first.php",data:{token:o.loggedUserId,n:e.number,cv:e.cvc,fname:e.fname,lname:e.lname,expM:e.expiration.month,expY:e.expiration.year,amt:t.milestone.budget,curr:t.job.currency,type:a.toLowerCase(),itemName:"Milestone Payment",itenDescription:"JOB NAME: "+t.job.title+"  JOBID:"+t.contract.jobid+" MILESTONE:"+t.milestone.title+"("+t.milestoneId+")",proposalid:t.contractId,cardTransData_id:t.cardTransData_id.key},headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(e){t.modal.hide(),e.data&&"null"!=e.data&&null!=e.data&&"approved"==e.data.state?(t.payPalTransationResponce=e.data,t.payProccess("card")):(t.showPaymentbtn=!0,alert("Something went wrong. Please try again later. Contact support team if money is deducted from your account."),c.path("/app/contract/details/emp/"+t.contractId),o.reloadContractPage=!0),t.showresult=!0,t.result=e.data},function(e){t.showresult=!0,t.showPaymentbtn=!0,t.modal.hide(),alert("Something went wrong. Please try again later. Contact support team if money is deducted from your account."),c.path("/app/contract/details/emp/"+t.contractId),o.reloadContractPage=!0,l.hide()})}},s.trackPage("Assign_Milestone")}]},{}],35:[function(e,t,a){"use strict";t.exports=["$scope","Firebase","$state","$rootScope","$ionicLoading","$ionicModal","$http","$ionicPopup",function(e,t,a,o,r,n,i,s){e.showForm=!0,e.payNow=function(t,a){e.showForm=!1,i({method:"POST",url:window.location.origin+"/first.php",data:{token:o.loggedUserId,n:t.number,cv:t.cvc,fname:t.fname,lname:t.lname,expM:t.expiration.month,expY:t.expiration.year,amt:50,curr:"USD",type:a.toLowerCase(),itemName:"Ground Coffee 40 oz",itenDescription:"Ground Coffee 40 oz Description"},headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(t){e.showresult=!0,e.result=t.data},function(t){e.showresult=!0,r.hide()})}}]},{}],36:[function(e,t,a){"use strict";t.exports=["$scope","Firebase","$rootScope","$ionicLoading","Analytics","$stateParams","$firebaseObject","$ionicScrollDelegate","$ionicActionSheet","$http",function(e,t,a,o,r,n,i,s,l,c){if(a.checkLogin(),window.localStorage.getItem("info")){e.partner_id=n.id,e.loggedUser=JSON.parse(window.localStorage.getItem("info")).uid,e.data=[];var d=firebase.database().ref("/userschat/"+e.loggedUser+"/chat/"+e.partner_id);d.orderByChild("date").on("value",function(t){e.chatdata=t.val(),e.$$phase||e.$apply(),e.$watch("scopeNameOfTheElementThatRepeated",function(e,t){s.scrollBottom(!0)},!0)})}e.send=function(){var t=new Date,o=JSON.parse(angular.toJson({message:e.data.message,date:t,type:"receiver"})),r=firebase.database().ref("/userschat/"+e.partner_id+"/chat/"+e.loggedUser);r.push(o);var o=JSON.parse(angular.toJson({message:e.data.message,date:t,type:"sender"})),r=firebase.database().ref("/userschat/"+e.loggedUser+"/chat/"+e.partner_id);r.push(o);var n=firebase.database().ref("/inbox/"+e.partner_id),o=JSON.parse(angular.toJson({message:e.data.message,date:t,type:"chat",sender:e.loggedUser,senderName:a.userdata.name})),i=JSON.parse(angular.toJson({message:e.data.message,date:t,type:"chat",sender:e.loggedUser,senderName:a.userdata.name,status:"unread"}));n.orderByChild("sender").equalTo(e.loggedUser).once("value",function(t){if(t.val()){for(var a in t.val())if("chat"==t.val()[a].type){var o=firebase.database().ref("/inbox/"+e.partner_id+"/"+a);o.update(i)}}else{var o=firebase.database().ref("/inbox/"+e.partner_id);o.push(i)}});var s=JSON.parse(angular.toJson({date:t,type:"chat",sender:e.loggedUser,senderName:a.userdata.name,status:"unread"})),r=firebase.database().ref("/notification/"+e.partner_id);r.push(s),e.data.message=""},e.chatMoreOptions=function(t,a,o){l.show({buttons:[{text:"Translate"}],destructiveText:"Delete",cancelText:"Cancel",cancel:function(){},buttonClicked:function(e){if(0==e){var t=$("#chat"+o).html();$("#chat"+o).html("<img src='img/smallloading.gif' style='height:16px;width:28px'/>");var a=window.location.origin+"/translation.php";c({method:"POST",url:a,data:{text:t},headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(e){$("#chat"+o).html(e.data.text)},function(e){console.log(e)})}return!0},destructiveButtonClicked:function(){var a=firebase.database().ref("/userschat/"+e.loggedUser+"/chat/"+e.partner_id+"/"+t);return a.remove(),!0}})},r.trackPage("Chat")}]},{}],37:[function(e,t,a){"use strict";t.exports=["$scope","$ionicModal","$rootScope","$location","Firebase","Analytics","$ionicPopup","$stateParams","$ionicLoading",function(e,t,a,o,r,n,i,s,l){e.endcontract=[],a.checkLogin(),a.givefeedbackby||o.path("/app/mainpage"),e.endContract=function(){if(e.endcontract.reason)if(e.endcontract.communication)if(e.endcontract.understanding)if(e.endcontract.responsibility)if(e.endcontract.payment)if(e.endcontract.attitude)if(e.endcontract.feedback){if(e.endcontract.avgrating=(parseInt(e.endcontract.communication)+parseInt(e.endcontract.understanding)+parseInt(e.endcontract.responsibility)+parseInt(e.endcontract.payment)+parseInt(e.endcontract.attitude))/5,"talent"==a.givefeedbackby&&s.id){var t=firebase.database().ref("/contracts/"+s.id);t.once("value",function(t){if(t.val()){var a={reason:e.endcontract.reason,feedback:e.endcontract.feedback,attitude:e.endcontract.attitude,payment:e.endcontract.payment,responsibility:e.endcontract.responsibility,understanding:e.endcontract.understanding,communication:e.endcontract.communication,avgrating:e.endcontract.avgrating},r=firebase.database().ref("/contracts/"+s.id),n=new Date;if(t.val().feedbackbyEmployer){r.update({status:"end",feedbackbyTalent:a,contract_end_on:n});firebase.database().ref("/jobs/"+t.val().jobid+"/status").set("end")}else r.update({status:"completed",feedbackbyTalent:a});var i=firebase.database().ref("/jobs/"+t.val().jobid);i.once("value",function(e){var a=firebase.database().ref("/users/"+JSON.parse(window.localStorage.getItem("info")).uid+"/timeline");a.push({publishAt:n.toString(),title:"Job Completed.",subTitle:e.val().title,description:e.val().description,type:"jobs",reference:t.val().jobid,statusline:""})}),a.contract=t.val(),a.contract_id=t.key;var l=firebase.database().ref("/users/"+t.val().employer_id+"/asEmployerfeedback");l.push(a),o.path("/app/workorganizer")}})}if("employer"==a.givefeedbackby&&s.id){var t=firebase.database().ref("/contracts/"+s.id);t.once("value",function(t){if(t.val()){var a={reason:e.endcontract.reason,feedback:e.endcontract.feedback,attitude:e.endcontract.attitude,payment:e.endcontract.payment,responsibility:e.endcontract.responsibility,understanding:e.endcontract.understanding,communication:e.endcontract.communication,avgrating:e.endcontract.avgrating},r=new Date,n=firebase.database().ref("/contracts/"+s.id);if(t.val().feedbackbyTalent){n.update({status:"end",feedbackbyEmployer:a,contract_end_on:r});firebase.database().ref("/jobs/"+t.val().jobid+"/status").set("end")}else n.update({status:"completed",feedbackbyEmployer:a});var i=firebase.database().ref("/jobs/"+t.val().jobid);i.once("value",function(e){var a=firebase.database().ref("/users/"+JSON.parse(window.localStorage.getItem("info")).uid+"/timeline");a.push({publishAt:r.toString(),title:"Job Funded.",subTitle:e.val().title,description:e.val().description,type:"jobs",reference:t.val().jobid,statusline:""})}),a.contract=t.val(),a.contract_id=t.key;var l=firebase.database().ref("/users/"+t.val().talent_id+"/asTalentfeedback");l.push(a),o.path("/app/workorganizer")}})}}else{i.alert({title:"Worklidate",template:"Please fill feedback."})}else{i.alert({title:"Worklidate",template:"Please give 'Attitude' rating"})}else{i.alert({title:"Worklidate",template:"Please give 'Payment' rating"})}else{i.alert({title:"Worklidate",template:"Please give 'Responsibility' rating"})}else{i.alert({title:"Worklidate",template:"Please give 'Understanding' rating"})}else{i.alert({title:"Worklidate",template:"Please give 'Communication' rating"})}else{i.alert({title:"Worklidate",template:"Please select reason of end contract"})}},n.trackPage("Contract_Feedback")}]},{}],38:[function(e,t,a){"use strict";t.exports=["$scope","$ionicModal","$rootScope","$location","Firebase","$ionicPopup","$stateParams","$ionicLoading","$http",function(e,t,a,o,r,n,i,s,l){e.endcontract=[],a.endcontractby||o.path("/app/mainpage"),e.endContract=function(){if(e.endcontract.reason)if(e.endcontract.communication)if(e.endcontract.understanding)if(e.endcontract.responsibility)if(e.endcontract.payment)if(e.endcontract.attitude)if(e.endcontract.feedback){if(e.endcontract.avgrating=(parseInt(e.endcontract.communication)+parseInt(e.endcontract.understanding)+parseInt(e.endcontract.responsibility)+parseInt(e.endcontract.payment)+parseInt(e.endcontract.attitude))/5,"talent"==a.endcontractby&&i.id){s.show({template:"Loading..."});var t=firebase.database().ref("/contracts/"+i.id);t.once("value",function(t){if(t.val()){var r=firebase.database().ref("/transactions/").orderByChild("contractid").equalTo(i.id);r.once("value",function(r){l({method:"POST",url:window.location.origin+"/transaction.php",data:{token:a.loggedUserId,type:"endcontract",domain:window.location.origin,contract:i.id,job:t.val().jobid,transactions:r.val()},headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(a){if(s.hide(),"success"==a.data){var r=new Date,n={reason:e.endcontract.reason,feedback:e.endcontract.feedback,attitude:e.endcontract.attitude,payment:e.endcontract.payment,responsibility:e.endcontract.responsibility,understanding:e.endcontract.understanding,communication:e.endcontract.communication,avgrating:e.endcontract.avgrating},l=firebase.database().ref("/contracts/"+i.id);if(t.val().feedbackbyEmployer){l.update({status:"end",feedbackbyTalent:n,contract_end_on:r});firebase.database().ref("/jobs/"+t.val().jobid+"/status").set("end")}else l.update({endby:"talent",feedbackbyTalent:n});var c=firebase.database().ref("/jobs/"+t.val().jobid);c.once("value",function(e){var a=firebase.database().ref("/users/"+JSON.parse(window.localStorage.getItem("info")).uid+"/timeline");a.push({publishAt:r.toString(),title:"Job Completed.",subTitle:e.val().title,description:e.val().description,type:"jobs",reference:t.val().jobid,statusline:""})});var d=firebase.database().ref("/users/"+t.val().employer_id+"/asEmployerfeedback");n.contract=t.val(),n.contract_id=t.key,d.push(n);var p=JSON.parse(angular.toJson({message:"Contract end. *",date:r,type:"talent",system_message:"true"})),u=firebase.database().ref("/contracts/"+i.id+"/message");u.push(p),o.path("/app/workorganizer")}},function(e){console.log("error"),s.hide()})})}})}if("employer"==a.endcontractby&&i.id){s.show({template:"Loading..."});var t=firebase.database().ref("/contracts/"+i.id);t.once("value",function(t){if(t.val()){var r=firebase.database().ref("/transactions/").orderByChild("contractid").equalTo(i.id);r.once("value",function(r){l({method:"POST",url:window.location.origin+"/transaction.php",data:{token:a.loggedUserId,type:"endcontract",domain:window.location.origin,contract:i.id,job:t.val().jobid,transactions:r.val()},headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(a){if(s.hide(),"success"==a.data){var r={reason:e.endcontract.reason,feedback:e.endcontract.feedback,attitude:e.endcontract.attitude,payment:e.endcontract.payment,responsibility:e.endcontract.responsibility,understanding:e.endcontract.understanding,communication:e.endcontract.communication,avgrating:e.endcontract.avgrating},n=new Date,l=firebase.database().ref("/contracts/"+i.id);if(t.val().feedbackbyTalent){l.update({status:"end",feedbackbyEmployer:r,contract_end_on:n});firebase.database().ref("/jobs/"+t.val().jobid+"/status").set("end")}else l.update({endby:"employer",feedbackbyEmployer:r});var c=firebase.database().ref("/jobs/"+t.val().jobid);c.once("value",function(e){var a=firebase.database().ref("/users/"+JSON.parse(window.localStorage.getItem("info")).uid+"/timeline");a.push({publishAt:n.toString(),title:"Job Funded.",subTitle:e.val().title,description:e.val().description,type:"jobs",reference:t.val().jobid,statusline:""})}),r.contract=t.val(),r.contract_id=t.key;var d=firebase.database().ref("/users/"+t.val().talent_id+"/asTalentfeedback");d.push(r);var p=JSON.parse(angular.toJson({message:"Contact End. *",date:n,type:"employer",system_message:"true"})),u=firebase.database().ref("/contracts/"+i.id+"/message");u.push(p),o.path("/app/workorganizer")}},function(e){console.log("error"),s.hide()})})}})}}else{n.alert({title:"Worklidate",template:"Please fill feedback."})}else{n.alert({title:"Worklidate",template:"Please give 'Attitude' rating"})}else{n.alert({title:"Worklidate",template:"Please give 'Payment' rating"})}else{n.alert({title:"Worklidate",template:"Please give 'Responsibility' rating"})}else{n.alert({title:"Worklidate",template:"Please give 'Understanding' rating"})}else{n.alert({title:"Worklidate",template:"Please give 'Communication' rating"})}else{n.alert({title:"Worklidate",template:"Please select reason of end contract"})}}}]},{}],39:[function(e,t,a){"use strict";t.exports=["$scope","$ionicModal","$rootScope","Firebase","$ionicPopup","Analytics",function(e,t,a,o,r,n){a.checkLogin();var i=firebase.database().ref("/faq");i.on("value",function(t){e.faqs=[];for(var a in t.val()){var o=t.val()[a];o.id=a,e.faqs.push(o)}e.$$phase||e.$apply()}),n.trackPage("FAQ")}]},{}],40:[function(e,t,a){"use strict";t.exports=["$scope","$rootScope","$ionicLoading","$location","$stateParams","$ionicPopup",function(e,t,a,o,r,n){if(t.checkLogin(),e.groupId=r.id,t.inviteMember=function(){o.path("/app/groupinvite/"+e.groupId)},e.loggeduserIsFollower=!1,e.groupId){a.show({template:"Loading..."});var i=firebase.database().ref("/groups/"+e.groupId);i.on("value",function(o){e.group=o.val(),e.group.admin_userid==JSON.parse(window.localStorage.getItem("info")).uid||e.group.owner_userid==JSON.parse(window.localStorage.getItem("info")).uid?t.showManageTopicOption=!0:t.showManageTopicOption=!1,e.group.owner_userid==JSON.parse(window.localStorage.getItem("info")).uid?t.showAdminOption=!0:t.showAdminOption=!1,a.hide()},function(e){console.log("The read failed: "+e.code),a.hide()});var s=firebase.database().ref("/users/"+JSON.parse(window.localStorage.getItem("info")).uid+"/groups_follow");s.orderByChild("groupid").equalTo(e.groupId).on("value",function(t){null==t.val()?e.loggeduserIsFollower=!1:e.loggeduserIsFollower=!0})}}]},{}],41:[function(e,t,a){"use strict";var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.exports=["$scope",function(e,t,a,r,n){a.checkLogin(),e.groupId=r.id;var i,s=500,l=$("#myInput_1");l.on("keyup",function(){clearTimeout(i),i=setTimeout(function(){e.searchuser()},s)}),l.on("keydown",function(){clearTimeout(i)}),e.inviteMember=function(o){if(e.groupId){t.show({template:"Inviting..."});var r=firebase.database().ref("/groups/"+e.groupId+"/invites");r.orderByChild("userid").equalTo(o).once("value",function(n){if(null==n.val()){r.push({userid:o});var i=firebase.database().ref("/users/"+o+"/groups_invitaion");i.push({groupid:e.groupId}),e.searchuser(),t.hide();var s=new Date,l=JSON.parse(angular.toJson({date:s,type:"group_invitation",sender:a.loggedUserId,senderName:a.userdata.name,status:"unread",message:a.userdata.name+" sent you an invitation to join group."})),c=firebase.database().ref("/notification/"+o);c.push(l),alert("Invitation sent.")}else t.hide(),alert("Already sent")})}},e["typeof"]=function(e){return("undefined"==typeof e?"undefined":o(e)).toString()},e.search=[],e.displayNotFound=!1,e.searchuser=function(){if(e.displayNotFound=!1,delete e.searched_result,e.searched_result=[],e.search.groupsearch.length>0)for(key in a.data_for_search.users)a.data_for_search.users[key].title.indexOf(e.search.groupsearch.toLowerCase())>-1&&e.searched_result.push(a.data_for_search.users[key]),e.$apply();else e.searched_group_result=[],e.displayNotFound=!1},n.trackPage("Groupt_Invitation")}]},{}],42:[function(e,t,a){"use strict";t.exports=["$scope","Upload","$rootScope","Firebase","$ionicLoading","$location","$ionicPopup","Analytics","$ionicModal",function(e,t,a,o,r,n,i,s,l){e.data={};var c=firebase.storage().ref();e.onDropComplete=function(e,t,o){a.filesdata[o];a.filesdata.splice(e,1),a.filesdata.splice(o,0,t)},e.coverP=!1,e.setCoverPic=function(e){a.filesdata.forEach(function(t,o){o==e?a.filesdata[o].coverPic=!0:a.filesdata[o].coverPic=!1})},e.onFileSelect=function(t,o){if(t[0]&&"image"==o&&(0==e.coverP&&(t[0].coverPic=!0),e.coverP=!0,t[0].objecttype="image",a.filesdata?a.filesdata.push(t[0]):(a.filesdata=[],a.filesdata.push(t[0]))),"text"==o){var r=[];r.text="",0==e.coverP&&(r.coverPic=!0),e.coverP=!0,r.objecttype="text",a.filesdata?a.filesdata.push(r):(a.filesdata=[],a.filesdata.push(r))}},e.coverPicDeleted=!1,e["delete"]=function(t){e.filesdata_temp=[],a.filesdata.forEach(function(a,o){o!=t&&e.filesdata_temp.push(a),o==t&&1==a.coverPic&&(e.coverPicDeleted=!0)}),setTimeout(function(){delete a.filesdata,a.filesdata=[],a.filesdata=e.filesdata_temp,1==e.coverPicDeleted&&(e.filesdata[0]?e.filesdata[0].coverPic=!0:e.coverP=!1),e.coverPicDeleted=!1,a.$apply()},100)},e.fillText=function(e,t){a.filesdata[t].text=e},e.publishProject=function(t){if(e.closeModal(),e.filesdata_temp1=[],a.filesdata&&a.filesdata.forEach(function(t,a){t.ei=a,"image"==t.objecttype&&e.filesdata_temp1.push(t),1==t.coverPic&&(e.coverPicture=t)}),t)if(t.projectTitle){r.show({template:"Adding Project..."}),t.images=[],t.publishAt=new Date,t.views=0,t.likes=0;var o=[],s=[];t.categories&&t.categories.forEach(function(e){o.push(e.name),s.push(e.id)});var l=[];t.tags&&t.tags.forEach(function(e){l.push(e.text)});var d=JSON.parse(angular.toJson(t));d.userid=JSON.parse(window.localStorage.getItem("info")).uid;var p=firebase.database().ref("/projects"),u=p.push(d);if(s.forEach(function(e){var a=firebase.database().ref("/categoryprojects/"+e);a.push(JSON.parse(angular.toJson({project_id:u.key,timestamp:t.publishAt})))}),e.coverPicture&&"text"==e.coverPicture.objecttype){firebase.database().ref("/projects/"+u.key+"/coverPicture").set({type:e.coverPicture.objecttype,data:e.coverPicture.text})}var m=firebase.database().ref("/search/projects"),f=(m.push({project_id:u.key,title:t.projectTitle.toLowerCase(),category:o.join(),tags:l,publishAt:d.publishAt}),firebase.database().ref("/users/"+JSON.parse(window.localStorage.getItem("info")).uid+"/timeline"));f.push({publishAt:d.publishAt,title:"Project Posted",subTitle:t.projectTitle,description:t.description,type:"projects",reference:u.key,statusline:""});if(a.filesdata)if(e.filesdata_temp1.length>0)a.downloadUrlData=[],r.show({template:"Uploading Images..."}),e.filesdata_temp1.forEach(function(t,o){var i=c.child("upload/project/"+JSON.parse(window.localStorage.getItem("info")).uid+"/"+u.key+"/"+t.name).put(t);i.on("state_changed",function(e){var t=e.bytesTransferred/e.totalBytes*100;switch(t=parseInt(t),r.show({template:"Upload is "+parseInt(t)+"% done"}),e.state){case firebase.storage.TaskState.PAUSED:console.log("Upload is paused");break;case firebase.storage.TaskState.RUNNING:console.log("Upload is running")}},function(e){},function(){var s=i.snapshot.downloadURL;if(a.filesdata[t.ei].downloadUrl=s,e.downloadUrlData.push(s),o==e.filesdata_temp1.length-1){var l=[];a.filesdata.forEach(function(t,o){"text"==t.objecttype&&t.text?l.push({type:t.objecttype,data:t.text}):"image"==t.objecttype&&e.downloadUrlData[o]&&l.push({type:t.objecttype,data:e.downloadUrlData[o]}),setTimeout(function(){if(1==t.coverPic)if("text"==t.objecttype){firebase.database().ref("/projects/"+u.key+"/coverPicture").set({type:t.objecttype,data:t.text})}else{firebase.database().ref("/projects/"+u.key+"/coverPicture").set({type:t.objecttype,data:e.downloadUrlData[o]})}o==a.filesdata.length-1&&setTimeout(function(){var t=firebase.database().ref("/projects/"+u.key+"/images");t.set(l);r.show({template:"Project published..."}),n.path("/app/project_details/"+u.key),setTimeout(function(){r.hide(),a.filesdata=[],e.data={},location.reload()},100)},100)},1e3)}),r.hide()}})});else{var g=[];a.filesdata.forEach(function(t,o){if("text"==t.objecttype&&g.push({type:t.objecttype,
data:t.text}),1==t.coverPic){firebase.database().ref("/projects/"+u.key+"/coverPicture").set({type:"text",data:t.text})}if(o==a.filesdata.length-1){var i=firebase.database().ref("/projects/"+u.key+"/images");i.set(g);r.show({template:"Project published..."}),n.path("/app/project_details/"+u.key),setTimeout(function(){r.hide(),a.filesdata=[],e.data={},location.reload()},100)}})}else r.show({template:"Project published..."}),n.path("/app/project_details/"+u.key),setTimeout(function(){location.reload(),r.hide()},100)}else i.alert({title:"Required!",content:"Please enter project title."}).then(function(e){console.log("Test Alert Box")})},l.fromTemplateUrl("my-modal.html",{scope:e,animation:"slide-in-up"}).then(function(t){e.modal=t}),e.openModal=function(){e.modal.show()},e.closeModal=function(){e.modal.hide()},s.trackPage("Add_Project")}]},{}],43:[function(e,t,a){"use strict";t.exports=["$scope","$rootScope","Firebase","$stateParams","$ionicLoading","Analytics",function(e,t,a,o,r,n){e.uid=o.id,t.checkLogin();var i=firebase.database().ref("/jobs/");i.orderByChild("userid").equalTo(JSON.parse(window.localStorage.getItem("info")).uid).on("value",function(t){e.userOpenJobs=[];for(var a in t.val()){var o=t.val()[a];o.id=a,"open"==t.val()[a].status&&e.userOpenJobs.push(o),e.$$phase||e.$apply()}}),e.inviteTalent=function(a){if(a.id&&e.uid){r.show({template:"Sending..."});var o=firebase.database().ref("/jobs/"+a.id+"/invites");o.orderByChild("userid").equalTo(e.uid).once("value",function(n){if(null==n.val()){o.push({userid:e.uid});var i=firebase.database().ref("/users/"+e.uid+"/job_invitaion");i.push({jobid:a.id});var s=new Date,l=JSON.parse(angular.toJson({jobid:a.id,date:s,type:"job_invitaion",sender:t.loggedUserId,senderName:t.userdata.name,status:"unread",message:t.userdata.name+" sent you an invitation to apply job."})),c=firebase.database().ref("/notification/"+e.uid);c.push(l),r.hide(),alert("Invitation sent.")}else r.hide(),alert("Already sent")})}},n.trackPage("Invite_For_Job")}]},{}],44:[function(e,t,a){"use strict";t.exports=["$scope","$rootScope","$http","$ionicLoading",function(e,t,a,o){t.checkLogin()}]},{}],45:[function(e,t,a){"use strict";t.exports=["$scope","$ionicModal","$rootScope","Firebase","$ionicPopup","$stateParams","$ionicLoading","$location","Analytics",function(e,t,a,o,r,n,i,s,l){if(a.checkLogin(),n.id){e.jobid=n.id,i.show({template:"Loading..."});var c=firebase.database().ref("/jobs/"+n.id);c.once("value",function(t){t.val().userid==a.loggedUserId&&"open"==t.val().status&&(e.job=t.val()),i.hide()}),e.removeJob=function(){if(n.id){var t=r.confirm({title:"Remove Job",template:"Are you sure you want to remove this job?"});t.then(function(t){if(t){i.show({template:"Loading..."});var o=firebase.database().ref("/jobs/"+n.id);o.once("value",function(t){if(t.val()){var r=t.val().title,l=firebase.database().ref("/jobproposals/").orderByChild("jobid").equalTo(n.id);l.once("value",function(t){i.hide(),e.proposals=t.val();for(var o in e.proposals)if(e.proposals[o].talent_id){var n=new Date,s=JSON.parse(angular.toJson({date:n,message:a.userdata.name+'(Employer) deleted a job "'+r+'"',type:"contractmessage",sender:a.loggedUserId,senderName:a.userdata.name,status:"unread"})),l=firebase.database().ref("/notification/"+e.proposals[o].talent_id);l.push(s);var c=firebase.database().ref("/jobproposals/"+o);c.remove()}}),o.remove(),i.hide(),s.path("/app/workorganizer")}else i.hide()})}else console.log("You are not sure")})}}}l.trackPage("Job_Details")}]},{}],46:[function(e,t,a){"use strict";t.exports=["$scope","$ionicModal","$rootScope","Firebase","$ionicPopup","$stateParams","$ionicLoading","Analytics",function(e,t,a,o,r,n,i,s){if(a.checkLogin(),n.id){e.jobid=n.id,i.show({template:"Loading..."});var l=firebase.database().ref("/jobs/"+n.id);l.once("value",function(t){e.job=t.val(),i.hide()})}s.trackPage("Job_Details")}]},{}],47:[function(e,t,a){"use strict";t.exports=["$scope","$filter","Upload","$rootScope","Firebase","$ionicLoading","$location","$ionicPopup","$ionicModal","Analytics",function(e,t,a,o,r,n,i,s,l,c){e.job=[],o.checkLogin();var d=firebase.storage().ref();e.job.description="",e.onFileSelect=function(t,a){t[0]&&(t[0].size<=39e6?e.attachedfilesdata?e.attachedfilesdata.push(t[0]):(e.attachedfilesdata=[],e.attachedfilesdata.push(t[0])):alert("File size must be less than 35MB."))},e["delete"]=function(t){e.filesdata_temp=[],e.attachedfilesdata.forEach(function(a,o){o!=t&&e.filesdata_temp.push(a)}),setTimeout(function(){delete e.attachedfilesdata,e.attachedfilesdata=[],e.$apply()},100)},e.removeQuestion=function(t){e.job.screeningQuestions.splice(t,1)},e.invalidFile=function(e){},l.fromTemplateUrl("my-modal.html",{scope:e,animation:"slide-in-up"}).then(function(t){e.modal=t}),e.confirm_postJob=function(){e.openModal()},e.openModal=function(){e.modal.show()},e.closeModal=function(){e.modal.hide()},e.postJob=function(a){if(e.closeModal(),e.job.title)if(e.job.budget)if(e.job.deliveryTime){var o=e.job.deliveryTime.split("-"),r=new Date,n=new Date(o[1]+"/"+o[0]+"/"+o[2]);t("date")(r,"dd/MM/yyyy"),t("date")(n,"dd/MM/yyyy");e.job.categories?e.publishJob(a):s.alert({title:"Required",template:"Please enter the job categories."})}else s.alert({title:"Required",template:"Please enter the job delivery time."});else s.alert({title:"Required",template:"Please enter the job budget."});else s.alert({title:"Required",template:"Please enter the job title."})},e.publishJob=function(t){n.show({template:"Uploading job..."});var a=[];e.job.publishAt=new Date,a.publishAt=e.job.publishAt.toString(),a.title=e.job.title,a.userid=JSON.parse(window.localStorage.getItem("info")).uid,e.job.categories&&(a.categories=JSON.parse(angular.toJson(e.job.categories))),e.job.aboutBrand&&(a.aboutBrand=e.job.aboutBrand),e.job.targetAudience&&(a.targetAudience=e.job.targetAudience),e.job.designValue&&(a.designValue=e.job.designValue),e.job.colorsParticular&&(a.colorsParticular=e.job.colorsParticular),e.job.deliveryTime&&(a.deliveryTime=e.job.deliveryTime),e.job.description&&(a.description=e.job.description),e.job.budget&&(a.budget=e.job.budget),e.job.talentnumber&&(a.talentnumber=e.job.talentnumber),e.job.jobLength&&(a.jobLength=e.job.jobLength),e.job.experienceLevel&&(a.experienceLevel=e.job.experienceLevel),e.job.timePreference&&(a.timePreference=e.job.timePreference),e.job.viewtype&&(a.viewtype=e.job.viewtype),e.job.currency&&(a.currency=e.job.currency),a.status="open",e.job.screeningQuestions&&(a.screeningQuestions=[],e.job.screeningQuestions.forEach(function(e){e.text&&a.screeningQuestions.push(e.text)})),e.job.skills&&(a.skills=JSON.parse(angular.toJson(e.job.skills)));var o=firebase.database().ref("/jobs"),r=o.push(a),l=firebase.database().ref("/users/"+JSON.parse(window.localStorage.getItem("info")).uid+"/timeline"),c=(l.push({publishAt:a.publishAt,title:"Job Posted",subTitle:a.title,description:a.description,type:"jobs",reference:r.key,statusline:""}),firebase.database().ref("/users/"+JSON.parse(window.localStorage.getItem("info")).uid+"/jobs"));if(c.push({jobid:r.key}),e.job.categories.forEach(function(e){var t=firebase.database().ref("/categoryjobs/"+e.id);t.push(JSON.parse(angular.toJson({job_id:r.key,timestamp:a.publishAt})))}),e.attachedfilesdata&&e.attachedfilesdata.length>0)e.attachedfilesdata.forEach(function(t,a){var o=d.child("upload/job/"+JSON.parse(window.localStorage.getItem("info")).uid+"/"+r.key+"/"+t.name).put(t);o.on("state_changed",function(e){t=parseInt(t);var t=e.bytesTransferred/e.totalBytes*100;switch(n.show({template:"Upload is "+parseInt(t)+"% done"}),e.state){case firebase.storage.TaskState.PAUSED:console.log("Upload is paused");break;case firebase.storage.TaskState.RUNNING:console.log("Upload is running")}},function(e){},function(){var t=o.snapshot.downloadURL;if(e.attachedfilesdata[a].downloadUrl=t,a==e.attachedfilesdata.length-1){var l=[];e.attachedfilesdata.forEach(function(t,a){if(l.push({name:t.name,data:t.downloadUrl}),a==e.attachedfilesdata.length-1){var o=firebase.database().ref("/jobs/"+r.key+"/attachments");o.set(l);n.hide();s.alert({title:"Worklidate",template:"Job published successfully."});i.path("/app/job/details/"+r.key)}}),n.hide()}})});else{n.hide();s.alert({title:"Worklidate",template:"Job published successfully."});i.path("/app/job/details/"+r.key)}},e.addQuestion=function(){e.job.screeningQuestions?e.job.screeningQuestions.push({id:e.job.screeningQuestions.length+1}):(e.job.screeningQuestions=[],e.job.screeningQuestions.push({id:1}))},c.trackPage("Post_Job")}]},{}],48:[function(e,t,a){"use strict";t.exports=["$scope","$rootScope","$ionicModal","$ionicPopover","Firebase","$location","$ionicLoading","$filter","$state","$ionicSideMenuDelegate",function(e,t,a,o,r,n,i,s,l,c){}]},{}],49:[function(e,t,a){"use strict";t.exports=["$scope","Firebase","$state","$ionicLoading","$timeout","$rootScope","$ionicPopup","$http","$window","Analytics","$ionicModal",function(e,t,a,o,r,n,i,s,l,c,d){function p(e,t){switch(t){case"password":return e.password.email.replace(/@.*/,"");case"twitter":return e.user.displayName;case"facebook":return e.user.displayName;case"google":return e.user.displayName}}o.hide(),n.checkLogin(),window.localStorage.getItem("just_logout")&&(window.localStorage.removeItem("just_logout"),location.reload()),e.data=[],d.fromTemplateUrl("interested_category_1.html",{scope:e,animation:"slide-in-up"}).then(function(t){e.modal=t});var u=firebase.auth(),m=firebase.database().ref();e.userSettings=[];var f=firebase.database().ref("/categories");f.orderByChild("parent_id").equalTo(0).once("value",function(t){e.category_level_1=[];for(var a in t.val())if(0==t.val()[a].parent_id){var o=t.val()[a];o.id=a,e.category_level_1.push(o)}}),e.userlogin=function(t){t.username&&t.password?(o.show({template:"Loading..."}),u.signInWithEmailAndPassword(t.username,t.password).then(function(t){if(t.emailVerified){firebase.database().ref("/users/"+t.uid+"/accountStatus").set("activated");window.localStorage.setItem("info",JSON.stringify(t)),e.data.password="",o.hide();var a=history.length;history.go(-a),n.refreshHomePage=!0,window.localStorage.getItem("info")&&(n.loggedUserId=JSON.parse(window.localStorage.getItem("info")).uid),window.location.replace("#/app/mainpage"),n.getInitialUserData()}else{e.data.password="",o.hide();var r=i.show({template:"<b>Your email address is not confirm yet. Please confirm your email address.</b>",title:"Worklidate",subTitle:"",scope:e,buttons:[{text:"OK"},{text:"Resend Email",type:"button-positive",onTap:function(e){t.sendEmailVerification(),r.close()}}]})}},function(e){console.log(e),o.hide();var t=e.email;if("auth/user-not-found"==e.code){i.alert({title:"Login Failed",template:"There is no user record corresponding to this email address."})}else{i.alert({title:"Login Failed",template:e.message})}e.credential;"auth/account-exists-with-different-credential"===e.code&&u.fetchProvidersForEmail(t).then(function(e){})})):alert("Enter Username/Password")},e.saveData=function(t,a){var r=(new Date,(new Date).getTimezoneOffset()),i="",s="",l=t.user.displayName.split(" ");l[0]&&(i=l[0]),l[1]&&(s=l[1]);var c=firebase.database().ref("/users/"+t.user.uid);c.on("value",function(l){if(l.val())if(m.child("users").child(t.user.uid).update({provider:a,name:p(t,a),email:t.user.email,firstname:i,lastname:s}),l.val().interested_categories){window.localStorage.setItem("info",JSON.stringify(t.user)),o.hide();var c=history.length;history.go(-c),n.refreshHomePage=!0,window.location.replace("#/app/mainpage")}else window.localStorage.setItem("info",JSON.stringify(t.user)),n.getInitialUserData(),o.hide(),e.modal.show(),e.uid=t.user.uid;else m.child("users").child(t.user.uid).set({provider:a,name:p(t,a),email:t.user.email,firstname:i,lastname:s,locationVerified:!1,timeoffset:r,accountStatus:"activated"}),e.modal.show(),window.localStorage.setItem("info",JSON.stringify(t.user)),n.getInitialUserData(),e.uid=t.user.uid})},e.login=function(t){var a;"facebook"==t&&(a=new firebase.auth.FacebookAuthProvider),"email"==t&&(a=new firebase.auth.EmailAuthProvider),"google"==t&&(a=new firebase.auth.GoogleAuthProvider),"twitter"==t&&(a=new firebase.auth.TwitterAuthProvider),a.addScope("email"),a.addScope("profile"),u.signInWithPopup(a).then(function(a){var o=a.user.uid;e.saveData(a,t),window.localStorage.getItem("info")&&(n.loggedUserId=o)})["catch"](function(e){console.log(e)})},e.getCategories=function(e){$("#category"+e).toggle("show")},e.userdata=[],e.interested_categoriesDone=function(t){var a=JSON.parse(angular.toJson(e.userdata.interested_categories));firebase.database().ref("/users/"+e.uid+"/interested_categories").set(a,function(t){if(t)alert("Data could not be saved."+t),e.modal.hide();else{e.modal.hide();var a=history.length;history.go(-a),n.refreshHomePage=!0,window.location.replace("#/app/mainpage")}})},e.markCategory=function(t,a){if(0==e.userSettings.length)e.userSettings.push(t),$("#category"+t).addClass("checked"),$("#category"+t).removeClass("unchecked"),e.userdata.interested_categories=[],e.userdata.interested_categories.push(a);else{var o=!0;e.userSettings.forEach(function(r,n){r==t&&($("#category"+t).addClass("unchecked"),$("#category"+t).removeClass("checked"),e.userSettings.splice(n,1),o=!1,e.userdata.interested_categories.splice(n,1)),setTimeout(function(){n==e.userSettings.length-1&&1==o&&(e.userSettings.push(t),$("#category"+t).addClass("checked"),$("#category"+t).removeClass("unchecked"),e.userdata.interested_categories.push(a)),e.$$phase||e.$apply()},10)})}},e.logout=function(){Auth.$unauth()},c.trackPage("Login")}]},{}],50:[function(e,t,a){"use strict";t.exports=["$scope","$rootScope","$http","$ionicLoading","Analytics",function(e,t,a,o,r){t.checkLogin(),t.userdata&&t.userdata.paymethodemail&&(e.data.payemail=t.userdata.paymethodemail),e.submit=function(e){e?(o.show({template:"Loading..."}),a({method:"POST",url:window.location.origin+"/transaction.php",data:{token:t.loggedUserId,type:"paymethodemail",domain:window.location.origin,email:e},headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(e){o.hide(),"success"==e.data?alert("Paypal email address is address successfully."):alert("Something went wrong. Please try again later.")},function(e){console.log(e),alert("Something went wrong. Please try again later."),o.hide()})):alert("Please enter your paypal email address")},r.trackPage("Payment_Method")}]},{}],51:[function(e,t,a){"use strict";t.exports=["$scope",function(e,t,a,o,r,n,i,s,l,c,d){if(a.checkLogin(),e.jobid=0,e.payPalTransationResponce=[],n.id){var p=firebase.database().ref("/paypalPaymentData/"+n.id);p.once("value",function(t){e.payPalTransationResponce=t.val().paypal,t.val().data.proposalid&&"firstpayment"==t.val().data.type&&(e.proposalid=t.val().data.proposalid,setTimeout(function(){e.firstpayment()},100)),t.val().data.contractId&&"nextMilestonePayment"==t.val().data.type&&(e.contractId=t.val().data.contractId,setTimeout(function(){e.nextMilestonePayment()},100)),t.val().data.contractId&&t.val().data.milestoneid&&"bonus"==t.val().data.type&&(e.contractId=t.val().data.contractId,e.milestoneId=t.val().data.milestoneid,setTimeout(function(){e.bonuspayment()},100))})}e.nextMilestonePaymentProccess=function(t){i.show({template:"Proccessing..."}),!e.milestone.status&&e.milestoneId&&e.contractId&&l({method:"POST",url:window.location.origin+"/transaction.php",data:{token:a.loggedUserId,type:"milestone_payment",domain:window.location.origin,milestone:e.milestoneId,contract:e.contractId,job:e.contract.jobid,payType:t,payPalTransationResponce:e.payPalTransationResponce},headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(t){if("success"==t.data){var a=(firebase.database().ref("/contracts/"+e.contractId+"/milestones/"+e.milestoneId+"/status").set("working"),new Date),o=JSON.parse(angular.toJson({message:"'"+e.milestone.title+"' Milestone assigned *",date:a,type:"employer",subtype:"milestone_assign",system_message:"true",status:"unread"})),r=firebase.database().ref("/contracts/"+e.contractId+"/message");r.push(o),i.hide(),s.path("/app/contract/details/emp/"+e.contractId)}},function(e){console.log(e),i.hide()})},e.nextMilestonePayment=function(){i.show({template:"Loading..."});var t=firebase.database().ref("/contracts/"+e.contractId);t.once("value",function(t){if(t.val()){e.contract=t.val();for(var a in e.contract.milestones)e.contract.milestones[a].status||e.milestone||(e.milestone=e.contract.milestones[a],e.milestoneId=a);setTimeout(function(){if(e.milestone)if(e.milestone.status)s.path("/app/mainpage");else{var t=firebase.database().ref("/jobs/"+e.contract.jobid);t.once("value",function(t){e.job=t.val(),e.nextMilestonePaymentProccess("paypal")})}else s.path("/app/mainpage")},2e3)}else s.path("/app/mainpage"),i.hide()})},e.bonuspayment=function(){i.show({template:"Loading..."});var t=firebase.database().ref("/contracts/"+e.contractId);t.once("value",function(t){if(e.contract=t.val(),e.milestone=e.contract.milestones[e.milestoneId],e.milestone)if("submitted"==e.milestone.status){var a=firebase.database().ref("/jobs/"+e.contract.jobid);a.once("value",function(t){e.job=t.val(),e.payBonusProccess("paypal",e.payPalTransationResponce)})}else s.path("/app/mainpage");else s.path("/app/mainpage");i.hide()})},e.payBonusProccess=function(t,o){i.show({template:"Proccessing..."}),l({method:"POST",url:window.location.origin+"/transaction.php",data:{token:a.loggedUserId,type:"bonus",domain:window.location.origin,milestone:e.milestoneId,contract:e.contractId,job:e.contract.jobid,amount:o.transactions[0].amount.total,payType:t,payPalTransationResponce:e.payPalTransationResponce},headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(t){if(i.show({template:"Proccessing..."}),"success"==t.data){i.show({template:"Proccessing..."});var r=null,n=firebase.database().ref("/transactions/").orderByChild("contractid").equalTo(e.contractId);n.once("value",function(t){for(var n in t.val())t.val()[n].milestoneid==e.milestoneId&&"escrow"==t.val()[n].payment_status&&(r=n);var s=t.val()[n].amount;setTimeout(function(){null!=r&&(i.show({template:"Proccessing..."}),l({method:"POST",url:window.location.origin+"/transaction.php",data:{token:a.loggedUserId,type:"milestone_approved",domain:window.location.origin,milestone:e.milestoneId,contract:e.contractId,job:e.contract.jobid,transactionsId:r},headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(t){if(i.show({template:"Proccessing..."}),"success"==t.data){i.show({template:"Proccessing..."});var r=new Date,n=(firebase.database().ref("/contracts/"+e.contractId+"/milestones/"+e.milestoneId).update({status:"approved",approved_on:r}),firebase.database().ref("/contracts/"+e.contractId+"/assigned_milestone").set("false"),JSON.parse(angular.toJson({message:"Milestone approved. Paid "+e.contract.currency+" "+s+" and bonus "+e.contract.currency+" "+o.transactions[0].amount.total+". *",date:r,type:"employer",subtype:"milestone_approved",data:"/"+e.contractId+"/"+e.milestoneId,system_message:"true",status:"unread"}))),l=firebase.database().ref("/contracts/"+e.contractId+"/message");l.push(n);var d=(firebase.database().ref("/contracts/"+e.contractId+"/milestones/"+e.milestoneId+"/bonus").set(o.transactions[0].amount.total),firebase.database().ref("/contracts/"+e.contractId));d.once("value",function(t){if(i.show({template:"Proccessing..."}),t.val()){e.contract=t.val();for(var o in e.contract.milestones)e.contract.milestones[o].status||(e.milestoneIsRemaining=!0),"submitted"==e.contract.milestones[o].status&&(e.milestoneIsSubmitted=!0),"working"==e.contract.milestones[o].status&&(e.milestoneIsWorking=!0);i.show({template:"Proccessing..."}),c(function(){1!=e.milestoneIsRemaining&&1!=e.milestoneIsWorking&&1!=e.milestoneIsSubmitted?(a.endcontractby="employer",window.location.replace("#/app/endcontract/"+e.contractId),i.hide()):(window.location.replace("#/app/contract/details/emp/"+e.contractId),i.hide())},1e4)}})}},function(e){console.log(e),i.hide()}))},3e3)})}else alert("eror"),i.hide()},function(e){console.log(e),i.hide()})},e.firstpayment=function(){i.show({template:"Loading..."});var t=firebase.database().ref("/jobproposals/"+e.proposalid);t.once("value",function(t){if(t.val()){e.contract=t.val(),e.jobid=e.contract.jobid;var a=firebase.database().ref("/jobs/"+e.jobid);a.once("value",function(t){e.job=t.val()});for(var o in e.contract.milestones)e.contract.milestones[o].status||e.milestone||(e.milestone=e.contract.milestones[o],e.milestoneId=o);setTimeout(function(){e.milestone?e.milestone.status?s.path("/app/mainpage"):e.payFirstPaymentProccess("paypal"):s.path("/app/mainpage"),i.hide()},2e3)}else s.path("/app/mainpage")})},e.payFirstPaymentProccess=function(t){if(i.show({template:"Proccessing..."}),!e.milestone.status&&e.milestoneId&&e.proposalid&&e.job){i.show({template:"Proccessing..."});var o=firebase.database().ref("/jobproposals/"+e.proposalid);o.once("value",function(o){i.show({template:"Proccessing..."});var r=new Date,n=firebase.database().ref("/contracts/"),s=o.val();s.milestones[0]&&(s.milestones[0].status="working"),s.contract_start_on=r.toString();var c=n.push(s);if(c.key){var d=new Date,p=JSON.parse(angular.toJson({message:"Contract started  *",date:d,type:"employer",system_message:"true",status:"unread"})),u=firebase.database().ref("/jobproposals/"+e.proposalid+"/message");u.push(p),i.show({template:"Proccessing..."}),l({method:"POST",url:window.location.origin+"/transaction.php",data:{token:a.loggedUserId,type:"milestone_payment",domain:window.location.origin,milestone:e.milestoneId,contract:c.key,job:e.contract.jobid,payType:t,payPalTransationResponce:e.payPalTransationResponce},headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(t){if(i.show({template:"Proccessing..."}),"success"==t.data){i.show({template:"Proccessing..."});var o=firebase.database().ref("/jobproposals/"+e.proposalid);o.remove();firebase.database().ref("/jobs/"+e.contract.jobid+"/status").set("working");a.clearBrowserHistory=!0;var r=firebase.database().ref("/users/"+e.contract.employer_id+"/timeline"),n=(r.push({publishAt:d.toString(),title:"Hired talent for job.",subTitle:e.job.title,description:e.job.description,type:"jobs",reference:e.contract.jobid,statusline:""}),firebase.database().ref("/users/"+e.contract.talent_id+"/timeline")),s=(n.push({publishAt:d.toString(),title:"Hired for job.",subTitle:e.job.title,description:e.job.description,type:"jobs",reference:e.contract.jobid,statusline:""}),JSON.parse(angular.toJson({message:"Contract confirmed and funded first milestone.",date:d,type:"employer",status:"unread",system_message:"true"}))),l=firebase.database().ref("/contracts/"+c.key+"/message");l.push(s);var p=JSON.parse(angular.toJson({date:d,message:a.userdata.name+'(Employer) confirmed contract and funded first milestone for job  "'+e.job.title+'"',type:"contractmessage",sender:a.loggedUserId,senderName:a.userdata.name,status:"unread"})),u=firebase.database().ref("/notification/"+e.contract.talent_id);u.push(p);var m=firebase.database().ref("/jobproposals/").orderByChild("jobid").equalTo(e.contract.jobid);m.once("value",function(t){if(t.val()){for(var o in t.val()){var r=firebase.database().ref("/jobproposals/"+o),n=(firebase.database().ref("/jobproposalsClosed/"+o).set(t.val()[o]),JSON.parse(angular.toJson({date:d,message:'Your proposal to the job "'+e.job.title+'" was declined. Employer picked another freelancer',type:"contractmessage",sender:a.loggedUserId,senderName:a.userdata.name,status:"unread"}))),i=firebase.database().ref("/notification/"+t.val()[o].talent_id);i.push(n),r.remove()}setTimeout(function(){var e=history.length;history.go(-e),window.location.replace("#/app/contract/details/emp/"+c.key)},5e3)}else{var s=history.length;history.go(-s),window.location.replace("#/app/contract/details/emp/"+c.key)}})}},function(e){console.log(e),i.hide()})}})}},d.trackPage("Payment_Using_Paypal")}]},{}],52:[function(e,t,a){"use strict";t.exports=["$scope","$ionicModal","$rootScope","Firebase","$ionicPopup","$stateParams","$ionicLoading","$location","$http","Analytics",function(e,t,a,o,r,n,i,s,l,c){c.trackPage("Payment_Using_Paypal_Fail"),a.checkLogin()}]},{}],53:[function(e,t,a){"use strict";t.exports=["$scope","$ionicModal","$rootScope","Firebase","$location","$ionicPopup","$stateParams","$timeout","$ionicLoading","$ionicActionSheet","$http","Analytics",function(e,t,a,o,r,n,i,s,l,c,d,p){if(e.proposalId=i.id,a.checkLogin(),e.milestones_percentage=0,i.id){l.show({template:"Loading..."});var u=firebase.database().ref("/jobproposals/"+i.id);u.on("value",function(t){if(e.proposal=t.val(),t.val())if(e.milestones_percentage=0,e.proposal&&null!=e.proposal){var a=firebase.database().ref("/jobs/"+e.proposal.jobid);a.on("value",function(t){if(t.val()&&e.proposal&&null!=e.proposal){e.job=t.val();var a=firebase.database().ref("/users/"+e.proposal.talent_id);a.on("value",function(t){l.hide(),e.talent=t.val(),setTimeout(function(){var t=document.getElementById("job-details-message-list"+e.proposalId);t.scrollTop=t.scrollHeight},1e3)})}});for(var o in e.proposal.milestones)e.lastMileStoneKey=o,e.milestones_percentage=parseFloat(e.milestones_percentage)+parseFloat(e.proposal.milestones[o].budget)}else{var r=history.length;history.go(-r)}else{var r=history.length;history.go(-r),l.hide()}})}e.proposalchat=[],e.sendMessage=function(){if(e.proposalchat.message){var t=new Date,o=JSON.parse(angular.toJson({message:e.proposalchat.message,date:t,type:"employer",status:"unread"})),r=firebase.database().ref("/jobproposals/"+i.id+"/message");r.push(o),e.proposalchat.message="";var n=JSON.parse(angular.toJson({date:t,message:a.userdata.name+'(Employer) sent you a message on proposal of "'+e.job.title+'"',type:"contractmessage",sender:a.loggedUserId,senderName:a.userdata.name,status:"unread"})),s=firebase.database().ref("/notification/"+e.proposal.talent_id);s.push(n);var l=document.getElementById("job-details-message-list"+e.proposalId);l.scrollTop=l.scrollHeight}},e.acceptproposal=function(){e.milestones_percentage=0;for(var t in e.proposal.milestones)e.milestones_percentage=parseFloat(e.milestones_percentage)+parseFloat(e.proposal.milestones[t].budget);s(function(){if(e.milestones_percentage==e.proposal.budget){var t=firebase.database().ref("/jobproposals/"+i.id+"/acceptedbyemployer");t.set("1");var o=new Date,r=JSON.parse(angular.toJson({message:"Proposal accepted  *",date:o,type:"employer",system_message:"true",status:"unread"})),s=firebase.database().ref("/jobproposals/"+i.id+"/message");s.push(r);var l=JSON.parse(angular.toJson({date:o,message:a.userdata.name+'(Employer) accepted proposal of "'+e.job.title+'"',type:"contractmessage",sender:a.loggedUserId,senderName:a.userdata.name,status:"unread"})),c=firebase.database().ref("/notification/"+e.proposal.talent_id);c.push(l)}else{n.alert({title:"Milestones",template:"Job budget is "+e.proposal.budget+". Your milestone budget amount total is "+e.milestones_percentage+". Please check your milestone budget and try again."})}},1e3)},e.$watch("newMilestoneData.budget",function(t,a){if(a&&t){var o=t;parseFloat(e.milestones_percentage)+parseFloat(o)<=e.proposal.budget?e.newMilestoneData.budget=t:e.newMilestoneData.budget=a}}),e.changeBid=function(t,a,o){l.show({template:"Loading..."});var r=firebase.database().ref("/jobproposals/"+i.id+"/budget");r.set(t);var n=(firebase.database().ref("/jobproposals/"+i.id).update({acceptedbyemployer:0,acceptedbytalent:0}),new Date),s=JSON.parse(angular.toJson({message:"Changed budget from "+o+" "+a+" to "+o+" "+t+" *",date:n,type:"employer",system_message:"true",status:"unread"})),c=firebase.database().ref("/jobproposals/"+i.id+"/message");c.push(s),l.hide(),e.reCalculateMilestone(t)},e.reCalculateMilestone=function(t){for(var a in e.proposal.milestones){var o=100*e.proposal.milestones[a].budget/t,r=firebase.database().ref("/jobproposals/"+i.id+"/milestones/"+a);r.update({progress:o})}},e.deleteMilestone=function(t,a,o,r){var n=firebase.database().ref("/jobproposals/"+i.id+"/milestones/"+t);n.remove();var s=new Date,l=JSON.parse(angular.toJson({message:"milestone deleted' "+a+"' *",date:s,type:"employer",system_message:"true",status:"unread"})),c=firebase.database().ref("/jobproposals/"+i.id+"/message");c.push(l);firebase.database().ref("/jobproposals/"+i.id).update({acceptedbyemployer:0,acceptedbytalent:0});e.milestones_percentage=e.milestones_percentage-r},e.savemilestone=function(t,a,o,r,s){if(t){var c=100*t.budget/e.proposal.budget;if(parseInt(e.milestones_percentage-r)+parseInt(t.budget)<=e.proposal.budget){e.milestones_percentage=parseFloat(e.milestones_percentage)+parseFloat(c)-s,l.show({template:"Loading..."});var d=firebase.database().ref("/jobproposals/"+i.id+"/milestones/"+a);d.update({deliveryTime:t.deliveryTime,details:t.details,progress:c,budget:t.budget});var p=new Date,u=JSON.parse(angular.toJson({message:"Changed milestone ' *"+o+"'",date:p,type:"employer",system_message:"true",status:"unread"})),m=firebase.database().ref("/jobproposals/"+i.id+"/message");m.push(u);firebase.database().ref("/jobproposals/"+i.id).update({acceptedbyemployer:0,acceptedbytalent:0});l.hide(),e.$$phase||e.$apply()}else{n.alert({title:"Milestones",template:"Milestone progress is not 100%."})}}},e.addNewMilestone=function(){$(".newMilestone").css("display","block");var e=document.getElementById("scroll-content-proposal");e.scrollTop=e.scrollHeight},e.cancelMilestone=function(){$(".newMilestone").css("display","none")},e.newMilestoneData=[],e.createMilestone=function(){if(e.newMilestoneData.title&&e.newMilestoneData.details&&e.newMilestoneData.budget&&e.newMilestoneData.deliveryTime){e.newMilestoneData.progress=100*e.newMilestoneData.budget/e.proposal.budget,e.milestones_percentage=parseFloat(e.milestones_percentage)+parseFloat(e.newMilestoneData.budget);var t=firebase.database().ref("/jobproposals/"+i.id+"/milestones/"+(parseInt(e.lastMileStoneKey)+1));t.set({title:e.newMilestoneData.title,deliveryTime:e.newMilestoneData.deliveryTime,details:e.newMilestoneData.details,progress:e.newMilestoneData.progress,budget:e.newMilestoneData.budget});var a=new Date,o=(firebase.database().ref("/jobproposals/"+i.id).update({acceptedbyemployer:0,acceptedbytalent:0}),JSON.parse(angular.toJson({message:"Added new milestone '"+e.newMilestoneData.title+"' *",date:a,type:"employer",system_message:"true",status:"unread"}))),r=firebase.database().ref("/jobproposals/"+i.id+"/message");r.push(o),$(".newMilestone").css("display","none"),setTimeout(function(){e.newMilestoneData=[]},1)}},e.confirmProposal=function(){var t=n.confirm({title:"Start Contract",template:"Are you sure you want to start the contract?"});t.then(function(t){if(t){if("1"==e.proposal.acceptedbyemployer&&"1"==e.proposal.acceptedbytalent)if(e.milestones_percentage==e.proposal.budget)r.path("/app/milestonespayment/"+i.id+"/first");else{n.alert({title:"Milestones",template:"Job budget is "+e.proposal.budget+". Your milestone budget amount total is "+e.milestones_percentage+". Please check your milestone budget and try again."})}}else console.log("You are not sure")})},e.messageMoreOptions=function(e,t,a){c.show({buttons:[{text:"Translate"}],cancelText:"Cancel",cancel:function(){},buttonClicked:function(t){if(0==t){var o=$("#"+e+a).html();$("#"+e+a).html("<img src='img/smallloading.gif' style='height:16px;width:28px'/>");var r=window.location.origin+"/translation.php";d({method:"POST",url:r,data:{text:o},headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(t){$("#"+e+a).html(t.data.text)},function(e){console.log(e)})}return!0}})},e.MoreOptions=function(e,t){if(e){c.show({buttons:[{text:"Translate"}],cancelText:"Cancel",cancel:function(){},buttonClicked:function(a){if(0==a){var o=e;$("#"+t).html("<img src='img/smallloading.gif' style='height:16px;width:28px'/>");var r=window.location.origin+"/translation.php";d({method:"POST",url:r,data:{text:o},headers:{
"Content-Type":"application/x-www-form-urlencoded"}}).then(function(e){$("#"+t).html(e.data.text)},function(e){console.log(e)})}return!0}})}},p.trackPage("Proposal_Details_Employer_View")}]},{}],54:[function(e,t,a){"use strict";t.exports=["$scope","$rootScope","$http","$ionicLoading",function(e,t,a,o){t.checkLogin()}]},{}],55:[function(e,t,a){"use strict";t.exports=["$scope","$rootScope","$http","$ionicLoading","$filter","$ionicPopup","$ionicModal","Analytics","$interval",function(e,t,a,s,l,c,d,p,u){function m(e){g=$("#"+e),h=g.width(),f().then(function(e){var t=e.toDataURL("image/png"),a=new jsPDF({unit:"px",format:"a4"});a.addImage(t,"JPEG",20,20),a.save("transactions.pdf"),g.width(h)})}function f(){return g.width(1.33333*b[0]-80).css("max-width","none"),html2canvas(g,{imageTimeout:2e3,removeContainer:!0})}t.checkLogin(),t.loggedUserId&&(s.show({template:"Loading..."}),e.getTransactionData=function(){e.myAccountAvailableUSD=0,e.myAccountAvailableHKD=0,e.MyEmployerAccountEscrowUSD=0,e.MyEmployerAccountEscrowHKD=0,e.MyTalentAccountEscrowUSD=0,e.MyTalentAccountEscrowHKD=0,e.AllTransations=[],e.AllTransationsKeys=[];var a=firebase.database().ref("/transactions/").orderByChild("employer_id").equalTo(t.loggedUserId);a.once("value",function(t){e.MyEmployerAccount=t.val();for(var a in e.MyEmployerAccount)if(e.AllTransationsKeys.indexOf(a)===-1){e.AllTransationsKeys.push(a);var o=e.MyEmployerAccount[a];o.id=a,o.newDate=new Date(o.date).getTime(),e.AllTransations.push(o),"escrow"==e.MyEmployerAccount[a].payment_status&&"USD"==e.MyEmployerAccount[a].currency&&(e.MyEmployerAccountEscrowUSD=parseFloat(e.MyEmployerAccountEscrowUSD)+parseFloat(e.MyEmployerAccount[a].amount)),"escrow"==e.MyEmployerAccount[a].payment_status&&"HKD"==e.MyEmployerAccount[a].currency&&(e.MyEmployerAccountEscrowHKD=parseFloat(e.MyEmployerAccountEscrowHKD)+parseFloat(e.MyEmployerAccount[a].amount)),e.$$phase||e.$apply()}s.hide()});var o=firebase.database().ref("/transactions/").orderByChild("moneyof").equalTo(t.loggedUserId);o.once("value",function(t){e.MyAvialableAccount=t.val();for(var a in e.MyAvialableAccount)if(e.AllTransationsKeys.indexOf(a)===-1){e.AllTransationsKeys.push(a);var o=e.MyAvialableAccount[a];o.id=a,o.newDate=new Date(o.date).getTime(),"available"==e.MyAvialableAccount[a].payment_status&&e.AllTransations.push(o),"available"==e.MyAvialableAccount[a].payment_status&&"USD"==e.MyAvialableAccount[a].currency&&(e.myAccountAvailableUSD=parseFloat(e.myAccountAvailableUSD)+parseFloat(e.MyAvialableAccount[a].amount)),"available"==e.MyAvialableAccount[a].payment_status&&"HKD"==e.MyAvialableAccount[a].currency&&(e.myAccountAvailableHKD=parseFloat(e.myAccountAvailableHKD)+parseFloat(e.MyAvialableAccount[a].amount)),e.$$phase||e.$apply()}s.hide()})},e.getTransactionData(),u(function(){e.getTransactionData()},3e4)),d.fromTemplateUrl("transation-modal.html",{scope:e,animation:"slide-in-up"}).then(function(t){e.modal=t}),e.viewTransactionDetails=function(t){if(e.openModal(),e.trans=t,e.milestone=null,t.contractid&&t.milestoneid){var a=firebase.database().ref("/contracts/"+t.contractid+"/milestones/"+t.milestoneid);a.once("value",function(t){e.milestone=t.val()})}},e.openModal=function(){e.modal.show()},e.donwonloadInvoice=function(){if(e.trans){s.show();var t="";e.trans.employer_id?t=e.trans.employer_id:e.trans.employerid&&(t=e.trans.employerid);var a="";e.trans.talent_id?a=e.trans.talent_id:e.trans.talentid&&(a=e.trans.talentid);var l=firebase.database().ref("/users").child(t);l.once("value",function(t){e.inoviceEmployer=t.val();var l=firebase.database().ref("/users").child(a);l.once("value",function(t){e.inoviceTalent=t.val();var a="";e.inoviceEmployer.billaddress.addressLine1&&(a=a+e.inoviceEmployer.billaddress.addressLine1+"<br/>"),e.inoviceEmployer.billaddress.addressLine2&&(a=a+e.inoviceEmployer.billaddress.addressLine2+"<br/>"),e.inoviceEmployer.billaddress.addressLine3&&(a=a+e.inoviceEmployer.billaddress.addressLine3+"<br/>"),e.inoviceEmployer.billaddress.city&&(a=a+e.inoviceEmployer.billaddress.city+", "),e.inoviceEmployer.billaddress.country&&(a=a+e.inoviceEmployer.billaddress.country+", "),e.inoviceEmployer.billaddress.postCode&&(a=a+e.inoviceEmployer.billaddress.postCode+"<br/>");var l="";if(e.inoviceTalent.billaddress.addressLine1&&(l=l+e.inoviceTalent.billaddress.addressLine1+"<br/>"),e.inoviceTalent.billaddress.addressLine2&&(l=l+e.inoviceTalent.billaddress.addressLine2+"<br/>"),e.inoviceTalent.billaddress.addressLine3&&(l=l+e.inoviceTalent.billaddress.addressLine3+"<br/>"),e.inoviceTalent.billaddress.city&&(l=l+e.inoviceTalent.billaddress.city+", "),e.inoviceTalent.billaddress.country&&(l=l+e.inoviceTalent.billaddress.country+", "),e.inoviceTalent.billaddress.postCode&&(l=l+e.inoviceTalent.billaddress.postCode+"<br/>"),"true"==e.trans.serviceFees){var c=o;c=e.inoviceEmployer.companyName?c.replace("###employerComanyName###",e.inoviceEmployer.companyName):c.replace("###employerComanyName###",""),c=e.inoviceEmployer.name?c.replace("###employername###",e.inoviceEmployer.name):c.replace("###employername###",""),c=a?c.replace("###employerAddress###",a):c.replace("###employerAddress###",""),c=e.inoviceTalent.companyName?c.replace("###TalentComanyName###",e.inoviceTalent.companyName):c.replace("###TalentComanyName###",""),c=e.inoviceTalent.name?c.replace("###TalentName###",e.inoviceTalent.name):c.replace("###TalentName###",""),c=l?c.replace("###TalentAddress###",l):c.replace("###TalentAddress###",""),c=c.replace("###date###",e.trans.date),c=c.replace("###Invoiceid###",e.trans.id),c=c.replace("###amount###",e.trans.currency+" "+Math.abs(e.trans.amount)),c=c.replace("###amountdue###",e.trans.currency+" "+Math.abs(e.trans.amount)),c=c.replace("###serviceFeePercent###",e.trans.serviceFeePercent),c=c.replace("###Contract###",e.trans.contract),c=c.replace("###Contractsubj###",e.trans.job_name),c=c.replace("###Clientname###",e.trans.employername),c=c.replace("###specification###",e.trans.totalamt+" "+e.trans.currency+" X "+e.trans.serviceFeePercent+"% = "+e.trans.amount+" "+e.trans.currency),c=c.replace("###currency1###",e.trans.currency),c=c.replace("###currency2###",e.trans.currency),c=c.replace("###amount1###",Math.abs(e.trans.amount)),c=c.replace("###amount2###",Math.abs(e.trans.amount)),c=c.replace("###note###","Notes:  For Invoice "+e.trans.serviceFeeFor),setTimeout(function(){$("#serviceFees").html(c),m("serviceFees"),s.hide()},1e3)}else if("true"==e.trans.withdraw_status){var c=r;c=e.inoviceEmployer.companyName?c.replace("###employerComanyName###",e.inoviceEmployer.companyName):c.replace("###employerComanyName###",""),c=e.inoviceEmployer.name?c.replace("###employername###",e.inoviceEmployer.name):c.replace("###employername###",""),c=a?c.replace("###employerAddress###",a):c.replace("###employerAddress###",""),c=e.inoviceTalent.companyName?c.replace("###TalentComanyName###",e.inoviceTalent.companyName):c.replace("###TalentComanyName###",""),c=e.inoviceTalent.name?c.replace("###TalentName###",e.inoviceTalent.name):c.replace("###TalentName###",""),c=l?c.replace("###TalentAddress###",l):c.replace("###TalentAddress###",""),c=c.replace("###date###",e.trans.date),c=c.replace("###Invoiceid###",e.trans.id),c=c.replace("###amount###",e.trans.currency+" "+Math.abs(e.trans.amount)),c=c.replace("###amountdue###",e.trans.currency+" "+Math.abs(e.trans.amount)),c=c.replace("###currency1###",e.trans.currency),c=c.replace("###currency2###",e.trans.currency),c=c.replace("###amount1###",Math.abs(e.trans.amount)),c=c.replace("###amount2###",Math.abs(e.trans.amount)),setTimeout(function(){$("#serviceFees").html(c),m("serviceFees"),s.hide()},1e3)}else if("bonus"==e.trans.type){var c=n;c=e.inoviceEmployer.companyName?c.replace("###employerComanyName###",e.inoviceEmployer.companyName):c.replace("###employerComanyName###",""),c=e.inoviceEmployer.name?c.replace("###employername###",e.inoviceEmployer.name):c.replace("###employername###",""),c=a?c.replace("###employerAddress###",a):c.replace("###employerAddress###",""),c=e.inoviceTalent.companyName?c.replace("###TalentComanyName###",e.inoviceTalent.companyName):c.replace("###TalentComanyName###",""),c=e.inoviceTalent.name?c.replace("###TalentName###",e.inoviceTalent.name):c.replace("###TalentName###",""),c=l?c.replace("###TalentAddress###",l):c.replace("###TalentAddress###",""),c=c.replace("###date###",e.trans.date),c=c.replace("###Invoiceid###",e.trans.id),c=c.replace("###amount###",e.trans.currency+" "+Math.abs(e.trans.amount)),c=c.replace("###amountdue###",e.trans.currency+" "+Math.abs(e.trans.amount)),c=c.replace("###currency1###",e.trans.currency),c=c.replace("###currency2###",e.trans.currency),c=c.replace("###amount1###",Math.abs(e.trans.amount)),c=c.replace("###amount2###",Math.abs(e.trans.amount));var d="";e.trans.milestonedetails&&(d="("+e.trans.milestonedetails+")"),c=c.replace("###specification###","Invoice for (Bonus)("+e.trans.contractid+") : ("+e.trans.milestoneid+" #) , "+d+" to ("+e.inoviceTalent.name+")"),setTimeout(function(){$("#serviceFees").html(c),m("serviceFees"),s.hide()},1e3)}else if("available"==e.trans.payment_status&&"escrow_refund"!=e.trans.payment_status&&"true"!=e.trans.refund&&"bonus"!=e.trans.type&&"true"!=e.trans.withdraw_status&&"true"!=e.trans.serviceFees){var c=n;c=e.inoviceEmployer.companyName?c.replace("###employerComanyName###",e.inoviceEmployer.companyName):c.replace("###employerComanyName###",""),c=e.inoviceEmployer.name?c.replace("###employername###",e.inoviceEmployer.name):c.replace("###employername###",""),c=a?c.replace("###employerAddress###",a):c.replace("###employerAddress###",""),c=e.inoviceTalent.companyName?c.replace("###TalentComanyName###",e.inoviceTalent.companyName):c.replace("###TalentComanyName###",""),c=e.inoviceTalent.name?c.replace("###TalentName###",e.inoviceTalent.name):c.replace("###TalentName###",""),c=l?c.replace("###TalentAddress###",l):c.replace("###TalentAddress###",""),c=c.replace("###date###",e.trans.date),c=c.replace("###Invoiceid###",e.trans.id),c=c.replace("###amount###",e.trans.currency+" "+Math.abs(e.trans.amount)),c=c.replace("###amountdue###",e.trans.currency+" "+Math.abs(e.trans.amount)),c=c.replace("###currency1###",e.trans.currency),c=c.replace("###currency2###",e.trans.currency),c=c.replace("###amount1###",Math.abs(e.trans.amount)),c=c.replace("###amount2###",Math.abs(e.trans.amount)),c=c.replace("###specification###","Invoice for ( "+e.trans.job_name+" )( "+e.trans.contractid+" ): ("+e.trans.milestoneid+" #) - ( "+e.trans.milestonedetails+" ), for ( "+e.inoviceTalent.name+" )"),setTimeout(function(){$("#serviceFees").html(c),m("serviceFees"),s.hide()},1e3)}else if("escrow"==e.trans.payment_status||"escrow_transefered"==e.trans.payment_status||"escrow_refund"==e.trans.payment_status||"true"!=e.trans.refund){var c=i;c=e.inoviceEmployer.companyName?c.replace("###employerComanyName###",e.inoviceEmployer.companyName):c.replace("###employerComanyName###",""),c=e.inoviceEmployer.name?c.replace("###employername###",e.inoviceEmployer.name):c.replace("###employername###",""),c=a?c.replace("###employerAddress###",a):c.replace("###employerAddress###",""),c=e.inoviceTalent.companyName?c.replace("###TalentComanyName###",e.inoviceTalent.companyName):c.replace("###TalentComanyName###",""),c=e.inoviceTalent.name?c.replace("###TalentName###",e.inoviceTalent.name):c.replace("###TalentName###",""),c=l?c.replace("###TalentAddress###",l):c.replace("###TalentAddress###",""),c=c.replace("###date###",e.trans.date),c=c.replace("###Invoiceid###",e.trans.id),c=c.replace("###amount###",e.trans.currency+" "+Math.abs(e.trans.amount)),c=c.replace("###amountdue###",e.trans.currency+" "+Math.abs(e.trans.amount)),c=c.replace("###currency1###",e.trans.currency),c=c.replace("###currency2###",e.trans.currency),c=c.replace("###amount1###",Math.abs(e.trans.amount)),c=c.replace("###amount2###",Math.abs(e.trans.amount)),c="card"==e.trans.paidFrom?c.replace("###specification###","Paid from (Visa / Master / Paypal ) to escrow "):c.replace("###specification###","Paid from ("+e.trans.employername+") My Account to escrow "),setTimeout(function(){$("#serviceFees").html(c),m("serviceFees"),s.hide()},1e3)}else alert("Invoice not available.")})})}},e.closeModal=function(){e.modal.hide()},setTimeout(function(){e.$$phase||e.$apply()},5e3);var g,h,b=[595.28,841.89];p.trackPage("Transactions")}];var o='<div style="width:50%;float:left;"><div style="width: 150px;background: lightgray;text-align: center;height: 80px;line-height:80px;">Worklidate Logo</div><div style="width:100%;float:left;font-size: 14px;"><div style="width:20%;float:left;">  <div style="margin-top:10px;"><b>From</b> : </div> <div style="margin-top:10px;"><b>Address</b> : </div> <div style="margin-top:82px;"><b>Bill To</b> : </div>  <div style="margin-top:10px;"><b>Attn</b> : </div> <div style="margin-top:10px;"><b>Address</b> : </div></div> <div style="width:80%;float:left;">  <div style="margin-top:10px;">BLISS TECH LIMITED</div>   <div style="margin-top:10px;min-height: 90px;">1702, Hewlett Centre, 54 Hoi Yuen Road<br/>Kwun Tong, Kowloon<br/>Hong Kong</div>   <div style="margin-top:10px;">###employerComanyName###</div>   <div style="margin-top:10px;">###employername###</div>   <div style="margin-top:10px;min-height: 50px;">###employerAddress###</div></div> </div></div><div style="width:50%;float:left;"><div style="width: 200px;background: lightgray;text-align: center;height: 40px;line-height:40px;float:right;">   INVOICE </div> <div style="float:right;margin-top: 10px;margin-right: 10px;font-size: 13px;"><div>Invoice # : ###Invoiceid###</div> <div>Date : ###date###</div>  <div>Total Amount:###amount###</div>  <div><b>Total Due:</b> ###amountdue###</div> </div></div><div style="float:left;width:100%;"><div style="float: left;width: 100%; min-height: 30px; border-top: 2px solid #111;border-bottom: 2px solid #111;">  <div style="float:left;width:65%;margin-left:5%;line-height:30px;">Description / Memo</div>  <div style="float:left;width:30%;text-align: center;line-height:30px;">Amount</div></div> <div style="float: left;width: 100%; min-height: 30px;border-bottom: 2px solid #111;height: 200px;"> <div style="float:left;width:64%;margin-left:5%;border-right: 2px solid #111;height: 100%;    padding-top: 10px;">Service Fee - ###serviceFeePercent###%<br/> Contract ID : ###Contract###<br/>            Contract Subject: ###Contractsubj###<br/>      Client: ###Clientname###<br/>              Amount: ###specification###<br/>###note###<br/> </div> <div style="float:left;width:29%;text-align: center;height: 100%;"><div style="float: left; text-align: center;width:48%;    border-right: 2px solid #111;height: 100%;padding-top: 10px;"> ###currency1###:</div><div style="padding-top: 10px;float: left; text-align: center;width:50%;height: 100%;">###amount1###</div></div></div><div style="float: left;width: 100%; min-height: 30px;border-bottom: 2px solid #111;height: 40px;">  <div style="float:left;width:64%;margin-left:5%;border-right: 2px solid #111;height: 100%;padding-top: 10px;">    Total amount </div> <div style="float:left;width:29%;text-align: center;height: 100%;"><div style="float: left; text-align: center;width:48%;  border-right: 2px solid #111;height: 100%;padding-top: 10px;"> ###currency2###:</div><div style="float: left; text-align: center;width:50%;height: 100%;padding-top: 10px;">###amount2###</div></div></div></div>',r='<div style="width:50%;float:left;"><div style="width: 150px;background: lightgray;text-align: center;height: 80px;line-height:80px;">Worklidate Logo</div><div style="width:100%;float:left;font-size: 14px;"><div style="width:20%;float:left;">  <div style="margin-top:10px;"><b>From</b> : </div> <div style="margin-top:10px;"><b>Address</b> : </div> <div style="margin-top:82px;"><b>Bill To</b> : </div>  <div style="margin-top:10px;"><b>Attn</b> : </div> <div style="margin-top:10px;"><b>Address</b> : </div></div> <div style="width:80%;float:left;">  <div style="margin-top:10px;">BLISS TECH LIMITED</div>   <div style="margin-top:10px;min-height: 90px;">1702, Hewlett Centre, 54 Hoi Yuen Road<br/>Kwun Tong, Kowloon<br/>Hong Kong</div>   <div style="margin-top:10px;">###employerComanyName###</div>   <div style="margin-top:10px;">###employername###</div>   <div style="margin-top:10px;min-height: 50px;">###employerAddress###</div></div> </div></div><div style="width:50%;float:left;"><div style="width: 200px;background: lightgray;text-align: center;height: 40px;line-height:40px;float:right;">   INVOICE </div> <div style="float:right;margin-top: 10px;margin-right: 10px;font-size: 13px;"><div>Invoice # : ###Invoiceid###</div> <div>Date : ###date###</div>  <div>Total Amount:###amount###</div>  <div><b>Total Due:</b> ###amountdue###</div> </div></div><div style="float:left;width:100%;"><div style="float: left;width: 100%; min-height: 30px; border-top: 2px solid #111;border-bottom: 2px solid #111;">  <div style="float:left;width:65%;margin-left:5%;line-height:30px;">Description / Memo</div>  <div style="float:left;width:30%;text-align: center;line-height:30px;">Amount</div></div> <div style="float: left;width: 100%; min-height: 30px;border-bottom: 2px solid #111;height: 200px;"> <div style="float:left;width:64%;margin-left:5%;border-right: 2px solid #111;height: 100%;    padding-top: 10px;">Invoice for withdarwal fee<br/> </div> <div style="float:left;width:29%;text-align: center;height: 100%;"><div style="float: left; text-align: center;width:48%;    border-right: 2px solid #111;height: 100%;padding-top: 10px;"> ###currency1###:</div><div style="padding-top: 10px;float: left; text-align: center;width:50%;height: 100%;">###amount1###</div></div></div><div style="float: left;width: 100%; min-height: 30px;border-bottom: 2px solid #111;height: 40px;">  <div style="float:left;width:64%;margin-left:5%;border-right: 2px solid #111;height: 100%;padding-top: 10px;">    Total amount </div> <div style="float:left;width:29%;text-align: center;height: 100%;"><div style="float: left; text-align: center;width:48%;  border-right: 2px solid #111;height: 100%;padding-top: 10px;"> ###currency2###:</div><div style="float: left; text-align: center;width:50%;height: 100%;padding-top: 10px;">###amount2###</div></div></div></div>',n='<div style="width:50%;float:left;"><div style="width:100%;float:left;font-size: 14px;"><div style="width:20%;float:left;">  <div style="margin-top:10px;"><b>From</b> : </div> <div style="margin-top:10px;"><b>Address</b> : </div> <div style="margin-top:82px;"><b>Bill To</b> : </div>  <div style="margin-top:10px;"><b>Attn</b> : </div> <div style="margin-top:10px;"><b>Address</b> : </div></div> <div style="width:80%;float:left;">  <div style="margin-top:10px;">###TalentComanyName###</div>  <div style="margin-top:10px;">###TalentName###</div>   <div style="margin-top:10px;min-height: 90px;">###TalentAddress###</div>   <div style="margin-top:10px;">###employerComanyName###</div>   <div style="margin-top:10px;">###employername###</div>   <div style="margin-top:10px;min-height: 50px;">###employerAddress###</div></div> </div></div><div style="width:50%;float:left;"><div style="width: 200px;background: lightgray;text-align: center;height: 40px;line-height:40px;float:right;">   INVOICE </div> <div style="float:right;margin-top: 10px;margin-right: 10px;font-size: 13px;"><div>Invoice # : ###Invoiceid###</div> <div>Date : ###date###</div>  <div>Total Amount:###amount###</div>  <div><b>Total Due:</b> ###amountdue###</div> </div></div><div style="float:left;width:100%;"><div style="float: left;width: 100%; min-height: 30px; border-top: 2px solid #111;border-bottom: 2px solid #111;">  <div style="float:left;width:65%;margin-left:5%;line-height:30px;">Description / Memo</div>  <div style="float:left;width:30%;text-align: center;line-height:30px;">Amount</div></div> <div style="float: left;width: 100%; min-height: 30px;border-bottom: 2px solid #111;height: 200px;"> <div style="float:left;width:64%;margin-left:5%;border-right: 2px solid #111;height: 100%;    padding-top: 10px;">###specification###<br/> </div> <div style="float:left;width:29%;text-align: center;height: 100%;"><div style="float: left; text-align: center;width:48%;    border-right: 2px solid #111;height: 100%;padding-top: 10px;"> ###currency1###:</div><div style="padding-top: 10px;float: left; text-align: center;width:50%;height: 100%;">###amount1###</div></div></div><div style="float: left;width: 100%; min-height: 30px;border-bottom: 2px solid #111;height: 40px;">  <div style="float:left;width:64%;margin-left:5%;border-right: 2px solid #111;height: 100%;padding-top: 10px;">    Total amount </div> <div style="float:left;width:29%;text-align: center;height: 100%;"><div style="float: left; text-align: center;width:48%;  border-right: 2px solid #111;height: 100%;padding-top: 10px;"> ###currency2###:</div><div style="float: left; text-align: center;width:50%;height: 100%;padding-top: 10px;">###amount2###</div></div></div>Remit to Worklidate<br/><br/>Invoice created via Worklidate</div>',i='<div style="width:50%;float:left;"><div style="width: 150px;background: lightgray;text-align: center;height: 80px;line-height:80px;">Worklidate Logo</div><div style="width:100%;float:left;font-size: 14px;"><div style="width:20%;float:left;">  <div style="margin-top:10px;"><b>From</b> : </div> <div style="margin-top:10px;"><b>Address</b> : </div> <div style="margin-top:82px;"><b>Bill To</b> : </div>  <div style="margin-top:10px;"><b>Attn</b> : </div> <div style="margin-top:10px;"><b>Address</b> : </div></div> <div style="width:80%;float:left;">  <div style="margin-top:10px;">BLISS TECH LIMITED</div>   <div style="margin-top:10px;min-height: 90px;">1702, Hewlett Centre, 54 Hoi Yuen Road<br/>Kwun Tong, Kowloon<br/>Hong Kong</div>   <div style="margin-top:10px;">###employerComanyName###</div>   <div style="margin-top:10px;">###employername###</div>   <div style="margin-top:10px;min-height: 50px;">###employerAddress###</div></div> </div></div><div style="width:50%;float:left;"><div style="width: 200px;background: lightgray;text-align: center;height: 40px;line-height:40px;float:right;">   INVOICE </div> <div style="float:right;margin-top: 10px;margin-right: 10px;font-size: 13px;"><div>Invoice # : ###Invoiceid###</div> <div>Date : ###date###</div>  <div>Total Amount:###amount###</div>  <div><b>Total Due:</b> ###amountdue###</div> </div></div><div style="float:left;width:100%;"><div style="float: left;width: 100%; min-height: 30px; border-top: 2px solid #111;border-bottom: 2px solid #111;">  <div style="float:left;width:65%;margin-left:5%;line-height:30px;">Description / Memo</div>  <div style="float:left;width:30%;text-align: center;line-height:30px;">Amount</div></div> <div style="float: left;width: 100%; min-height: 30px;border-bottom: 2px solid #111;height: 200px;"> <div style="float:left;width:64%;margin-left:5%;border-right: 2px solid #111;height: 100%;    padding-top: 10px;">###specification###<br/> </div> <div style="float:left;width:29%;text-align: center;height: 100%;"><div style="float: left; text-align: center;width:48%;    border-right: 2px solid #111;height: 100%;padding-top: 10px;"> ###currency1###:</div><div style="padding-top: 10px;float: left; text-align: center;width:50%;height: 100%;">###amount1###</div></div></div><div style="float: left;width: 100%; min-height: 30px;border-bottom: 2px solid #111;height: 40px;">  <div style="float:left;width:64%;margin-left:5%;border-right: 2px solid #111;height: 100%;padding-top: 10px;">    Total amount </div> <div style="float:left;width:29%;text-align: center;height: 100%;"><div style="float: left; text-align: center;width:48%;  border-right: 2px solid #111;height: 100%;padding-top: 10px;"> ###currency2###:</div><div style="float: left; text-align: center;width:50%;height: 100%;padding-top: 10px;">###amount2###</div></div></div></div>'},{}]},{},[1]);